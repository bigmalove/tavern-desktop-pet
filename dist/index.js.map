{"version":3,"file":"index.js","mappings":"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","sources":["webpack://tavern_helper_template////ui/FunctionMenu.vue?bf5d","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template////ui/ChatBubble.vue?f002","webpack://tavern_helper_template////ui/TreeNode.vue?5d18","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template////ui/ModelBrowser.vue?6a09","webpack://tavern_helper_template////ui/ModelBrowser.vue?1256","webpack://tavern_helper_template////ui/FunctionMenu.vue?0566","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template////ui/SettingsPanel.vue?f998","webpack://tavern_helper_template////ui/SettingsPanel.vue?f9bc","webpack://tavern_helper_template////ui/TreeNode.vue?7472","webpack://tavern_helper_template////ui/PetContainer.vue?4c77","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template////ui/ChatBubble.vue?f53b","webpack://tavern_helper_template////ui/PetContainer.vue?39aa","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template////core/constants.ts","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template////core/emotion.ts","src://tavern_helper_template////utils/dom.ts","src://tavern_helper_template////core/settings.ts","src://tavern_helper_template////audio/tts-config.ts","src://tavern_helper_template////live2d/loader.ts","src://tavern_helper_template////utils/gesture-recognizer.ts","src://tavern_helper_template////live2d/stage.ts","src://tavern_helper_template////live2d/expression-motion.ts","src://tavern_helper_template////live2d/manager.ts","src://tavern_helper_template////live2d/lip-sync.ts","src://tavern_helper_template////audio/tts-manager.ts","src://tavern_helper_template////chat/monitor.ts","src://tavern_helper_template////chat/prompt-templates.ts","src://tavern_helper_template////chat/commentator.ts","src://tavern_helper_template////chat/emotion-cot.ts","src://tavern_helper_template////core/ui.ts","src://tavern_helper_template////ui/ChatBubble.vue","webpack://tavern_helper_template////ui/ChatBubble.vue?4a23","src://tavern_helper_template////ui/FunctionMenu.vue","webpack://tavern_helper_template////ui/FunctionMenu.vue?e028","src://tavern_helper_template////live2d/model-browser.ts","src://tavern_helper_template////ui/TreeNode.vue","webpack://tavern_helper_template////ui/TreeNode.vue?c5ea","src://tavern_helper_template////ui/ModelBrowser.vue","webpack://tavern_helper_template////ui/ModelBrowser.vue?8203","src://tavern_helper_template////ui/SettingsPanel.vue","webpack://tavern_helper_template////ui/SettingsPanel.vue?6f86","src://tavern_helper_template////ui/PetContainer.vue","webpack://tavern_helper_template////ui/PetContainer.vue?aed4","src://tavern_helper_template////utils/style-teleport.ts","src://tavern_helper_template////index.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FunctionMenu.vue?vue&type=style&index=0&id=ff4f8948&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"078f2c0f\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FunctionMenu.vue?vue&type=style&index=0&id=ff4f8948&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FunctionMenu.vue?vue&type=style&index=0&id=ff4f8948&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */.chat-bubble[data-v-0f511089]{position:fixed;transform:translate(-50%,-100%);max-width:320px;min-width:80px;animation:bubble-in-0f511089 .22s ease-out;z-index:10004;pointer-events:none}.bubble-content[data-v-0f511089]{position:relative;background:rgba(14,14,14,.96);color:#fff;border:1px solid #ffe100;padding:9px 26px 10px 13px;clip-path:polygon(10px 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%,0 10px);font-size:12px;line-height:1.5;word-break:break-word;box-shadow:8px 8px 0 rgba(0,0,0,.56);font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif;pointer-events:auto}.bubble-content[data-v-0f511089]::after{content:\"\";position:absolute;right:22px;bottom:-2px;width:30px;height:3px;background:#ffe100}.bubble-text[data-v-0f511089]{white-space:pre-wrap}.cursor[data-v-0f511089]{animation:blink-0f511089 .64s infinite;margin-left:1px;color:#00dac2}.bubble-close[data-v-0f511089]{position:absolute;right:6px;top:5px;width:15px;height:15px;border:1px solid hsla(0,0%,100%,.3);background:hsla(0,0%,100%,.08);color:#fff;line-height:13px;text-align:center;cursor:pointer;font-size:10px;padding:0;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif}.bubble-close[data-v-0f511089]:hover{background:#ff3b30;border-color:#ff3b30}.bubble-arrow[data-v-0f511089]{width:11px;height:11px;background:rgba(14,14,14,.96);border-left:1px solid #ffe100;border-bottom:1px solid #ffe100;transform:rotate(-45deg);margin:0 auto;margin-top:-6px}@keyframes bubble-in-0f511089{from{opacity:0;transform:translateX(-50%) translateY(8px) scale(0.9)}to{opacity:1;transform:translateX(-50%) translateY(0) scale(1)}}@keyframes blink-0f511089{0%,50%{opacity:1}51%,100%{opacity:0}}`, \"\",{\"version\":3,\"sources\":[\"<no source>\",\"webpack://.////ui/ChatBubble.vue\"],\"names\":[],\"mappings\":\"AAAA,iEAAA,CCAwH,8BAAa,cAAe,CAAA,+BAAiC,CAAA,eAAgB,CAAA,cAAe,CAAA,0CAAkC,CAAA,aAAc,CAAA,mBAAoB,CAAA,iCAAgB,iBAAkB,CAAA,6BAA8B,CAAA,UAAW,CAAA,wBAAyB,CAAA,0BAA2B,CAAA,4FAAkG,CAAA,cAAe,CAAA,eAAgB,CAAA,qBAAsB,CAAA,oCAAqC,CAAA,gFAAiF,CAAA,mBAAoB,CAAA,wCAAuB,UAAW,CAAA,iBAAkB,CAAA,UAAW,CAAA,WAAY,CAAA,UAAW,CAAA,UAAW,CAAA,kBAAmB,CAAA,8BAAa,oBAAqB,CAAA,yBAAQ,sCAA8B,CAAA,eAAgB,CAAA,aAAc,CAAA,+BAAc,iBAAkB,CAAA,SAAU,CAAA,OAAQ,CAAA,UAAW,CAAA,WAAY,CAAA,mCAAoC,CAAA,8BAA+B,CAAA,UAAW,CAAA,gBAAiB,CAAA,iBAAkB,CAAA,cAAe,CAAA,cAAe,CAAA,SAAU,CAAA,iDAAkD,CAAA,qCAAoB,kBAAmB,CAAA,oBAAqB,CAAA,+BAAc,UAAW,CAAA,WAAY,CAAA,6BAA8B,CAAA,6BAA8B,CAAA,+BAAgC,CAAA,wBAAyB,CAAA,aAAc,CAAA,eAAgB,CAAA,8BAAqB,KAAK,SAAU,CAAA,qDAAsD,CAAA,GAAG,SAAU,CAAA,iDAAkD,CAAC,CAAA,0BAAiB,OAAO,SAAU,CAAA,SAAS,SAAU,CAAC\",\"sourcesContent\":[null,\"@import\\\"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap\\\";.chat-bubble{position:fixed;transform:translate(-50%, -100%);max-width:320px;min-width:80px;animation:bubble-in .22s ease-out;z-index:10004;pointer-events:none}.bubble-content{position:relative;background:rgba(14,14,14,.96);color:#fff;border:1px solid #ffe100;padding:9px 26px 10px 13px;clip-path:polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);font-size:12px;line-height:1.5;word-break:break-word;box-shadow:8px 8px 0 rgba(0,0,0,.56);font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif;pointer-events:auto}.bubble-content::after{content:\\\"\\\";position:absolute;right:22px;bottom:-2px;width:30px;height:3px;background:#ffe100}.bubble-text{white-space:pre-wrap}.cursor{animation:blink .64s infinite;margin-left:1px;color:#00dac2}.bubble-close{position:absolute;right:6px;top:5px;width:15px;height:15px;border:1px solid hsla(0,0%,100%,.3);background:hsla(0,0%,100%,.08);color:#fff;line-height:13px;text-align:center;cursor:pointer;font-size:10px;padding:0;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif}.bubble-close:hover{background:#ff3b30;border-color:#ff3b30}.bubble-arrow{width:11px;height:11px;background:rgba(14,14,14,.96);border-left:1px solid #ffe100;border-bottom:1px solid #ffe100;transform:rotate(-45deg);margin:0 auto;margin-top:-6px}@keyframes bubble-in{from{opacity:0;transform:translateX(-50%) translateY(8px) scale(0.9)}to{opacity:1;transform:translateX(-50%) translateY(0) scale(1)}}@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */.node-row[data-v-3a6a95ba]{display:flex;align-items:center;padding:5px 8px;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.08);font-size:12px;gap:4px;-webkit-user-select:none;user-select:none;transition:background .14s}.node-row[data-v-3a6a95ba]:hover{background:rgba(255,225,0,.12)}.node-row.is-model .node-name[data-v-3a6a95ba]{color:#00dac2;font-weight:600}.node-row.is-selected[data-v-3a6a95ba]{background:rgba(255,225,0,.2)}.expand-icon[data-v-3a6a95ba]{width:14px;font-size:8px;color:#8d8d8d;transition:transform .2s;flex-shrink:0;text-align:center}.expand-icon.expanded[data-v-3a6a95ba]{transform:rotate(90deg)}.expand-icon.placeholder[data-v-3a6a95ba]{visibility:hidden}.node-icon[data-v-3a6a95ba]{font-size:13px;flex-shrink:0;line-height:1}.node-name[data-v-3a6a95ba]{color:#f1f1f1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.node-spinner[data-v-3a6a95ba]{display:inline-block;width:10px;height:10px;border:1.5px solid #4d4d4d;border-top-color:#00dac2;border-radius:50%;animation:spin-3a6a95ba .8s linear infinite;flex-shrink:0;margin-left:4px}@keyframes spin-3a6a95ba{to{transform:rotate(360deg)}}.empty-hint[data-v-3a6a95ba]{font-size:11px;color:#8d8d8d;padding:4px 8px}.child-error[data-v-3a6a95ba]{font-size:11px;color:#ffb5af;padding:4px 8px}.child-error .retry-link[data-v-3a6a95ba]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.child-error .retry-link[data-v-3a6a95ba]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.child-error .retry-link[data-v-3a6a95ba]:disabled{opacity:.45;cursor:not-allowed}.child-error .retry-link[data-v-3a6a95ba]{height:22px;min-width:56px;padding:0 8px;margin-left:6px;font-size:10px;border-color:rgba(0,218,194,.55);color:#c5fff9;cursor:pointer}.child-error .retry-link[data-v-3a6a95ba]:hover{background:#00dac2;border-color:#00dac2;color:#000}`, \"\",{\"version\":3,\"sources\":[\"<no source>\",\"webpack://.////ui/TreeNode.vue\"],\"names\":[],\"mappings\":\"AAAA,iEAAA,CCAwH,2BAAU,YAAa,CAAA,kBAAmB,CAAA,eAAgB,CAAA,cAAe,CAAA,2CAA4C,CAAA,cAAe,CAAA,OAAQ,CAAA,wBAAiB,CAAjB,gBAAiB,CAAA,0BAA2B,CAAA,iCAAgB,8BAA+B,CAAA,+CAA8B,aAAc,CAAA,eAAgB,CAAA,uCAAsB,6BAA8B,CAAA,8BAAa,UAAW,CAAA,aAAc,CAAA,aAAc,CAAA,wBAAyB,CAAA,aAAc,CAAA,iBAAkB,CAAA,uCAAsB,uBAAwB,CAAA,0CAAyB,iBAAkB,CAAA,4BAAW,cAAe,CAAA,aAAc,CAAA,aAAc,CAAA,4BAAW,aAAc,CAAA,eAAgB,CAAA,sBAAuB,CAAA,kBAAmB,CAAA,MAAO,CAAA,+BAAc,oBAAqB,CAAA,UAAW,CAAA,WAAY,CAAA,0BAA2B,CAAA,wBAAyB,CAAA,iBAAkB,CAAA,2CAAmC,CAAA,aAAc,CAAA,eAAgB,CAAA,yBAAgB,GAAG,wBAAyB,CAAC,CAAA,6BAAY,cAAe,CAAA,aAAc,CAAA,eAAgB,CAAA,8BAAa,cAAe,CAAA,aAAc,CAAA,eAAgB,CAAA,0CAAyB,uBAAgB,CAAhB,eAAgB,CAAA,oCAAqC,CAAA,wBAAyB,CAAA,UAAW,CAAA,iDAAkD,CAAA,eAAgB,CAAA,oBAAqB,CAAA,wBAAyB,CAAA,cAAe,CAAA,kFAAuF,CAAA,sEAAuE,CAAA,+DAA8C,kBAAmB,CAAA,UAAW,CAAA,oBAAqB,CAAA,mDAAkC,WAAY,CAAA,kBAAmB,CAAA,0CAAyB,WAAY,CAAA,cAAe,CAAA,aAAc,CAAA,eAAgB,CAAA,cAAe,CAAA,gCAAiC,CAAA,aAAc,CAAA,cAAe,CAAA,gDAA+B,kBAAmB,CAAA,oBAAqB,CAAA,UAAW\",\"sourcesContent\":[null,\"@import\\\"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap\\\";.node-row{display:flex;align-items:center;padding:5px 8px;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.08);font-size:12px;gap:4px;user-select:none;transition:background .14s}.node-row:hover{background:rgba(255,225,0,.12)}.node-row.is-model .node-name{color:#00dac2;font-weight:600}.node-row.is-selected{background:rgba(255,225,0,.2)}.expand-icon{width:14px;font-size:8px;color:#8d8d8d;transition:transform .2s;flex-shrink:0;text-align:center}.expand-icon.expanded{transform:rotate(90deg)}.expand-icon.placeholder{visibility:hidden}.node-icon{font-size:13px;flex-shrink:0;line-height:1}.node-name{color:#f1f1f1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.node-spinner{display:inline-block;width:10px;height:10px;border:1.5px solid #4d4d4d;border-top-color:#00dac2;border-radius:50%;animation:spin .8s linear infinite;flex-shrink:0;margin-left:4px}@keyframes spin{to{transform:rotate(360deg)}}.empty-hint{font-size:11px;color:#8d8d8d;padding:4px 8px}.child-error{font-size:11px;color:#ffb5af;padding:4px 8px}.child-error .retry-link{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.child-error .retry-link:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.child-error .retry-link:disabled{opacity:.45;cursor:not-allowed}.child-error .retry-link{height:22px;min-width:56px;padding:0 8px;margin-left:6px;font-size:10px;border-color:rgba(0,218,194,.55);color:#c5fff9;cursor:pointer}.child-error .retry-link:hover{background:#00dac2;border-color:#00dac2;color:#000}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */.model-browser[data-v-7ee23a0a]{display:flex;flex-direction:column;height:100%;max-height:60vh;color:#fff;font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif}.browser-header[data-v-7ee23a0a]{display:flex;align-items:center;justify-content:space-between;padding:8px 0 10px;margin-bottom:10px;border-bottom:1px solid rgba(255,225,0,.35)}.browser-header .browser-title[data-v-7ee23a0a]{font-size:14px;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;letter-spacing:.08em;color:#ffe100}.browser-header .browser-hint[data-v-7ee23a0a]{font-size:10px;color:#8d8d8d;letter-spacing:.08em}.search-box[data-v-7ee23a0a]{margin-bottom:10px}.search-box input[data-v-7ee23a0a]{width:100%;box-sizing:border-box;padding:8px 10px;border:1px solid #3b3b3b;border-bottom:2px solid #585858;border-radius:0;background:rgba(0,0,0,.56);color:#ffe100;font-family:\"JetBrains Mono\",\"Consolas\",\"Courier New\",monospace;font-size:13px;outline:none;transition:border-color .18s ease,background .18s ease}.search-box input[data-v-7ee23a0a]:focus{border-color:#ffe100;background:rgba(255,225,0,.08)}.search-box input[data-v-7ee23a0a]::placeholder{color:#8d8d8d}.search-box input[data-v-7ee23a0a]{color:#fff}.error-bar[data-v-7ee23a0a]{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 10px;background:rgba(255,59,48,.12);border:1px solid rgba(255,59,48,.4);margin-bottom:10px;font-size:12px;color:#ffc9c5}.error-bar .retry-btn[data-v-7ee23a0a]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.error-bar .retry-btn[data-v-7ee23a0a]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.error-bar .retry-btn[data-v-7ee23a0a]:disabled{opacity:.45;cursor:not-allowed}.error-bar .retry-btn[data-v-7ee23a0a]{min-width:72px;height:26px;padding:0 8px;font-size:11px;border-color:rgba(255,59,48,.6);color:#ffc9c5}.error-bar .retry-btn[data-v-7ee23a0a]:hover{background:#ff3b30;border-color:#ff3b30;color:#fff}.tree-container[data-v-7ee23a0a]{flex:1;overflow-y:auto;min-height:150px;padding:4px 0 6px;border:1px solid hsla(0,0%,100%,.12);background:rgba(0,0,0,.3)}.tree-container[data-v-7ee23a0a]::-webkit-scrollbar{width:7px;height:7px}.tree-container[data-v-7ee23a0a]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.tree-container[data-v-7ee23a0a]::-webkit-scrollbar-thumb{background:#555}.tree-container[data-v-7ee23a0a]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.tree-container[data-v-7ee23a0a]:empty{border-style:dashed}.loading-state[data-v-7ee23a0a]{display:flex;align-items:center;justify-content:center;padding:24px;color:#8d8d8d;font-size:13px;gap:8px}.spinner[data-v-7ee23a0a]{display:inline-block;width:14px;height:14px;border:2px solid #4d4d4d;border-top-color:#00dac2;border-radius:50%;animation:spin-7ee23a0a .8s linear infinite}@keyframes spin-7ee23a0a{to{transform:rotate(360deg)}}.empty-state[data-v-7ee23a0a]{text-align:center;padding:24px;color:#8d8d8d;font-size:13px}.browser-footer[data-v-7ee23a0a]{border-top:1px solid hsla(0,0%,100%,.16);padding-top:12px;margin-top:10px}.browser-footer .selected-info[data-v-7ee23a0a]{font-size:12px;color:#d5d5d5;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.browser-footer .selected-info .selected-path[data-v-7ee23a0a]{color:#ffe100;font-weight:600}.browser-footer .selected-info .no-selection[data-v-7ee23a0a]{color:#8d8d8d}.browser-footer .footer-actions[data-v-7ee23a0a]{display:flex;justify-content:flex-end;gap:8px}.btn[data-v-7ee23a0a]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.btn[data-v-7ee23a0a]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.btn[data-v-7ee23a0a]:disabled{opacity:.45;cursor:not-allowed}.btn[data-v-7ee23a0a]{min-width:90px;height:32px;padding:0 14px;font-size:12px}.btn[data-v-7ee23a0a]:disabled{opacity:.4;cursor:not-allowed}.btn.btn-primary[data-v-7ee23a0a]{background:#ffe100;color:#000;border-color:#ffe100}.btn.btn-primary[data-v-7ee23a0a]:hover:not(:disabled){background:#fff26e;border-color:#fff26e}.btn.btn-secondary[data-v-7ee23a0a]{background:rgba(0,218,194,.08);border-color:rgba(0,218,194,.55);color:#c5fff9}.btn.btn-secondary[data-v-7ee23a0a]:hover{background:#00dac2;border-color:#00dac2;color:#000}`, \"\",{\"version\":3,\"sources\":[\"<no source>\",\"webpack://.////ui/ModelBrowser.vue\"],\"names\":[],\"mappings\":\"AAAA,iEAAA,CCAwH,gCAAe,YAAa,CAAA,qBAAsB,CAAA,WAAY,CAAA,eAAgB,CAAA,UAAW,CAAA,gFAAiF,CAAA,iCAAgB,YAAa,CAAA,kBAAmB,CAAA,6BAA8B,CAAA,kBAAmB,CAAA,kBAAmB,CAAA,2CAA4C,CAAA,gDAA+B,cAAe,CAAA,iDAAkD,CAAA,oBAAqB,CAAA,aAAc,CAAA,+CAA8B,cAAe,CAAA,aAAc,CAAA,oBAAqB,CAAA,6BAAY,kBAAmB,CAAA,mCAAkB,UAAW,CAAA,qBAAsB,CAAA,gBAAiB,CAAA,wBAAyB,CAAA,+BAAgC,CAAA,eAAgB,CAAA,0BAA2B,CAAA,aAAc,CAAA,+DAAgE,CAAA,cAAe,CAAA,YAAa,CAAA,sDAAuD,CAAA,yCAAwB,oBAAqB,CAAA,8BAA+B,CAAA,gDAA+B,aAAc,CAAA,mCAAkB,UAAW,CAAA,4BAAW,YAAa,CAAA,kBAAmB,CAAA,6BAA8B,CAAA,OAAQ,CAAA,gBAAiB,CAAA,8BAA+B,CAAA,mCAAoC,CAAA,kBAAmB,CAAA,cAAe,CAAA,aAAc,CAAA,uCAAsB,uBAAgB,CAAhB,eAAgB,CAAA,oCAAqC,CAAA,wBAAyB,CAAA,UAAW,CAAA,iDAAkD,CAAA,eAAgB,CAAA,oBAAqB,CAAA,wBAAyB,CAAA,cAAe,CAAA,kFAAuF,CAAA,sEAAuE,CAAA,4DAA2C,kBAAmB,CAAA,UAAW,CAAA,oBAAqB,CAAA,gDAA+B,WAAY,CAAA,kBAAmB,CAAA,uCAAsB,cAAe,CAAA,WAAY,CAAA,aAAc,CAAA,cAAe,CAAA,+BAAgC,CAAA,aAAc,CAAA,6CAA4B,kBAAmB,CAAA,oBAAqB,CAAA,UAAW,CAAA,iCAAgB,MAAO,CAAA,eAAgB,CAAA,gBAAiB,CAAA,iBAAkB,CAAA,oCAAqC,CAAA,yBAA0B,CAAA,oDAAmC,SAAU,CAAA,UAAW,CAAA,0DAAyC,8BAA+B,CAAA,0DAAyC,eAAgB,CAAA,gEAA+C,kBAAmB,CAAA,uCAAsB,mBAAoB,CAAA,gCAAe,YAAa,CAAA,kBAAmB,CAAA,sBAAuB,CAAA,YAAa,CAAA,aAAc,CAAA,cAAe,CAAA,OAAQ,CAAA,0BAAS,oBAAqB,CAAA,UAAW,CAAA,WAAY,CAAA,wBAAyB,CAAA,wBAAyB,CAAA,iBAAkB,CAAA,2CAAmC,CAAA,yBAAgB,GAAG,wBAAyB,CAAC,CAAA,8BAAa,iBAAkB,CAAA,YAAa,CAAA,aAAc,CAAA,cAAe,CAAA,iCAAgB,wCAAyC,CAAA,gBAAiB,CAAA,eAAgB,CAAA,gDAA+B,cAAe,CAAA,aAAc,CAAA,iBAAkB,CAAA,eAAgB,CAAA,sBAAuB,CAAA,kBAAmB,CAAA,+DAA8C,aAAc,CAAA,eAAgB,CAAA,8DAA6C,aAAc,CAAA,iDAAgC,YAAa,CAAA,wBAAyB,CAAA,OAAQ,CAAA,sBAAK,uBAAgB,CAAhB,eAAgB,CAAA,oCAAqC,CAAA,wBAAyB,CAAA,UAAW,CAAA,iDAAkD,CAAA,eAAgB,CAAA,oBAAqB,CAAA,wBAAyB,CAAA,cAAe,CAAA,kFAAuF,CAAA,sEAAuE,CAAA,2CAA0B,kBAAmB,CAAA,UAAW,CAAA,oBAAqB,CAAA,+BAAc,WAAY,CAAA,kBAAmB,CAAA,sBAAK,cAAe,CAAA,WAAY,CAAA,cAAe,CAAA,cAAe,CAAA,+BAAc,UAAW,CAAA,kBAAmB,CAAA,kCAAiB,kBAAmB,CAAA,UAAW,CAAA,oBAAqB,CAAA,uDAAsC,kBAAmB,CAAA,oBAAqB,CAAA,oCAAmB,8BAA+B,CAAA,gCAAiC,CAAA,aAAc,CAAA,0CAAyB,kBAAmB,CAAA,oBAAqB,CAAA,UAAW\",\"sourcesContent\":[null,\"@import\\\"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap\\\";.model-browser{display:flex;flex-direction:column;height:100%;max-height:60vh;color:#fff;font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif}.browser-header{display:flex;align-items:center;justify-content:space-between;padding:8px 0 10px;margin-bottom:10px;border-bottom:1px solid rgba(255,225,0,.35)}.browser-header .browser-title{font-size:14px;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;letter-spacing:.08em;color:#ffe100}.browser-header .browser-hint{font-size:10px;color:#8d8d8d;letter-spacing:.08em}.search-box{margin-bottom:10px}.search-box input{width:100%;box-sizing:border-box;padding:8px 10px;border:1px solid #3b3b3b;border-bottom:2px solid #585858;border-radius:0;background:rgba(0,0,0,.56);color:#ffe100;font-family:\\\"JetBrains Mono\\\",\\\"Consolas\\\",\\\"Courier New\\\",monospace;font-size:13px;outline:none;transition:border-color .18s ease,background .18s ease}.search-box input:focus{border-color:#ffe100;background:rgba(255,225,0,.08)}.search-box input::placeholder{color:#8d8d8d}.search-box input{color:#fff}.error-bar{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 10px;background:rgba(255,59,48,.12);border:1px solid rgba(255,59,48,.4);margin-bottom:10px;font-size:12px;color:#ffc9c5}.error-bar .retry-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.error-bar .retry-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.error-bar .retry-btn:disabled{opacity:.45;cursor:not-allowed}.error-bar .retry-btn{min-width:72px;height:26px;padding:0 8px;font-size:11px;border-color:rgba(255,59,48,.6);color:#ffc9c5}.error-bar .retry-btn:hover{background:#ff3b30;border-color:#ff3b30;color:#fff}.tree-container{flex:1;overflow-y:auto;min-height:150px;padding:4px 0 6px;border:1px solid hsla(0,0%,100%,.12);background:rgba(0,0,0,.3)}.tree-container::-webkit-scrollbar{width:7px;height:7px}.tree-container::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.tree-container::-webkit-scrollbar-thumb{background:#555}.tree-container::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.tree-container:empty{border-style:dashed}.loading-state{display:flex;align-items:center;justify-content:center;padding:24px;color:#8d8d8d;font-size:13px;gap:8px}.spinner{display:inline-block;width:14px;height:14px;border:2px solid #4d4d4d;border-top-color:#00dac2;border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.empty-state{text-align:center;padding:24px;color:#8d8d8d;font-size:13px}.browser-footer{border-top:1px solid hsla(0,0%,100%,.16);padding-top:12px;margin-top:10px}.browser-footer .selected-info{font-size:12px;color:#d5d5d5;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.browser-footer .selected-info .selected-path{color:#ffe100;font-weight:600}.browser-footer .selected-info .no-selection{color:#8d8d8d}.browser-footer .footer-actions{display:flex;justify-content:flex-end;gap:8px}.btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.btn:disabled{opacity:.45;cursor:not-allowed}.btn{min-width:90px;height:32px;padding:0 14px;font-size:12px}.btn:disabled{opacity:.4;cursor:not-allowed}.btn.btn-primary{background:#ffe100;color:#000;border-color:#ffe100}.btn.btn-primary:hover:not(:disabled){background:#fff26e;border-color:#fff26e}.btn.btn-secondary{background:rgba(0,218,194,.08);border-color:rgba(0,218,194,.55);color:#c5fff9}.btn.btn-secondary:hover{background:#00dac2;border-color:#00dac2;color:#000}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModelBrowser.vue?vue&type=style&index=0&id=7ee23a0a&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"db518fdc\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModelBrowser.vue?vue&type=style&index=0&id=7ee23a0a&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModelBrowser.vue?vue&type=style&index=0&id=7ee23a0a&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */.menu-overlay[data-v-ff4f8948]{position:fixed;inset:0;z-index:10002;background:rgba(0,0,0,.12);display:flex;align-items:center;justify-content:center}.menu-cluster[data-v-ff4f8948]{position:fixed;display:flex;align-items:center;gap:10px;max-width:calc(100vw - 16px);pointer-events:auto}.menu-cluster.is-left[data-v-ff4f8948]{flex-direction:row-reverse}.menu-panel[data-v-ff4f8948]{width:164px;padding:8px;background:#181818;color:#fff;font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0,100% 0,100% calc(100% - 12px),calc(100% - 12px) 100%,0 100%)}.menu-panel[data-v-ff4f8948]::before{content:\"\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.menu-panel[data-v-ff4f8948]{background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);background-size:20px 20px}.panel-top[data-v-ff4f8948]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;padding:4px 4px 8px;border-bottom:1px solid rgba(255,225,0,.35)}.panel-title[data-v-ff4f8948]{font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;color:#ffe100;font-size:12px;letter-spacing:.12em}.icon-btn[data-v-ff4f8948]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.icon-btn[data-v-ff4f8948]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.icon-btn[data-v-ff4f8948]:disabled{opacity:.45;cursor:not-allowed}.icon-btn[data-v-ff4f8948]{width:28px;height:24px;padding:0;font-size:16px;line-height:1}.command-btn[data-v-ff4f8948]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.command-btn[data-v-ff4f8948]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.command-btn[data-v-ff4f8948]:disabled{opacity:.45;cursor:not-allowed}.command-btn[data-v-ff4f8948]{width:100%;min-height:52px;padding:8px 10px;margin-bottom:8px;text-align:left;display:grid;grid-template-columns:auto 1fr;grid-template-areas:\"idx main\" \"idx sub\";-moz-column-gap:8px;column-gap:8px;row-gap:2px}.command-btn[data-v-ff4f8948]:last-child{margin-bottom:0}.command-btn.active[data-v-ff4f8948]{background:#ffe100;color:#000;border-color:#ffe100}.command-btn.danger[data-v-ff4f8948]{border-color:rgba(255,59,48,.45);color:#ffc9c5}.command-btn.danger[data-v-ff4f8948]:hover{background:#ff3b30;border-color:#ff3b30;color:#fff}.command-index[data-v-ff4f8948]{grid-area:idx;align-self:center;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:16px;color:#00dac2}.command-main[data-v-ff4f8948]{grid-area:main;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:12px;line-height:1}.command-sub[data-v-ff4f8948]{grid-area:sub;font-size:10px;color:#8d8d8d;text-transform:none}.chat-drawer[data-v-ff4f8948]{width:min(320px,100vw - 36px);max-height:min(68vh,420px);padding:12px;background:#262626;color:#fff;overflow:auto;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0,100% 0,100% calc(100% - 12px),calc(100% - 12px) 100%,0 100%)}.chat-drawer[data-v-ff4f8948]::before{content:\"\";position:absolute;top:0;left:0;width:56px;height:2px;background:#00dac2;z-index:2}.chat-drawer[data-v-ff4f8948]{background-image:linear-gradient(rgba(255,255,255,0.024) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.024) 1px,transparent 1px);background-size:20px 20px}.chat-drawer[data-v-ff4f8948]::-webkit-scrollbar{width:7px;height:7px}.chat-drawer[data-v-ff4f8948]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.chat-drawer[data-v-ff4f8948]::-webkit-scrollbar-thumb{background:#555}.chat-drawer[data-v-ff4f8948]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.drawer-head[data-v-ff4f8948]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid rgba(0,218,194,.38)}.drawer-title[data-v-ff4f8948]{font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:12px;letter-spacing:.12em;color:#00dac2}.drawer-close[data-v-ff4f8948]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.drawer-close[data-v-ff4f8948]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.drawer-close[data-v-ff4f8948]:disabled{opacity:.45;cursor:not-allowed}.drawer-close[data-v-ff4f8948]{width:26px;height:24px;padding:0;font-size:16px;line-height:1}.chat-input[data-v-ff4f8948]{width:100%;box-sizing:border-box;padding:8px 10px;border:1px solid #3b3b3b;border-bottom:2px solid #585858;border-radius:0;background:rgba(0,0,0,.56);color:#ffe100;font-family:\"JetBrains Mono\",\"Consolas\",\"Courier New\",monospace;font-size:13px;outline:none;transition:border-color .18s ease,background .18s ease}.chat-input[data-v-ff4f8948]:focus{border-color:#ffe100;background:rgba(255,225,0,.08)}.chat-input[data-v-ff4f8948]::placeholder{color:#8d8d8d}.chat-input[data-v-ff4f8948]{min-height:96px;resize:vertical;color:#fff}.drawer-actions[data-v-ff4f8948]{display:flex;justify-content:flex-end;margin-top:10px}.send-btn[data-v-ff4f8948]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.send-btn[data-v-ff4f8948]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.send-btn[data-v-ff4f8948]:disabled{opacity:.45;cursor:not-allowed}.send-btn[data-v-ff4f8948]{min-width:96px;height:34px}.drawer-hint[data-v-ff4f8948]{margin-top:8px;font-size:11px;color:#8d8d8d}.drawer-enter-active[data-v-ff4f8948],.drawer-leave-active[data-v-ff4f8948]{transition:opacity .16s ease,transform .16s ease}.drawer-enter-from[data-v-ff4f8948],.drawer-leave-to[data-v-ff4f8948]{opacity:0;transform:translateX(-8px)}.menu-cluster.is-left .drawer-enter-from[data-v-ff4f8948],.menu-cluster.is-left .drawer-leave-to[data-v-ff4f8948]{transform:translateX(8px)}`, \"\",{\"version\":3,\"sources\":[\"<no source>\",\"webpack://.////ui/FunctionMenu.vue\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[null,\"@import\\\"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap\\\";.menu-overlay{position:fixed;inset:0;z-index:10002;background:rgba(0,0,0,.12);display:flex;align-items:center;justify-content:center}.menu-cluster{position:fixed;display:flex;align-items:center;gap:10px;max-width:calc(100vw - 16px);pointer-events:auto}.menu-cluster.is-left{flex-direction:row-reverse}.menu-panel{width:164px;padding:8px;background:#181818;color:#fff;font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%)}.menu-panel::before{content:\\\"\\\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.menu-panel{background-image:linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);background-size:20px 20px}.panel-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;padding:4px 4px 8px;border-bottom:1px solid rgba(255,225,0,.35)}.panel-title{font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;color:#ffe100;font-size:12px;letter-spacing:.12em}.icon-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.icon-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.icon-btn:disabled{opacity:.45;cursor:not-allowed}.icon-btn{width:28px;height:24px;padding:0;font-size:16px;line-height:1}.command-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.command-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.command-btn:disabled{opacity:.45;cursor:not-allowed}.command-btn{width:100%;min-height:52px;padding:8px 10px;margin-bottom:8px;text-align:left;display:grid;grid-template-columns:auto 1fr;grid-template-areas:\\\"idx main\\\" \\\"idx sub\\\";column-gap:8px;row-gap:2px}.command-btn:last-child{margin-bottom:0}.command-btn.active{background:#ffe100;color:#000;border-color:#ffe100}.command-btn.danger{border-color:rgba(255,59,48,.45);color:#ffc9c5}.command-btn.danger:hover{background:#ff3b30;border-color:#ff3b30;color:#fff}.command-index{grid-area:idx;align-self:center;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:16px;color:#00dac2}.command-main{grid-area:main;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:12px;line-height:1}.command-sub{grid-area:sub;font-size:10px;color:#8d8d8d;text-transform:none}.chat-drawer{width:min(320px,100vw - 36px);max-height:min(68vh,420px);padding:12px;background:#262626;color:#fff;overflow:auto;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%)}.chat-drawer::before{content:\\\"\\\";position:absolute;top:0;left:0;width:56px;height:2px;background:#00dac2;z-index:2}.chat-drawer{background-image:linear-gradient(rgba(255, 255, 255, 0.024) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.024) 1px, transparent 1px);background-size:20px 20px}.chat-drawer::-webkit-scrollbar{width:7px;height:7px}.chat-drawer::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.chat-drawer::-webkit-scrollbar-thumb{background:#555}.chat-drawer::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.drawer-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid rgba(0,218,194,.38)}.drawer-title{font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:12px;letter-spacing:.12em;color:#00dac2}.drawer-close{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.drawer-close:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.drawer-close:disabled{opacity:.45;cursor:not-allowed}.drawer-close{width:26px;height:24px;padding:0;font-size:16px;line-height:1}.chat-input{width:100%;box-sizing:border-box;padding:8px 10px;border:1px solid #3b3b3b;border-bottom:2px solid #585858;border-radius:0;background:rgba(0,0,0,.56);color:#ffe100;font-family:\\\"JetBrains Mono\\\",\\\"Consolas\\\",\\\"Courier New\\\",monospace;font-size:13px;outline:none;transition:border-color .18s ease,background .18s ease}.chat-input:focus{border-color:#ffe100;background:rgba(255,225,0,.08)}.chat-input::placeholder{color:#8d8d8d}.chat-input{min-height:96px;resize:vertical;color:#fff}.drawer-actions{display:flex;justify-content:flex-end;margin-top:10px}.send-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.send-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.send-btn:disabled{opacity:.45;cursor:not-allowed}.send-btn{min-width:96px;height:34px}.drawer-hint{margin-top:8px;font-size:11px;color:#8d8d8d}.drawer-enter-active,.drawer-leave-active{transition:opacity .16s ease,transform .16s ease}.drawer-enter-from,.drawer-leave-to{opacity:0;transform:translateX(-8px)}.menu-cluster.is-left .drawer-enter-from,.menu-cluster.is-left .drawer-leave-to{transform:translateX(8px)}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=2d2cd0e0&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"65e805d0\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=2d2cd0e0&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=2d2cd0e0&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */.settings-overlay[data-v-2d2cd0e0]{position:fixed;inset:0;z-index:10001;background:rgba(0,0,0,.82);display:flex;align-items:center;justify-content:center;padding:12px;box-sizing:border-box;overflow:auto}.settings-panel[data-v-2d2cd0e0]{width:min(1080px,100vw - 24px);max-height:calc(100dvh - 24px);display:flex;flex-direction:column;overflow:hidden;color:#fff;background:#181818;font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0,100% 0,100% calc(100% - 12px),calc(100% - 12px) 100%,0 100%)}.settings-panel[data-v-2d2cd0e0]::before{content:\"\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.settings-panel[data-v-2d2cd0e0]{background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);background-size:22px 22px}.panel-header[data-v-2d2cd0e0]{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 18px;border-bottom:2px solid #ffe100;background:rgba(0,0,0,.32)}.header-title[data-v-2d2cd0e0]{min-width:0}.header-title h3[data-v-2d2cd0e0]{margin:0;font-size:20px;line-height:1;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase}.header-title p[data-v-2d2cd0e0]{margin:4px 0 0;font-size:10px;color:#8d8d8d;letter-spacing:.14em;text-transform:uppercase}.close-btn[data-v-2d2cd0e0]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.close-btn[data-v-2d2cd0e0]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.close-btn[data-v-2d2cd0e0]:disabled{opacity:.45;cursor:not-allowed}.close-btn[data-v-2d2cd0e0]{min-width:88px;height:32px;padding:0 10px;font-size:12px}.panel-main[data-v-2d2cd0e0]{flex:1;min-height:0;display:grid;grid-template-columns:220px 1fr}.panel-nav[data-v-2d2cd0e0]{border-right:1px solid hsla(0,0%,100%,.16);padding:12px;overflow:auto}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar{width:7px;height:7px}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar-thumb{background:#555}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.nav-btn[data-v-2d2cd0e0]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.nav-btn[data-v-2d2cd0e0]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.nav-btn[data-v-2d2cd0e0]:disabled{opacity:.45;cursor:not-allowed}.nav-btn[data-v-2d2cd0e0]{width:100%;min-height:62px;padding:10px 12px;margin-bottom:10px;text-align:left;display:grid;grid-template-columns:auto 1fr;grid-template-areas:\"idx label\" \"idx sub\";-moz-column-gap:8px;column-gap:8px;row-gap:2px}.nav-btn[data-v-2d2cd0e0]:last-child{margin-bottom:0}.nav-btn.active[data-v-2d2cd0e0]{background:#ffe100;color:#000;border-color:#ffe100}.nav-index[data-v-2d2cd0e0]{grid-area:idx;align-self:center;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;color:#00dac2;font-size:18px}.nav-label[data-v-2d2cd0e0]{grid-area:label;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:13px;letter-spacing:.05em}.nav-sub[data-v-2d2cd0e0]{grid-area:sub;font-size:10px;color:#8d8d8d;letter-spacing:.06em}.panel-body[data-v-2d2cd0e0]{padding:14px 18px 16px;overflow:auto}.panel-body[data-v-2d2cd0e0]::-webkit-scrollbar{width:7px;height:7px}.panel-body[data-v-2d2cd0e0]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.panel-body[data-v-2d2cd0e0]::-webkit-scrollbar-thumb{background:#555}.panel-body[data-v-2d2cd0e0]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.setting-section[data-v-2d2cd0e0]{max-width:740px}.setting-section h4[data-v-2d2cd0e0]{margin:0 0 12px;display:inline-flex;align-items:center;gap:8px;padding:4px 12px;background:#0f0f0f;border-left:4px solid #ffe100;transform:skewX(-14deg)}.setting-section h4[data-v-2d2cd0e0]>*{transform:skewX(14deg)}.section-index[data-v-2d2cd0e0]{color:#00dac2;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:13px}.section-label[data-v-2d2cd0e0]{font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:14px;letter-spacing:.04em}.section-sub[data-v-2d2cd0e0]{font-size:10px;color:#8d8d8d;letter-spacing:.06em}.form-group[data-v-2d2cd0e0]{margin-bottom:12px}.form-group>label[data-v-2d2cd0e0]{display:block;margin-bottom:5px;font-size:12px;color:#d5d5d5;line-height:1.35}.form-group>label>input[type=checkbox][data-v-2d2cd0e0]{margin-right:8px;accent-color:#00dac2}.form-group input[type=text][data-v-2d2cd0e0],.form-group input[type=password][data-v-2d2cd0e0],.form-group input[type=number][data-v-2d2cd0e0],.form-group select[data-v-2d2cd0e0],.form-group textarea[data-v-2d2cd0e0]{width:100%;box-sizing:border-box;padding:8px 10px;border:1px solid #3b3b3b;border-bottom:2px solid #585858;border-radius:0;background:rgba(0,0,0,.56);color:#ffe100;font-family:\"JetBrains Mono\",\"Consolas\",\"Courier New\",monospace;font-size:13px;outline:none;transition:border-color .18s ease,background .18s ease}.form-group input[type=text][data-v-2d2cd0e0]:focus,.form-group input[type=password][data-v-2d2cd0e0]:focus,.form-group input[type=number][data-v-2d2cd0e0]:focus,.form-group select[data-v-2d2cd0e0]:focus,.form-group textarea[data-v-2d2cd0e0]:focus{border-color:#ffe100;background:rgba(255,225,0,.08)}.form-group input[type=text][data-v-2d2cd0e0]::placeholder,.form-group input[type=password][data-v-2d2cd0e0]::placeholder,.form-group input[type=number][data-v-2d2cd0e0]::placeholder,.form-group select[data-v-2d2cd0e0]::placeholder,.form-group textarea[data-v-2d2cd0e0]::placeholder{color:#8d8d8d}.form-group textarea[data-v-2d2cd0e0]{resize:vertical;min-height:86px;font-family:\"JetBrains Mono\",\"Consolas\",\"Courier New\",monospace;color:#fff}.form-group select[data-v-2d2cd0e0]{color:#fff;font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif}.form-group select option[data-v-2d2cd0e0]{background:#101010;color:#fff}.form-group input[type=range][data-v-2d2cd0e0]{width:100%;-webkit-appearance:none;appearance:none;height:4px;border:none;background:#4a4a4a;border-radius:0;padding:0;margin:7px 0 4px}.form-group input[type=range][data-v-2d2cd0e0]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffe100;border:2px solid #000;transform:rotate(45deg)}.form-group input[type=range][data-v-2d2cd0e0]::-moz-range-thumb{width:12px;height:12px;border:2px solid #000;border-radius:0;background:#ffe100;transform:rotate(45deg)}.form-group input[type=range][data-v-2d2cd0e0]::-moz-range-track{height:4px;background:#4a4a4a;border:none}.form-group input[type=checkbox][data-v-2d2cd0e0]{accent-color:#00dac2}.form-group .hint[data-v-2d2cd0e0]{margin-top:4px;font-size:11px;color:#8d8d8d}.hint-error[data-v-2d2cd0e0]{color:#ff3b30 !important}.form-row[data-v-2d2cd0e0]{display:flex;gap:12px;align-items:flex-start}.form-row .half[data-v-2d2cd0e0]{flex:1;min-width:0}.input-with-btn[data-v-2d2cd0e0]{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:stretch}.input-with-btn .input-btn[data-v-2d2cd0e0]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.input-with-btn .input-btn[data-v-2d2cd0e0]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.input-with-btn .input-btn[data-v-2d2cd0e0]:disabled{opacity:.45;cursor:not-allowed}.input-with-btn .input-btn[data-v-2d2cd0e0]{min-width:84px;padding:0 12px;font-size:11px;white-space:nowrap}.model-list[data-v-2d2cd0e0]{display:flex;flex-wrap:wrap;gap:8px}.model-btn[data-v-2d2cd0e0]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.model-btn[data-v-2d2cd0e0]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.model-btn[data-v-2d2cd0e0]:disabled{opacity:.45;cursor:not-allowed}.model-btn[data-v-2d2cd0e0]{min-height:30px;padding:0 12px;font-size:12px;text-transform:none;letter-spacing:.03em}.model-btn.active[data-v-2d2cd0e0]{background:#ffe100;border-color:#ffe100;color:#000}.model-btn.browse-btn[data-v-2d2cd0e0]{border-color:rgba(0,218,194,.55);color:#b2fff6}.model-btn.browse-btn[data-v-2d2cd0e0]:hover{background:#00dac2;border-color:#00dac2;color:#000}.emotion-layout[data-v-2d2cd0e0]{display:grid;grid-template-columns:minmax(0,1fr) 340px;gap:14px;align-items:start}.emotion-configs[data-v-2d2cd0e0]{min-width:0}.emotion-preview-panel[data-v-2d2cd0e0]{position:sticky;top:10px;border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.28);padding:10px 12px 12px;background-image:linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px);background-size:18px 18px}.emotion-preview-header[data-v-2d2cd0e0]{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}.emotion-preview-title[data-v-2d2cd0e0]{font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:700;letter-spacing:.08em;color:#00dac2}.emotion-preview-tag[data-v-2d2cd0e0]{font-size:12px;color:hsla(0,0%,100%,.78)}.emotion-preview-canvas[data-v-2d2cd0e0]{position:relative;width:100%;aspect-ratio:3/4;border-radius:10px;overflow:hidden;background:rgba(15,23,42,.95);border:1px solid hsla(0,0%,100%,.18)}.emotion-preview-interact[data-v-2d2cd0e0]{position:absolute;inset:0;z-index:3}.emotion-preview-empty[data-v-2d2cd0e0]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:10px;text-align:center;z-index:4;pointer-events:none;color:hsla(0,0%,100%,.78);font-size:12px}.emotion-preview-controls[data-v-2d2cd0e0]{margin-top:10px;display:flex;flex-direction:column;gap:8px}.emotion-zoom-row[data-v-2d2cd0e0]{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center}.zoom-label[data-v-2d2cd0e0]{font-size:12px;color:hsla(0,0%,100%,.78)}.zoom-value[data-v-2d2cd0e0]{font-size:12px;color:#ffe100;font-variant-numeric:tabular-nums}.emotion-preview-actions[data-v-2d2cd0e0]{display:flex;gap:8px}.emotion-tag[data-v-2d2cd0e0]{font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:700;letter-spacing:.08em;color:#ffe100;text-transform:uppercase}.emotion-map-table[data-v-2d2cd0e0]{margin-top:4px;border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.22);max-height:none;overflow:visible;background-image:linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px);background-size:20px 20px}.emotion-map-head[data-v-2d2cd0e0],.emotion-map-row[data-v-2d2cd0e0]{display:grid;grid-template-columns:72px 22px minmax(0,1fr) minmax(0,1fr) 52px;gap:10px;align-items:center}.emotion-map-head[data-v-2d2cd0e0]{position:sticky;top:0;z-index:2;padding:8px 10px;font-size:10px;color:hsla(0,0%,100%,.68);letter-spacing:.03em;background:rgba(2,8,20,.92);border-bottom:1px solid hsla(0,0%,100%,.2)}.emotion-map-row[data-v-2d2cd0e0]{padding:10px;border-bottom:1px solid hsla(0,0%,100%,.12)}.emotion-map-row[data-v-2d2cd0e0]:nth-child(odd){background:hsla(0,0%,100%,.02)}.emotion-map-tag[data-v-2d2cd0e0]{font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:700;letter-spacing:.08em;color:#ffe100}.emotion-map-arrow[data-v-2d2cd0e0]{text-align:center;color:hsla(0,0%,100%,.78);font-size:18px;line-height:1}.emotion-map-preview-btn[data-v-2d2cd0e0]{min-width:0;width:44px;height:32px;padding:0;font-size:14px;line-height:1}.emotion-map-row select[data-v-2d2cd0e0]{width:100%;min-width:0;text-overflow:ellipsis;white-space:nowrap}.emotion-advanced-list[data-v-2d2cd0e0]{margin-top:10px;display:flex;flex-direction:column;gap:10px}.emotion-advanced-item[data-v-2d2cd0e0]{border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.28);padding:10px 12px 2px;background-image:linear-gradient(rgba(255,255,255,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.025) 1px,transparent 1px);background-size:18px 18px}.emotion-advanced-title[data-v-2d2cd0e0]{margin-bottom:8px;font-size:12px;letter-spacing:.06em;color:hsla(0,0%,100%,.85)}.advanced-toggle[data-v-2d2cd0e0]{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid hsla(0,0%,100%,.2);background:hsla(0,0%,100%,.04);font-size:11px;color:#d5d5d5;cursor:pointer;-webkit-user-select:none;user-select:none;clip-path:polygon(0 0,100% 0,100% calc(100% - 8px),calc(100% - 8px) 100%,0 100%)}.advanced-toggle[data-v-2d2cd0e0]:hover{border-color:rgba(255,225,0,.65);color:#ffe100}.advanced-toggle .toggle-icon[data-v-2d2cd0e0]{width:12px;text-align:center;color:#00dac2}.advanced-params[data-v-2d2cd0e0]{margin-top:8px;padding-top:10px;border-top:1px dashed hsla(0,0%,100%,.2)}.about-card[data-v-2d2cd0e0]{margin-bottom:12px;padding:10px 12px;border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.26);background-image:linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px);background-size:18px 18px}.about-title[data-v-2d2cd0e0]{margin-bottom:8px;font-size:12px;letter-spacing:.06em;color:#ffe100}.about-link[data-v-2d2cd0e0]{color:#00dac2;word-break:break-all;text-decoration:underline}.about-list[data-v-2d2cd0e0]{margin:0;padding-left:18px;display:flex;flex-direction:column;gap:8px;font-size:12px;line-height:1.5;color:#d5d5d5}.status-badge[data-v-2d2cd0e0]{margin-left:8px;font-size:12px}.status-success[data-v-2d2cd0e0]{color:#00dac2}.status-fail[data-v-2d2cd0e0]{color:#ff9c94}.panel-footer[data-v-2d2cd0e0]{display:flex;justify-content:flex-end;gap:10px;padding:12px 18px 14px;border-top:1px solid hsla(0,0%,100%,.18);background:rgba(0,0,0,.36)}.btn[data-v-2d2cd0e0]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.btn[data-v-2d2cd0e0]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.btn[data-v-2d2cd0e0]:disabled{opacity:.45;cursor:not-allowed}.btn[data-v-2d2cd0e0]{min-width:100px;height:34px;padding:0 14px;font-size:12px}.btn-primary[data-v-2d2cd0e0]{background:#ffe100;color:#000;border-color:#ffe100}.btn-secondary[data-v-2d2cd0e0]{background:hsla(0,0%,100%,.06);border-color:hsla(0,0%,100%,.3)}.btn-test[data-v-2d2cd0e0]{min-width:96px;background:rgba(0,218,194,.1);border-color:rgba(0,218,194,.6);color:#bcfff7}.btn-test[data-v-2d2cd0e0]:hover:not(:disabled){background:#00dac2;border-color:#00dac2;color:#000}.browser-overlay[data-v-2d2cd0e0]{position:fixed;inset:0;z-index:10002;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;padding:12px;box-sizing:border-box;overflow:auto}.browser-dialog[data-v-2d2cd0e0]{width:min(980px,100vw - 24px);max-height:calc(100dvh - 24px);display:flex;flex-direction:column;overflow:hidden;color:#fff;background:#181818;font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0,100% 0,100% calc(100% - 12px),calc(100% - 12px) 100%,0 100%)}.browser-dialog[data-v-2d2cd0e0]::before{content:\"\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.browser-dialog[data-v-2d2cd0e0]{background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);background-size:22px 22px}.browser-dialog-header[data-v-2d2cd0e0]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid rgba(255,225,0,.36);background:rgba(0,0,0,.28)}.browser-dialog-header h3[data-v-2d2cd0e0]{margin:0;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:15px;letter-spacing:.08em}.browser-dialog-header .close-btn[data-v-2d2cd0e0]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.browser-dialog-header .close-btn[data-v-2d2cd0e0]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.browser-dialog-header .close-btn[data-v-2d2cd0e0]:disabled{opacity:.45;cursor:not-allowed}.browser-dialog-header .close-btn[data-v-2d2cd0e0]{width:34px;height:28px;padding:0;line-height:1;font-size:16px}.browser-dialog-body[data-v-2d2cd0e0]{padding:14px 18px 16px;overflow:auto;flex:1}.browser-dialog-body[data-v-2d2cd0e0]::-webkit-scrollbar{width:7px;height:7px}.browser-dialog-body[data-v-2d2cd0e0]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.browser-dialog-body[data-v-2d2cd0e0]::-webkit-scrollbar-thumb{background:#555}.browser-dialog-body[data-v-2d2cd0e0]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}@media (max-width:860px){.settings-overlay[data-v-2d2cd0e0]{align-items:flex-start;padding:calc(env(safe-area-inset-top) + 6px) 6px calc(env(safe-area-inset-bottom) + 6px)}.settings-panel[data-v-2d2cd0e0]{width:100%;max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);clip-path:none;box-shadow:0 0 0 1px hsla(0,0%,100%,.15)}.settings-panel[data-v-2d2cd0e0]::before{width:40px}.panel-main[data-v-2d2cd0e0]{grid-template-columns:1fr;grid-template-rows:auto 1fr;min-height:0}.panel-nav[data-v-2d2cd0e0]{border-right:none;border-bottom:1px solid hsla(0,0%,100%,.16);display:flex;gap:6px;padding:8px 10px;overflow-x:auto;overflow-y:hidden}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar{width:7px;height:7px}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar-thumb{background:#555}.panel-nav[data-v-2d2cd0e0]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.nav-btn[data-v-2d2cd0e0]{flex:0 0 auto;width:150px;min-height:42px;padding:6px 10px;margin-bottom:0;grid-template-areas:\"idx label\";grid-template-columns:auto 1fr;row-gap:0;align-items:center}.panel-body[data-v-2d2cd0e0]{min-height:0}.nav-index[data-v-2d2cd0e0]{font-size:16px}.nav-label[data-v-2d2cd0e0]{font-size:12px}.nav-sub[data-v-2d2cd0e0]{display:none}.browser-overlay[data-v-2d2cd0e0]{align-items:flex-start;padding:calc(env(safe-area-inset-top) + 6px) 6px calc(env(safe-area-inset-bottom) + 6px)}.browser-dialog[data-v-2d2cd0e0]{width:100%;max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);clip-path:none;box-shadow:0 0 0 1px hsla(0,0%,100%,.15)}.emotion-layout[data-v-2d2cd0e0]{grid-template-columns:1fr}.emotion-preview-panel[data-v-2d2cd0e0]{order:-1;position:sticky;top:8px;z-index:8;margin-bottom:8px;padding:8px 10px 10px;background:rgba(0,0,0,.9)}.emotion-preview-header[data-v-2d2cd0e0]{margin-bottom:6px}.emotion-preview-canvas[data-v-2d2cd0e0]{aspect-ratio:16/9;max-height:210px}.emotion-preview-controls[data-v-2d2cd0e0]{margin-top:8px;gap:6px}.emotion-map-head[data-v-2d2cd0e0]{position:static}.emotion-preview-controls .hint[data-v-2d2cd0e0]{display:none}}@media (max-width:620px){.settings-overlay[data-v-2d2cd0e0]{align-items:stretch;padding:0}.settings-panel[data-v-2d2cd0e0]{width:100vw;max-height:100dvh;border-left:none;border-right:none;box-shadow:none}.panel-header[data-v-2d2cd0e0]{padding:10px 12px}.header-title h3[data-v-2d2cd0e0]{font-size:15px;letter-spacing:.06em}.header-title p[data-v-2d2cd0e0]{display:none}.panel-nav[data-v-2d2cd0e0]{padding:6px 8px}.nav-btn[data-v-2d2cd0e0]{width:126px;min-height:38px;padding:5px 8px}.nav-index[data-v-2d2cd0e0]{font-size:14px}.nav-label[data-v-2d2cd0e0]{font-size:11px;letter-spacing:.04em}.close-btn[data-v-2d2cd0e0]{min-width:66px;height:28px;padding:0 8px;font-size:11px}.panel-footer[data-v-2d2cd0e0]{padding:10px 12px calc(10px + env(safe-area-inset-bottom))}.panel-body[data-v-2d2cd0e0]{padding:8px 10px}.form-row[data-v-2d2cd0e0]{flex-direction:column;gap:0}.input-with-btn[data-v-2d2cd0e0]{grid-template-columns:1fr}.btn[data-v-2d2cd0e0]{min-width:86px}.emotion-preview-panel[data-v-2d2cd0e0]{top:6px;padding:8px}.emotion-preview-canvas[data-v-2d2cd0e0]{max-height:180px}.emotion-map-head[data-v-2d2cd0e0],.emotion-map-row[data-v-2d2cd0e0]{grid-template-columns:56px 16px minmax(0,1fr) minmax(0,1fr) 42px;gap:6px}.emotion-map-row[data-v-2d2cd0e0]{padding:8px}.emotion-map-arrow[data-v-2d2cd0e0]{font-size:14px}.emotion-map-preview-btn[data-v-2d2cd0e0]{width:38px;height:30px;font-size:12px}.browser-overlay[data-v-2d2cd0e0]{align-items:stretch;padding:0}.browser-dialog[data-v-2d2cd0e0]{width:100vw;max-height:100dvh;box-shadow:none;clip-path:none}.browser-dialog-header[data-v-2d2cd0e0]{padding:12px}.browser-dialog-body[data-v-2d2cd0e0]{padding:10px 12px 12px}}`, \"\",{\"version\":3,\"sources\":[\"<no source>\",\"webpack://.////ui/SettingsPanel.vue\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[null,\"@import\\\"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap\\\";.settings-overlay{position:fixed;inset:0;z-index:10001;background:rgba(0,0,0,.82);display:flex;align-items:center;justify-content:center;padding:12px;box-sizing:border-box;overflow:auto}.settings-panel{width:min(1080px,100vw - 24px);max-height:calc(100dvh - 24px);display:flex;flex-direction:column;overflow:hidden;color:#fff;background:#181818;font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%)}.settings-panel::before{content:\\\"\\\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.settings-panel{background-image:linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);background-size:22px 22px}.panel-header{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 18px;border-bottom:2px solid #ffe100;background:rgba(0,0,0,.32)}.header-title{min-width:0}.header-title h3{margin:0;font-size:20px;line-height:1;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase}.header-title p{margin:4px 0 0;font-size:10px;color:#8d8d8d;letter-spacing:.14em;text-transform:uppercase}.close-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.close-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.close-btn:disabled{opacity:.45;cursor:not-allowed}.close-btn{min-width:88px;height:32px;padding:0 10px;font-size:12px}.panel-main{flex:1;min-height:0;display:grid;grid-template-columns:220px 1fr}.panel-nav{border-right:1px solid hsla(0,0%,100%,.16);padding:12px;overflow:auto}.panel-nav::-webkit-scrollbar{width:7px;height:7px}.panel-nav::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.panel-nav::-webkit-scrollbar-thumb{background:#555}.panel-nav::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.nav-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.nav-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.nav-btn:disabled{opacity:.45;cursor:not-allowed}.nav-btn{width:100%;min-height:62px;padding:10px 12px;margin-bottom:10px;text-align:left;display:grid;grid-template-columns:auto 1fr;grid-template-areas:\\\"idx label\\\" \\\"idx sub\\\";column-gap:8px;row-gap:2px}.nav-btn:last-child{margin-bottom:0}.nav-btn.active{background:#ffe100;color:#000;border-color:#ffe100}.nav-index{grid-area:idx;align-self:center;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;color:#00dac2;font-size:18px}.nav-label{grid-area:label;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:13px;letter-spacing:.05em}.nav-sub{grid-area:sub;font-size:10px;color:#8d8d8d;letter-spacing:.06em}.panel-body{padding:14px 18px 16px;overflow:auto}.panel-body::-webkit-scrollbar{width:7px;height:7px}.panel-body::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.panel-body::-webkit-scrollbar-thumb{background:#555}.panel-body::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.setting-section{max-width:740px}.setting-section h4{margin:0 0 12px;display:inline-flex;align-items:center;gap:8px;padding:4px 12px;background:#0f0f0f;border-left:4px solid #ffe100;transform:skewX(-14deg)}.setting-section h4>*{transform:skewX(14deg)}.section-index{color:#00dac2;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:13px}.section-label{font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:14px;letter-spacing:.04em}.section-sub{font-size:10px;color:#8d8d8d;letter-spacing:.06em}.form-group{margin-bottom:12px}.form-group>label{display:block;margin-bottom:5px;font-size:12px;color:#d5d5d5;line-height:1.35}.form-group>label>input[type=checkbox]{margin-right:8px;accent-color:#00dac2}.form-group input[type=text],.form-group input[type=password],.form-group input[type=number],.form-group select,.form-group textarea{width:100%;box-sizing:border-box;padding:8px 10px;border:1px solid #3b3b3b;border-bottom:2px solid #585858;border-radius:0;background:rgba(0,0,0,.56);color:#ffe100;font-family:\\\"JetBrains Mono\\\",\\\"Consolas\\\",\\\"Courier New\\\",monospace;font-size:13px;outline:none;transition:border-color .18s ease,background .18s ease}.form-group input[type=text]:focus,.form-group input[type=password]:focus,.form-group input[type=number]:focus,.form-group select:focus,.form-group textarea:focus{border-color:#ffe100;background:rgba(255,225,0,.08)}.form-group input[type=text]::placeholder,.form-group input[type=password]::placeholder,.form-group input[type=number]::placeholder,.form-group select::placeholder,.form-group textarea::placeholder{color:#8d8d8d}.form-group textarea{resize:vertical;min-height:86px;font-family:\\\"JetBrains Mono\\\",\\\"Consolas\\\",\\\"Courier New\\\",monospace;color:#fff}.form-group select{color:#fff;font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif}.form-group select option{background:#101010;color:#fff}.form-group input[type=range]{width:100%;appearance:none;height:4px;border:none;background:#4a4a4a;border-radius:0;padding:0;margin:7px 0 4px}.form-group input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffe100;border:2px solid #000;transform:rotate(45deg)}.form-group input[type=range]::-moz-range-thumb{width:12px;height:12px;border:2px solid #000;border-radius:0;background:#ffe100;transform:rotate(45deg)}.form-group input[type=range]::-moz-range-track{height:4px;background:#4a4a4a;border:none}.form-group input[type=checkbox]{accent-color:#00dac2}.form-group .hint{margin-top:4px;font-size:11px;color:#8d8d8d}.hint-error{color:#ff3b30 !important}.form-row{display:flex;gap:12px;align-items:flex-start}.form-row .half{flex:1;min-width:0}.input-with-btn{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:stretch}.input-with-btn .input-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.input-with-btn .input-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.input-with-btn .input-btn:disabled{opacity:.45;cursor:not-allowed}.input-with-btn .input-btn{min-width:84px;padding:0 12px;font-size:11px;white-space:nowrap}.model-list{display:flex;flex-wrap:wrap;gap:8px}.model-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.model-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.model-btn:disabled{opacity:.45;cursor:not-allowed}.model-btn{min-height:30px;padding:0 12px;font-size:12px;text-transform:none;letter-spacing:.03em}.model-btn.active{background:#ffe100;border-color:#ffe100;color:#000}.model-btn.browse-btn{border-color:rgba(0,218,194,.55);color:#b2fff6}.model-btn.browse-btn:hover{background:#00dac2;border-color:#00dac2;color:#000}.emotion-layout{display:grid;grid-template-columns:minmax(0, 1fr) 340px;gap:14px;align-items:start}.emotion-configs{min-width:0}.emotion-preview-panel{position:sticky;top:10px;border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.28);padding:10px 12px 12px;background-image:linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);background-size:18px 18px}.emotion-preview-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}.emotion-preview-title{font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:700;letter-spacing:.08em;color:#00dac2}.emotion-preview-tag{font-size:12px;color:hsla(0,0%,100%,.78)}.emotion-preview-canvas{position:relative;width:100%;aspect-ratio:3/4;border-radius:10px;overflow:hidden;background:rgba(15,23,42,.95);border:1px solid hsla(0,0%,100%,.18)}.emotion-preview-interact{position:absolute;inset:0;z-index:3}.emotion-preview-empty{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:10px;text-align:center;z-index:4;pointer-events:none;color:hsla(0,0%,100%,.78);font-size:12px}.emotion-preview-controls{margin-top:10px;display:flex;flex-direction:column;gap:8px}.emotion-zoom-row{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center}.zoom-label{font-size:12px;color:hsla(0,0%,100%,.78)}.zoom-value{font-size:12px;color:#ffe100;font-variant-numeric:tabular-nums}.emotion-preview-actions{display:flex;gap:8px}.emotion-tag{font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:700;letter-spacing:.08em;color:#ffe100;text-transform:uppercase}.emotion-map-table{margin-top:4px;border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.22);max-height:none;overflow:visible;background-image:linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);background-size:20px 20px}.emotion-map-head,.emotion-map-row{display:grid;grid-template-columns:72px 22px minmax(0, 1fr) minmax(0, 1fr) 52px;gap:10px;align-items:center}.emotion-map-head{position:sticky;top:0;z-index:2;padding:8px 10px;font-size:10px;color:hsla(0,0%,100%,.68);letter-spacing:.03em;background:rgba(2,8,20,.92);border-bottom:1px solid hsla(0,0%,100%,.2)}.emotion-map-row{padding:10px;border-bottom:1px solid hsla(0,0%,100%,.12)}.emotion-map-row:nth-child(odd){background:hsla(0,0%,100%,.02)}.emotion-map-tag{font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:700;letter-spacing:.08em;color:#ffe100}.emotion-map-arrow{text-align:center;color:hsla(0,0%,100%,.78);font-size:18px;line-height:1}.emotion-map-preview-btn{min-width:0;width:44px;height:32px;padding:0;font-size:14px;line-height:1}.emotion-map-row select{width:100%;min-width:0;text-overflow:ellipsis;white-space:nowrap}.emotion-advanced-list{margin-top:10px;display:flex;flex-direction:column;gap:10px}.emotion-advanced-item{border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.28);padding:10px 12px 2px;background-image:linear-gradient(rgba(255, 255, 255, 0.025) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.025) 1px, transparent 1px);background-size:18px 18px}.emotion-advanced-title{margin-bottom:8px;font-size:12px;letter-spacing:.06em;color:hsla(0,0%,100%,.85)}.advanced-toggle{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid hsla(0,0%,100%,.2);background:hsla(0,0%,100%,.04);font-size:11px;color:#d5d5d5;cursor:pointer;user-select:none;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)}.advanced-toggle:hover{border-color:rgba(255,225,0,.65);color:#ffe100}.advanced-toggle .toggle-icon{width:12px;text-align:center;color:#00dac2}.advanced-params{margin-top:8px;padding-top:10px;border-top:1px dashed hsla(0,0%,100%,.2)}.about-card{margin-bottom:12px;padding:10px 12px;border:1px solid hsla(0,0%,100%,.16);background:rgba(0,0,0,.26);background-image:linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);background-size:18px 18px}.about-title{margin-bottom:8px;font-size:12px;letter-spacing:.06em;color:#ffe100}.about-link{color:#00dac2;word-break:break-all;text-decoration:underline}.about-list{margin:0;padding-left:18px;display:flex;flex-direction:column;gap:8px;font-size:12px;line-height:1.5;color:#d5d5d5}.status-badge{margin-left:8px;font-size:12px}.status-success{color:#00dac2}.status-fail{color:#ff9c94}.panel-footer{display:flex;justify-content:flex-end;gap:10px;padding:12px 18px 14px;border-top:1px solid hsla(0,0%,100%,.18);background:rgba(0,0,0,.36)}.btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.btn:disabled{opacity:.45;cursor:not-allowed}.btn{min-width:100px;height:34px;padding:0 14px;font-size:12px}.btn-primary{background:#ffe100;color:#000;border-color:#ffe100}.btn-secondary{background:hsla(0,0%,100%,.06);border-color:hsla(0,0%,100%,.3)}.btn-test{min-width:96px;background:rgba(0,218,194,.1);border-color:rgba(0,218,194,.6);color:#bcfff7}.btn-test:hover:not(:disabled){background:#00dac2;border-color:#00dac2;color:#000}.browser-overlay{position:fixed;inset:0;z-index:10002;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;padding:12px;box-sizing:border-box;overflow:auto}.browser-dialog{width:min(980px,100vw - 24px);max-height:calc(100dvh - 24px);display:flex;flex-direction:column;overflow:hidden;color:#fff;background:#181818;font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%)}.browser-dialog::before{content:\\\"\\\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.browser-dialog{background-image:linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);background-size:22px 22px}.browser-dialog-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid rgba(255,225,0,.36);background:rgba(0,0,0,.28)}.browser-dialog-header h3{margin:0;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:15px;letter-spacing:.08em}.browser-dialog-header .close-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.browser-dialog-header .close-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.browser-dialog-header .close-btn:disabled{opacity:.45;cursor:not-allowed}.browser-dialog-header .close-btn{width:34px;height:28px;padding:0;line-height:1;font-size:16px}.browser-dialog-body{padding:14px 18px 16px;overflow:auto;flex:1}.browser-dialog-body::-webkit-scrollbar{width:7px;height:7px}.browser-dialog-body::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.browser-dialog-body::-webkit-scrollbar-thumb{background:#555}.browser-dialog-body::-webkit-scrollbar-thumb:hover{background:#6f6f6f}@media(max-width: 860px){.settings-overlay{align-items:flex-start;padding:calc(env(safe-area-inset-top) + 6px) 6px calc(env(safe-area-inset-bottom) + 6px)}.settings-panel{width:100%;max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);clip-path:none;box-shadow:0 0 0 1px hsla(0,0%,100%,.15)}.settings-panel::before{width:40px}.panel-main{grid-template-columns:1fr;grid-template-rows:auto 1fr;min-height:0}.panel-nav{border-right:none;border-bottom:1px solid hsla(0,0%,100%,.16);display:flex;gap:6px;padding:8px 10px;overflow-x:auto;overflow-y:hidden}.panel-nav::-webkit-scrollbar{width:7px;height:7px}.panel-nav::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.panel-nav::-webkit-scrollbar-thumb{background:#555}.panel-nav::-webkit-scrollbar-thumb:hover{background:#6f6f6f}.nav-btn{flex:0 0 auto;width:150px;min-height:42px;padding:6px 10px;margin-bottom:0;grid-template-areas:\\\"idx label\\\";grid-template-columns:auto 1fr;row-gap:0;align-items:center}.panel-body{min-height:0}.nav-index{font-size:16px}.nav-label{font-size:12px}.nav-sub{display:none}.browser-overlay{align-items:flex-start;padding:calc(env(safe-area-inset-top) + 6px) 6px calc(env(safe-area-inset-bottom) + 6px)}.browser-dialog{width:100%;max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);clip-path:none;box-shadow:0 0 0 1px hsla(0,0%,100%,.15)}.emotion-layout{grid-template-columns:1fr}.emotion-preview-panel{order:-1;position:sticky;top:8px;z-index:8;margin-bottom:8px;padding:8px 10px 10px;background:rgba(0,0,0,.9)}.emotion-preview-header{margin-bottom:6px}.emotion-preview-canvas{aspect-ratio:16/9;max-height:210px}.emotion-preview-controls{margin-top:8px;gap:6px}.emotion-map-head{position:static}.emotion-preview-controls .hint{display:none}}@media(max-width: 620px){.settings-overlay{align-items:stretch;padding:0}.settings-panel{width:100vw;max-height:100dvh;border-left:none;border-right:none;box-shadow:none}.panel-header{padding:10px 12px}.header-title h3{font-size:15px;letter-spacing:.06em}.header-title p{display:none}.panel-nav{padding:6px 8px}.nav-btn{width:126px;min-height:38px;padding:5px 8px}.nav-index{font-size:14px}.nav-label{font-size:11px;letter-spacing:.04em}.close-btn{min-width:66px;height:28px;padding:0 8px;font-size:11px}.panel-footer{padding:10px 12px calc(10px + env(safe-area-inset-bottom))}.panel-body{padding:8px 10px}.form-row{flex-direction:column;gap:0}.input-with-btn{grid-template-columns:1fr}.btn{min-width:86px}.emotion-preview-panel{top:6px;padding:8px}.emotion-preview-canvas{max-height:180px}.emotion-map-head,.emotion-map-row{grid-template-columns:56px 16px minmax(0, 1fr) minmax(0, 1fr) 42px;gap:6px}.emotion-map-row{padding:8px}.emotion-map-arrow{font-size:14px}.emotion-map-preview-btn{width:38px;height:30px;font-size:12px}.browser-overlay{align-items:stretch;padding:0}.browser-dialog{width:100vw;max-height:100dvh;box-shadow:none;clip-path:none}.browser-dialog-header{padding:12px}.browser-dialog-body{padding:10px 12px 12px}}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TreeNode.vue?vue&type=style&index=0&id=3a6a95ba&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"bd0944e8\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TreeNode.vue?vue&type=style&index=0&id=3a6a95ba&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TreeNode.vue?vue&type=style&index=0&id=3a6a95ba&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */.browser-overlay[data-v-6401f5ba]{position:fixed;inset:0;z-index:10003;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;padding:12px;box-sizing:border-box;overflow:auto}.browser-dialog[data-v-6401f5ba]{width:min(980px,100vw - 24px);max-height:calc(100dvh - 24px);display:flex;flex-direction:column;overflow:hidden;color:#fff;background:#181818;font-family:\"Source Han Sans SC\",\"Noto Sans CJK SC\",\"Microsoft YaHei\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0,100% 0,100% calc(100% - 12px),calc(100% - 12px) 100%,0 100%)}.browser-dialog[data-v-6401f5ba]::before{content:\"\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.browser-dialog[data-v-6401f5ba]{background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);background-size:22px 22px}.browser-dialog-header[data-v-6401f5ba]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid rgba(255,225,0,.36);background:rgba(0,0,0,.28)}.browser-dialog-header h3[data-v-6401f5ba]{margin:0;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-size:15px;letter-spacing:.08em}.browser-dialog-header .close-btn[data-v-6401f5ba]{-webkit-appearance:none;appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\"Oswald\",\"Teko\",\"Segoe UI\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.browser-dialog-header .close-btn[data-v-6401f5ba]:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.browser-dialog-header .close-btn[data-v-6401f5ba]:disabled{opacity:.45;cursor:not-allowed}.browser-dialog-header .close-btn[data-v-6401f5ba]{width:34px;height:28px;padding:0;line-height:1;font-size:16px}.browser-dialog-body[data-v-6401f5ba]{padding:14px 18px 16px;overflow:auto;flex:1}.browser-dialog-body[data-v-6401f5ba]::-webkit-scrollbar{width:7px;height:7px}.browser-dialog-body[data-v-6401f5ba]::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.browser-dialog-body[data-v-6401f5ba]::-webkit-scrollbar-thumb{background:#555}.browser-dialog-body[data-v-6401f5ba]::-webkit-scrollbar-thumb:hover{background:#6f6f6f}@media (max-width:860px){.browser-overlay[data-v-6401f5ba]{align-items:flex-start;padding:calc(env(safe-area-inset-top) + 6px) 6px calc(env(safe-area-inset-bottom) + 6px)}.browser-dialog[data-v-6401f5ba]{width:100%;max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);clip-path:none;box-shadow:0 0 0 1px hsla(0,0%,100%,.15)}}@media (max-width:620px){.browser-overlay[data-v-6401f5ba]{align-items:stretch;padding:0}.browser-dialog[data-v-6401f5ba]{width:100vw;max-height:100dvh;box-shadow:none;clip-path:none;border-left:none;border-right:none}.browser-dialog-header[data-v-6401f5ba]{padding:12px}.browser-dialog-body[data-v-6401f5ba]{padding:10px 12px 12px}}`, \"\",{\"version\":3,\"sources\":[\"<no source>\",\"webpack://.////ui/PetContainer.vue\"],\"names\":[],\"mappings\":\"AAAA,iEAAA,CCAwH,kCAAiB,cAAe,CAAA,OAAQ,CAAA,aAAc,CAAA,yBAA0B,CAAA,YAAa,CAAA,kBAAmB,CAAA,sBAAuB,CAAA,YAAa,CAAA,qBAAsB,CAAA,aAAc,CAAA,iCAAgB,6BAA8B,CAAA,8BAA+B,CAAA,YAAa,CAAA,qBAAsB,CAAA,eAAgB,CAAA,UAAW,CAAA,kBAAmB,CAAA,gFAAiF,CAAA,iBAAkB,CAAA,wBAAyB,CAAA,sCAAuC,CAAA,kFAAuF,CAAA,yCAAwB,UAAW,CAAA,iBAAkB,CAAA,KAAM,CAAA,MAAO,CAAA,UAAW,CAAA,UAAW,CAAA,kBAAmB,CAAA,SAAU,CAAA,iCAAgB,8IAAwJ,CAAA,yBAA0B,CAAA,wCAAuB,YAAa,CAAA,kBAAmB,CAAA,6BAA8B,CAAA,QAAS,CAAA,iBAAkB,CAAA,2CAA4C,CAAA,0BAA2B,CAAA,2CAA0B,QAAS,CAAA,iDAAkD,CAAA,cAAe,CAAA,oBAAqB,CAAA,mDAAkC,uBAAgB,CAAhB,eAAgB,CAAA,oCAAqC,CAAA,wBAAyB,CAAA,UAAW,CAAA,iDAAkD,CAAA,eAAgB,CAAA,oBAAqB,CAAA,wBAAyB,CAAA,cAAe,CAAA,kFAAuF,CAAA,sEAAuE,CAAA,wEAAuD,kBAAmB,CAAA,UAAW,CAAA,oBAAqB,CAAA,4DAA2C,WAAY,CAAA,kBAAmB,CAAA,mDAAkC,UAAW,CAAA,WAAY,CAAA,SAAU,CAAA,aAAc,CAAA,cAAe,CAAA,sCAAqB,sBAAuB,CAAA,aAAc,CAAA,MAAO,CAAA,yDAAwC,SAAU,CAAA,UAAW,CAAA,+DAA8C,8BAA+B,CAAA,+DAA8C,eAAgB,CAAA,qEAAoD,kBAAmB,CAAA,yBAAyB,kCAAiB,sBAAuB,CAAA,wFAAyF,CAAA,iCAAgB,UAAW,CAAA,uFAAwF,CAAA,cAAe,CAAA,wCAAyC,CAAC,CAAA,yBAAyB,kCAAiB,mBAAoB,CAAA,SAAU,CAAA,iCAAgB,WAAY,CAAA,iBAAkB,CAAA,eAAgB,CAAA,cAAe,CAAA,gBAAiB,CAAA,iBAAkB,CAAA,wCAAuB,YAAa,CAAA,sCAAqB,sBAAuB,CAAC\",\"sourcesContent\":[null,\"@import\\\"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Teko:wght@500;600;700&display=swap\\\";.browser-overlay{position:fixed;inset:0;z-index:10003;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;padding:12px;box-sizing:border-box;overflow:auto}.browser-dialog{width:min(980px,100vw - 24px);max-height:calc(100dvh - 24px);display:flex;flex-direction:column;overflow:hidden;color:#fff;background:#181818;font-family:\\\"Source Han Sans SC\\\",\\\"Noto Sans CJK SC\\\",\\\"Microsoft YaHei\\\",sans-serif;position:relative;border:1px solid #3b3b3b;box-shadow:10px 10px 0 rgba(0,0,0,.62);clip-path:polygon(0 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%)}.browser-dialog::before{content:\\\"\\\";position:absolute;top:0;left:0;width:56px;height:2px;background:#ffe100;z-index:2}.browser-dialog{background-image:linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);background-size:22px 22px}.browser-dialog-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid rgba(255,225,0,.36);background:rgba(0,0,0,.28)}.browser-dialog-header h3{margin:0;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-size:15px;letter-spacing:.08em}.browser-dialog-header .close-btn{appearance:none;border:1px solid hsla(0,0%,100%,.24);background:rgba(0,0,0,0);color:#fff;font-family:\\\"Oswald\\\",\\\"Teko\\\",\\\"Segoe UI\\\",sans-serif;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;clip-path:polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);transition:background .18s ease,color .18s ease,border-color .18s ease}.browser-dialog-header .close-btn:hover:not(:disabled){background:#ffe100;color:#000;border-color:#ffe100}.browser-dialog-header .close-btn:disabled{opacity:.45;cursor:not-allowed}.browser-dialog-header .close-btn{width:34px;height:28px;padding:0;line-height:1;font-size:16px}.browser-dialog-body{padding:14px 18px 16px;overflow:auto;flex:1}.browser-dialog-body::-webkit-scrollbar{width:7px;height:7px}.browser-dialog-body::-webkit-scrollbar-track{background:hsla(0,0%,100%,.04)}.browser-dialog-body::-webkit-scrollbar-thumb{background:#555}.browser-dialog-body::-webkit-scrollbar-thumb:hover{background:#6f6f6f}@media(max-width: 860px){.browser-overlay{align-items:flex-start;padding:calc(env(safe-area-inset-top) + 6px) 6px calc(env(safe-area-inset-bottom) + 6px)}.browser-dialog{width:100%;max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);clip-path:none;box-shadow:0 0 0 1px hsla(0,0%,100%,.15)}}@media(max-width: 620px){.browser-overlay{align-items:stretch;padding:0}.browser-dialog{width:100vw;max-height:100dvh;box-shadow:none;clip-path:none;border-left:none;border-right:none}.browser-dialog-header{padding:12px}.browser-dialog-body{padding:10px 12px 12px}}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ChatBubble.vue?vue&type=style&index=0&id=0f511089&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"800d252c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ChatBubble.vue?vue&type=style&index=0&id=0f511089&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ChatBubble.vue?vue&type=style&index=0&id=0f511089&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PetContainer.vue?vue&type=style&index=0&id=6401f5ba&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4f950045\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PetContainer.vue?vue&type=style&index=0&id=6401f5ba&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-45.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.94.0_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PetContainer.vue?vue&type=style&index=0&id=6401f5ba&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**  */\nexport const SCRIPT_NAME = '';\n\n/** Live2D CDN  pixi-live2d-display  */\nexport const LIVE2D_CDN_BASE = 'https://cdn.jsdelivr.net/gh/guansss/pixi-live2d-display/test/assets/';\n\n/** SDK CDN  */\nexport const SDK_URLS = {\n  PIXI: 'https://cdn.jsdelivr.net/npm/pixi.js@6.5.10/dist/browser/pixi.min.js',\n  CUBISM4_CORE: 'https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js',\n  CUBISM2_CORE: 'https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js',\n  PIXI_LIVE2D_DISPLAY: 'https://cdn.jsdelivr.net/npm/pixi-live2d-display@0.4.0/dist/index.min.js',\n} as const;\n\n/**  */\nexport const RECOMMENDED_MODELS = [\n  {\n    name: 'Haru (Cubism 4)',\n    path: 'haru/haru_greeter_t03.model3.json',\n  },\n  {\n    name: 'Shizuku (Cubism 2)',\n    path: 'shizuku/shizuku.model.json',\n  },\n] as const;\n\n/**  */\nexport const COMMENT_STYLES = ['', '', '', '', ''] as const;\nexport type CommentStyle = (typeof COMMENT_STYLES)[number];\n\n/**  */\nexport const COMMENT_TRIGGER_MODES = ['user', 'ai', 'both'] as const;\nexport type CommentTriggerMode = (typeof COMMENT_TRIGGER_MODES)[number];\nexport const COMMENT_TRIGGER_MODE_OPTIONS: ReadonlyArray<{\n  value: CommentTriggerMode;\n  label: string;\n}> = [\n  { value: 'user', label: '' },\n  { value: 'ai', label: 'AI' },\n  { value: 'both', label: '' },\n];\n\n/**  COT  */\nexport const EMOTION_TAGS = [\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n] as const;\nexport type EmotionTag = (typeof EMOTION_TAGS)[number];\n\n/** API source  */\nexport const API_SOURCES = [\n  { value: 'openai', label: 'OpenAI ()' },\n  { value: 'claude', label: 'Claude' },\n  { value: 'makersuite', label: 'Google Gemini' },\n  { value: 'openrouter', label: 'OpenRouter' },\n] as const;\n\n/** Eikanya Live2D  */\nexport const EIKANYA_REPO = 'Eikanya/Live2d-model';\nexport const EIKANYA_API_BASE = 'https://api.github.com/repos/Eikanya/Live2d-model/contents/';\nexport const EIKANYA_CDN_BASE = 'https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model@master/';\nexport const EIKANYA_RAW_BASE = 'https://raw.githubusercontent.com/Eikanya/Live2d-model/master/';\n\n/**  */\nexport const DEFAULTS = {\n  MODEL_PATH: 'shizuku/shizuku.model.json',\n  PET_SCALE: 0.3,\n  PET_POSITION: { x: -1, y: -1 }, // -1 \n  AUTO_MOTION_LOOP: true,\n  COMMENT_TRIGGER_MODE: 'ai' as CommentTriggerMode,\n  COMMENT_STYLE: '' as CommentStyle,\n  AUTO_TRIGGER: true,\n  TRIGGER_INTERVAL: 3,\n  TRIGGER_PROBABILITY: 60,\n  MAX_CHAT_CONTEXT: 10,\n  USE_TAMAKO_TODAY_SPECIAL: false,\n  MAX_TOKENS: 150,\n  TEMPERATURE: 0.9,\n  FREQUENCY_PENALTY: 0,\n  PRESENCE_PENALTY: 0,\n  TOP_P: 1,\n  TOP_K: 0,\n  BUBBLE_DURATION: 6000,\n} as const;\n","const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { EMOTION_TAGS, type EmotionTag } from './constants';\n\nexport type EmotionMotionOverride = {\n  enabled: boolean;\n  group: string;\n  index: number;\n};\n\nexport type EmotionConfig = {\n  tag: EmotionTag;\n  aliases: string[];\n  ttsContext: string;\n  live2dExpression: string;\n  live2dMotion: EmotionMotionOverride;\n};\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return !!value && typeof value === 'object' && !Array.isArray(value);\n}\n\nconst EMOTION_TAG_SET = new Set<string>(EMOTION_TAGS as unknown as string[]);\n\nfunction asEmotionTag(value: unknown): EmotionTag | null {\n  const s = String(value || '').trim();\n  if (!s) return null;\n  return EMOTION_TAG_SET.has(s) ? (s as EmotionTag) : null;\n}\n\nconst DEFAULT_ALIASES: Record<EmotionTag, string[]> = {\n  : ['', 'normal', 'default', 'neutral', 'idle', 'base'],\n  : ['', '', 'smile', 'happy', 'joy', 'glad'],\n  : ['', 'angry', 'mad', 'rage'],\n  : ['', 'sad', 'cry', 'sorrow', 'upset'],\n  : ['', 'surprised', 'shock', 'amazed', 'wow'],\n  : ['', 'smirk', 'mock', 'sneer', 'tease', 'sarcastic'],\n  : ['', 'shy', 'blush', 'embarrassed', 'bashful'],\n  : ['', 'think', 'ponder', 'confused', 'wonder', 'curious'],\n  : ['', 'laugh', 'lol', 'haha', 'giggle', 'rofl'],\n  : ['', 'wink', 'playful', 'silly', 'mischievous', 'fun'],\n};\n\nfunction dedupAliases(aliases: string[]): string[] {\n  const out: string[] = [];\n  const seen = new Set<string>();\n  for (const raw of Array.isArray(aliases) ? aliases : []) {\n    const trimmed = String(raw || '').trim();\n    if (!trimmed) continue;\n    const key = trimmed.toLowerCase();\n    if (seen.has(key)) continue;\n    seen.add(key);\n    out.push(trimmed);\n  }\n  return out;\n}\n\nexport function parseAliasesText(input: unknown): string[] {\n  const text = String(input || '');\n  const parts = text\n    .split(/[,\\n\\r]+/g)\n    .map((s) => s.trim())\n    .filter(Boolean);\n  return dedupAliases(parts);\n}\n\nexport function createDefaultEmotionConfigs(): EmotionConfig[] {\n  return EMOTION_TAGS.map((tag) => ({\n    tag,\n    aliases: [...(DEFAULT_ALIASES[tag] ?? [])],\n    ttsContext: '',\n    live2dExpression: '',\n    live2dMotion: { enabled: true, group: '', index: 0 },\n  }));\n}\n\nexport function normalizeEmotionConfigs(raw: unknown): EmotionConfig[] {\n  const byTag = new Map<EmotionTag, EmotionConfig>();\n\n  for (const item of Array.isArray(raw) ? raw : []) {\n    if (!isRecord(item)) continue;\n    const tag = asEmotionTag(item.tag);\n    if (!tag) continue;\n    if (byTag.has(tag)) continue;\n\n    const live2dMotionRaw = isRecord(item.live2dMotion) ? item.live2dMotion : {};\n    const enabled = (live2dMotionRaw.enabled as unknown) !== false;\n    const group = String(live2dMotionRaw.group || '').trim();\n    const indexRaw = Number(live2dMotionRaw.index);\n    const index = Number.isFinite(indexRaw) ? Math.max(0, Math.floor(indexRaw)) : 0;\n\n    const cfg: EmotionConfig = {\n      tag,\n      aliases: dedupAliases(\n        Array.isArray(item.aliases)\n          ? item.aliases.map((v) => String(v || '').trim()).filter(Boolean)\n          : [],\n      ),\n      ttsContext: String(item.ttsContext || '').trim(),\n      live2dExpression: String(item.live2dExpression || '').trim(),\n      live2dMotion: { enabled, group, index },\n    };\n\n    byTag.set(tag, cfg);\n  }\n\n  const defaults = createDefaultEmotionConfigs();\n  for (const def of defaults) {\n    if (!byTag.has(def.tag)) byTag.set(def.tag, def);\n  }\n\n  return EMOTION_TAGS.map((tag) => byTag.get(tag)!).map((cfg) => ({\n    tag: cfg.tag,\n    aliases: dedupAliases(cfg.aliases),\n    ttsContext: String(cfg.ttsContext || '').trim(),\n    live2dExpression: String(cfg.live2dExpression || '').trim(),\n    live2dMotion: {\n      enabled: cfg.live2dMotion?.enabled !== false,\n      group: String(cfg.live2dMotion?.group || '').trim(),\n      index: Number.isFinite(cfg.live2dMotion?.index) ? Math.max(0, Math.floor(cfg.live2dMotion.index)) : 0,\n    },\n  }));\n}\n\nexport function getEmotionConfigByTag(tag: EmotionTag, configs: unknown): EmotionConfig | null {\n  for (const cfg of Array.isArray(configs) ? (configs as EmotionConfig[]) : []) {\n    if (cfg?.tag === tag) return cfg;\n  }\n  return null;\n}\n\nexport function resolveEmotionTag(rawTag: unknown, configs: unknown): EmotionTag | null {\n  const s = String(rawTag || '').trim();\n  if (!s) return null;\n  const direct = asEmotionTag(s);\n  if (direct) return direct;\n\n  const needle = s.toLowerCase();\n  for (const cfg of Array.isArray(configs) ? (configs as EmotionConfig[]) : []) {\n    const aliases = Array.isArray(cfg?.aliases) ? cfg.aliases : [];\n    for (const alias of aliases) {\n      if (String(alias || '').trim().toLowerCase() === needle) {\n        const tag = asEmotionTag(cfg.tag);\n        if (tag) return tag;\n      }\n    }\n  }\n  return null;\n}\n\n","import { SCRIPT_NAME } from '../core/constants';\n\n/**\n *  DOM  body\n */\nexport function createContainer(id: string): JQuery<HTMLElement> {\n  // \n  $(`#${id}`).remove();\n  return $(`<div id=\"${id}\">`).appendTo('body');\n}\n\n/**\n *  ID \n */\nexport function removeContainer(id: string): void {\n  $(`#${id}`).remove();\n}\n\nfunction getTargetConsole(): Console {\n  try {\n    const top = window.parent ?? window;\n    if (top.console) return top.console;\n  } catch {\n    // ignore\n  }\n  return console;\n}\n\n/**\n * \n */\nexport function log(...args: unknown[]): void {\n  getTargetConsole().log(`[${SCRIPT_NAME}]`, ...args);\n}\n\nexport function warn(...args: unknown[]): void {\n  getTargetConsole().warn(`[${SCRIPT_NAME}]`, ...args);\n}\n\nexport function error(...args: unknown[]): void {\n  getTargetConsole().error(`[${SCRIPT_NAME}]`, ...args);\n}\n","import { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { ref, watchEffect } from 'vue';\nimport { z } from 'zod';\nimport { COMMENT_STYLES, COMMENT_TRIGGER_MODES, DEFAULTS, EMOTION_TAGS } from './constants';\nimport { normalizeEmotionConfigs } from './emotion';\nimport { error as logError, warn } from '../utils/dom';\n\nfunction isRecord(value: unknown): value is Record<string, any> {\n  return !!value && typeof value === 'object' && !Array.isArray(value);\n}\n\nfunction deleteAtPath(target: any, path: (string | number)[]): void {\n  if (!target || typeof target !== 'object') return;\n  if (path.length === 0) return;\n\n  let current: any = target;\n  for (let i = 0; i < path.length - 1; i++) {\n    const key = path[i];\n    if (!current || typeof current !== 'object') return;\n    current = current[key as any];\n  }\n\n  const last = path[path.length - 1];\n  if (!current || typeof current !== 'object') return;\n  if (Array.isArray(current) && typeof last === 'number') {\n    current[last] = undefined;\n    return;\n  }\n  delete current[last as any];\n}\n\nfunction parseSettings(raw: unknown): Settings {\n  const rawObject = isRecord(raw) ? raw : {};\n  const first = SettingsSchema.safeParse(rawObject);\n  if (first.success) return first.data;\n\n  const cleaned = klona(rawObject);\n  for (const issue of first.error.issues) {\n    deleteAtPath(cleaned, issue.path);\n  }\n\n  const second = SettingsSchema.safeParse(cleaned);\n  if (second.success) {\n    warn('', first.error.issues);\n    return second.data;\n  }\n\n  logError('', first.error);\n  return SettingsSchema.parse({});\n}\n\n/**  Schema */\nconst SettingsSchema = z\n  .object({\n    // API \n    apiMode: z.enum(['custom', 'tavern']).default('tavern'),\n    apiConfig: z\n      .object({\n        url: z.string().default(''),\n        apiKey: z.string().default(''),\n        model: z.string().default('gpt-4o-mini'),\n        source: z.string().default('openai'),\n        max_tokens: z.number().min(1).max(4096).default(DEFAULTS.MAX_TOKENS),\n        temperature: z.number().min(0).max(2).default(DEFAULTS.TEMPERATURE),\n        frequency_penalty: z.number().min(-2).max(2).default(DEFAULTS.FREQUENCY_PENALTY),\n        presence_penalty: z.number().min(-2).max(2).default(DEFAULTS.PRESENCE_PENALTY),\n        top_p: z.number().min(0).max(1).default(DEFAULTS.TOP_P),\n        top_k: z.number().min(0).max(500).default(DEFAULTS.TOP_K),\n        usePresetSampling: z.boolean().default(false),\n        sendWorldInfo: z.boolean().default(false),\n      })\n      .default({}),\n\n    // Live2D \n    modelPath: z.string().default(DEFAULTS.MODEL_PATH),\n    useCdn: z.boolean().default(true),\n    petPosition: z\n      .object({\n        x: z.number().default(DEFAULTS.PET_POSITION.x),\n        y: z.number().default(DEFAULTS.PET_POSITION.y),\n      })\n      .default({}),\n    petScale: z.number().min(0.1).max(3).default(DEFAULTS.PET_SCALE),\n    autoMotionLoop: z.boolean().default(DEFAULTS.AUTO_MOTION_LOOP),\n\n    // \n    commentStyle: z.enum(COMMENT_STYLES).default(DEFAULTS.COMMENT_STYLE),\n    commentTriggerMode: z.enum(COMMENT_TRIGGER_MODES).default(DEFAULTS.COMMENT_TRIGGER_MODE),\n    customPrompt: z.string().default(''),\n    autoTrigger: z.boolean().default(DEFAULTS.AUTO_TRIGGER),\n    triggerInterval: z.number().min(1).max(100).default(DEFAULTS.TRIGGER_INTERVAL),\n    triggerProbability: z.number().min(0).max(100).default(DEFAULTS.TRIGGER_PROBABILITY),\n    maxChatContext: z.number().min(1).max(50).default(DEFAULTS.MAX_CHAT_CONTEXT),\n    useTamakoTodaySpecial: z.boolean().default(DEFAULTS.USE_TAMAKO_TODAY_SPECIAL),\n\n    //  COT \n    emotionCotEnabled: z.boolean().default(true),\n    emotionCotStripFromText: z.boolean().default(true),\n    emotionConfigs: z\n      .array(\n        z\n          .object({\n            tag: z.enum(EMOTION_TAGS).default(''),\n            aliases: z.array(z.string()).default([]),\n            ttsContext: z.string().default(''),\n            live2dExpression: z.string().default(''),\n            live2dMotion: z\n              .object({\n                enabled: z.boolean().default(true),\n                group: z.string().default(''),\n                index: z.number().min(0).max(999).default(0),\n              })\n              .default({}),\n          })\n          .default({}),\n      )\n      .default([]),\n\n    // TTS  galgame  tts \n    ttsProvider: z.enum(['littlewhitebox', 'gpt_sovits_v2']).default('littlewhitebox'),\n    ttsAutoPlay: z.boolean().default(true),\n    ttsDefaultSpeaker: z.string().default(''),\n    lipSyncManualParamsEnabled: z.boolean().default(false),\n    lipSyncManualParamIds: z.array(z.string()).default([]),\n    gptSoVits: z\n      .object({\n        apiUrl: z.string().default('http://127.0.0.1:9880'),\n        endpoint: z.string().default('/tts'),\n        useCorsProxy: z.boolean().default(true),\n        mediaType: z.enum(['wav', 'ogg', 'raw']).default('wav'),\n        streamingMode: z.boolean().default(true),\n        textLang: z.string().default('auto'),\n        textSplitMethod: z.string().default('cut5'),\n        speedFactor: z.number().min(0.1).max(3).default(1),\n        strictWeightSwitch: z.boolean().default(false),\n        probeOnAudioError: z.boolean().default(false),\n        modelSwitchMode: z.enum(['none', 'set_model', 'set_weights']).default('set_weights'),\n        setModelEndpoint: z.string().default('/set_model'),\n        importPathPrefix: z.string().default(''),\n        voices: z\n          .array(\n            z\n              .object({\n                name: z.string().default(''),\n                desc: z.string().default(''),\n                refAudioPath: z.string().default(''),\n                promptText: z.string().default(''),\n                promptLang: z.string().default(''),\n                textLang: z.string().default(''),\n                gptWeightsPath: z.string().default(''),\n                sovitsWeightsPath: z.string().default(''),\n                modelSwitchMode: z.enum(['none', 'set_model', 'set_weights']).default('set_weights'),\n                setModelEndpoint: z.string().default('/set_model'),\n              })\n              .default({}),\n          )\n          .default([]),\n      })\n      .default({}),\n  })\n  .default({});\n\nexport type Settings = z.infer<typeof SettingsSchema>;\n\n/** Pinia  Store */\nexport const useSettingsStore = defineStore('desktop-pet-settings', () => {\n  const raw = getVariables({ type: 'script', script_id: getScriptId() });\n  const parsed = parseSettings(raw);\n\n  //  Eikanya CDN  CDN\n  if (\n    parsed.modelPath.includes('live2d-widget-model/') ||\n    parsed.modelPath.includes('Live2D/Samples/')\n  ) {\n    parsed.modelPath = DEFAULTS.MODEL_PATH;\n  }\n\n  // jsDelivr / raw  Live2DManager \n  // \n  parsed.emotionConfigs = normalizeEmotionConfigs(parsed.emotionConfigs);\n\n  const settings = ref<Settings>(parsed);\n\n  // \n  watchEffect(() => {\n    replaceVariables(klona(settings.value), { type: 'script', script_id: getScriptId() });\n  });\n\n  /**  */\n  function updateSettings(partial: Partial<Settings>) {\n    settings.value = SettingsSchema.parse({ ...klona(settings.value), ...partial });\n    settings.value.emotionConfigs = normalizeEmotionConfigs(settings.value.emotionConfigs);\n  }\n\n  /**  */\n  function resetSettings() {\n    const next = SettingsSchema.parse({});\n    next.emotionConfigs = normalizeEmotionConfigs(next.emotionConfigs);\n    settings.value = next;\n  }\n\n  return { settings, updateSettings, resetSettings };\n});\n","import { SCRIPT_NAME } from '../core/constants';\nimport { useSettingsStore } from '../core/settings';\n\n// ============================================\n// TTS  (Providers)\n// : galgame/src/audio/tts-config.js\n// ============================================\n\nexport const TTS_PROVIDER = {\n  LITTLEWHITEBOX: 'littlewhitebox',\n  GPT_SOVITS_V2: 'gpt_sovits_v2',\n} as const;\n\nexport type TTSProvider = (typeof TTS_PROVIDER)[keyof typeof TTS_PROVIDER];\n\nexport type GptSoVitsSwitchMode = 'none' | 'set_model' | 'set_weights';\n\nexport type GptSoVitsVoiceStoreConfig = {\n  name: string;\n  desc: string;\n  refAudioPath: string;\n  promptText: string;\n  promptLang: string;\n  textLang: string;\n  gptWeightsPath: string;\n  sovitsWeightsPath: string;\n  modelSwitchMode: GptSoVitsSwitchMode;\n  setModelEndpoint: string;\n};\n\nexport type TTSSpeakerVoice = {\n  name: string;\n  value: string;\n  source: string;\n  resourceId: string | null;\n  desc: string;\n  gptSoVits?: {\n    refAudioPath: string;\n    promptText: string;\n    promptLang: string;\n    textLang: string;\n    gptWeightsPath: string;\n    sovitsWeightsPath: string;\n    modelSwitchMode: GptSoVitsSwitchMode;\n    setModelEndpoint: string;\n  };\n};\n\nfunction getTopWindow(): Window {\n  try {\n    return window.parent ?? window;\n  } catch {\n    return window;\n  }\n}\n\nfunction getStoragePrefix(): string {\n  try {\n    if (typeof getScriptId === 'function') {\n      const id = String(getScriptId() ?? '').trim();\n      if (id) return id;\n    }\n  } catch {\n    // ignore\n  }\n  return SCRIPT_NAME;\n}\n\nfunction getTtsEnabledKey(): string {\n  return `${getStoragePrefix()}_tts_enabled`;\n}\n\nfunction getCharTtsVoiceKey(): string {\n  return `${getStoragePrefix()}_char_tts_voice`;\n}\n\nexport function normalizeGptSoVitsSwitchMode(mode: unknown): GptSoVitsSwitchMode {\n  const s = String(mode || '').trim().toLowerCase();\n  if (s === 'none' || s === 'off' || s === 'disabled') return 'none';\n  if (s === 'set_model' || s === 'model') return 'set_model';\n  return 'set_weights';\n}\n\nfunction normalizeSetModelEndpoint(endpoint: unknown): string {\n  const raw = String(endpoint || '').trim();\n  if (!raw) return '/set_model';\n  return raw.startsWith('/') ? raw : `/${raw}`;\n}\n\nexport function getTTSProvider(): TTSProvider {\n  try {\n    const store = useSettingsStore();\n    return (store.settings.ttsProvider as TTSProvider) || TTS_PROVIDER.LITTLEWHITEBOX;\n  } catch {\n    return TTS_PROVIDER.LITTLEWHITEBOX;\n  }\n}\n\nexport function getGptSoVitsConfig() {\n  const defaults = {\n    apiUrl: 'http://127.0.0.1:9880',\n    endpoint: '/tts',\n    useCorsProxy: true,\n    mediaType: 'wav',\n    streamingMode: false,\n    textLang: 'auto',\n    textSplitMethod: 'cut5',\n    speedFactor: 1,\n    strictWeightSwitch: false,\n    probeOnAudioError: false,\n    modelSwitchMode: 'set_weights' as GptSoVitsSwitchMode,\n    setModelEndpoint: '/set_model',\n    importPathPrefix: '',\n    voices: [] as unknown[],\n  };\n\n  try {\n    const store = useSettingsStore();\n    const cfg = store.settings.gptSoVits || ({} as any);\n    return Object.assign(Object.assign({}, defaults), cfg, {\n      modelSwitchMode: normalizeGptSoVitsSwitchMode(cfg.modelSwitchMode || defaults.modelSwitchMode),\n      setModelEndpoint: normalizeSetModelEndpoint(cfg.setModelEndpoint || defaults.setModelEndpoint),\n      voices: Array.isArray(cfg.voices) ? cfg.voices : defaults.voices,\n    });\n  } catch {\n    return defaults;\n  }\n}\n\nexport function normalizeGptSoVitsVoice(voice: any): TTSSpeakerVoice | null {\n  if (!voice) return null;\n  const rawCfg = voice?.gptSoVits || {};\n  const name = String(voice.name || voice.voice || voice.speaker || rawCfg.name || '').trim();\n  if (!name) return null;\n\n  const refAudioPath = String(\n    voice.refAudioPath ||\n      voice.ref_audio_path ||\n      voice.ref_audio ||\n      voice.ref ||\n      rawCfg.refAudioPath ||\n      '',\n  ).trim();\n  const promptText = String(voice.promptText || voice.prompt_text || rawCfg.promptText || '').trim();\n  const promptLang = String(voice.promptLang || voice.prompt_lang || rawCfg.promptLang || '').trim();\n  const textLang = String(voice.textLang || voice.text_lang || rawCfg.textLang || '').trim();\n  const gptWeightsPath = String(\n    voice.gptWeightsPath || voice.gpt_weights_path || voice.gptPath || voice.gpt || rawCfg.gptWeightsPath || '',\n  ).trim();\n  const sovitsWeightsPath = String(\n    voice.sovitsWeightsPath ||\n      voice.sovits_weights_path ||\n      voice.sovitsPath ||\n      voice.sovits ||\n      rawCfg.sovitsWeightsPath ||\n      '',\n  ).trim();\n  const modelSwitchMode = normalizeGptSoVitsSwitchMode(\n    voice.modelSwitchMode || voice.model_switch_mode || rawCfg.modelSwitchMode || '',\n  );\n  const setModelEndpoint = normalizeSetModelEndpoint(\n    voice.setModelEndpoint || voice.set_model_endpoint || rawCfg.setModelEndpoint || '/set_model',\n  );\n  const desc = String(voice.desc || voice.description || '').trim();\n\n  return {\n    name,\n    value: name,\n    source: TTS_PROVIDER.GPT_SOVITS_V2,\n    resourceId: null,\n    desc: desc || 'GPT-SoVITS',\n    gptSoVits: {\n      refAudioPath,\n      promptText,\n      promptLang,\n      textLang,\n      gptWeightsPath,\n      sovitsWeightsPath,\n      modelSwitchMode,\n      setModelEndpoint,\n    },\n  };\n}\n\nfunction toGptSoVitsVoiceConfig(\n  voice: any,\n  globalDefaults: ReturnType<typeof getGptSoVitsConfig> | null = null,\n): GptSoVitsVoiceStoreConfig | null {\n  const normalized = normalizeGptSoVitsVoice(voice);\n  if (!normalized) return null;\n  const cfg = normalized.gptSoVits || ({} as any);\n  const globalCfg = globalDefaults || getGptSoVitsConfig();\n  const desc = String(voice?.desc || voice?.description || '').trim();\n\n  return {\n    name: normalized.name,\n    desc,\n    refAudioPath: String(cfg.refAudioPath || '').trim(),\n    promptText: String(cfg.promptText || '').trim(),\n    promptLang: String(cfg.promptLang || '').trim(),\n    textLang: String(cfg.textLang || '').trim(),\n    gptWeightsPath: String(cfg.gptWeightsPath || '').trim(),\n    sovitsWeightsPath: String(cfg.sovitsWeightsPath || '').trim(),\n    modelSwitchMode: normalizeGptSoVitsSwitchMode(cfg.modelSwitchMode || globalCfg.modelSwitchMode),\n    setModelEndpoint: normalizeSetModelEndpoint(cfg.setModelEndpoint || globalCfg.setModelEndpoint),\n  };\n}\n\nexport function isGptSoVitsVoiceUsable(voice: any): boolean {\n  const cfg = toGptSoVitsVoiceConfig(voice);\n  return !!String(cfg?.refAudioPath || '').trim();\n}\n\nexport function normalizeGptSoVitsVoicesForStore(\n  voiceList: any,\n  globalDefaults: ReturnType<typeof getGptSoVitsConfig> | null = null,\n) {\n  const out: GptSoVitsVoiceStoreConfig[] = [];\n  let ignoredCount = 0;\n  let missingRefCount = 0;\n\n  for (const voice of Array.isArray(voiceList) ? voiceList : []) {\n    const cfg = toGptSoVitsVoiceConfig(voice, globalDefaults);\n    if (!cfg) {\n      ignoredCount += 1;\n      continue;\n    }\n    if (!cfg.refAudioPath) missingRefCount += 1;\n    out.push(cfg);\n  }\n\n  return { voices: out, ignoredCount, missingRefCount };\n}\n\nexport function pickFirstUsableGptSoVitsVoice(voiceList: any): TTSSpeakerVoice | null {\n  for (const voice of Array.isArray(voiceList) ? voiceList : []) {\n    if (isGptSoVitsVoiceUsable(voice)) return voice;\n  }\n  return null;\n}\n\nexport async function getGptSoVitsVoiceListAsync(): Promise<TTSSpeakerVoice[]> {\n  const cfg = getGptSoVitsConfig();\n  const list = Array.isArray(cfg.voices) ? cfg.voices : [];\n  return list.map(normalizeGptSoVitsVoice).filter(Boolean) as TTSSpeakerVoice[];\n}\n\nexport function getGptSoVitsVoiceList(): TTSSpeakerVoice[] {\n  try {\n    const cfg = getGptSoVitsConfig();\n    const list = Array.isArray(cfg.voices) ? cfg.voices : [];\n    return list.map(normalizeGptSoVitsVoice).filter(Boolean) as TTSSpeakerVoice[];\n  } catch {\n    return [];\n  }\n}\n\n// LittleWhiteBox TTS \nlet _lwbTtsCache: TTSSpeakerVoice[] | null = null;\nlet _lwbTtsCacheTime = 0;\nconst LWB_TTS_CACHE_MS = 5000;\n\nasync function fetchLittleWhiteBoxTTSConfig(): Promise<any[] | null> {\n  try {\n    const response = await fetch('/user/files/LittleWhiteBox_TTS.json', { cache: 'no-cache' });\n    if (!response.ok) return null;\n    const data = await response.json();\n    return data?.volc?.mySpeakers || null;\n  } catch (e) {\n    console.log(`[${SCRIPT_NAME}]  LittleWhiteBox TTS :`, e);\n    return null;\n  }\n}\n\nexport async function getTTSVoiceListAsync(): Promise<TTSSpeakerVoice[]> {\n  const provider = getTTSProvider();\n  if (provider === TTS_PROVIDER.GPT_SOVITS_V2) {\n    return getGptSoVitsVoiceListAsync();\n  }\n\n  const now = Date.now();\n  if (!_lwbTtsCache || now - _lwbTtsCacheTime > LWB_TTS_CACHE_MS) {\n    const mySpeakers = await fetchLittleWhiteBoxTTSConfig();\n    if (mySpeakers && mySpeakers.length > 0) {\n      _lwbTtsCache = mySpeakers.map((s: any) => ({\n        name: s.name,\n        value: s.value,\n        source: s.source || (isFreeVoice(s.value) ? 'free' : 'auth'),\n        resourceId: s.resourceId || inferResourceId(s.value),\n        desc: getVoiceDesc(s.value),\n      }));\n      _lwbTtsCacheTime = now;\n      return _lwbTtsCache;\n    }\n  } else if (_lwbTtsCache) {\n    return _lwbTtsCache;\n  }\n\n  const topAny: any = getTopWindow() as any;\n  const xbTts = topAny?.xiaobaixTts || (window as any)?.xiaobaixTts;\n  if (xbTts?.getConfig) {\n    const config = xbTts.getConfig();\n    const mySpeakers = config?.volc?.mySpeakers || [];\n    if (mySpeakers.length > 0) {\n      return mySpeakers.map((s: any) => ({\n        name: s.name,\n        value: s.value,\n        source: s.source || (isFreeVoice(s.value) ? 'free' : 'auth'),\n        resourceId: s.resourceId || inferResourceId(s.value),\n        desc: getVoiceDesc(s.value),\n      }));\n    }\n  }\n\n  const xbVoiceData = topAny?.XB_TTS_VOICE_DATA || (window as any)?.XB_TTS_VOICE_DATA;\n  if (Array.isArray(xbVoiceData) && xbVoiceData.length > 0) {\n    return xbVoiceData.slice(0, 20).map((v: any) => ({\n      name: v.name,\n      value: v.value,\n      source: inferSource(v.value),\n      resourceId: inferResourceId(v.value),\n      desc: v.scene || '',\n    }));\n  }\n\n  return getDefaultFreeVoices();\n}\n\nexport function getTTSVoiceList(): TTSSpeakerVoice[] {\n  const provider = getTTSProvider();\n  if (provider === TTS_PROVIDER.GPT_SOVITS_V2) {\n    return getGptSoVitsVoiceList();\n  }\n\n  if (_lwbTtsCache) {\n    return _lwbTtsCache;\n  }\n\n  const topAny: any = getTopWindow() as any;\n  const xbTts = topAny?.xiaobaixTts || (window as any)?.xiaobaixTts;\n  if (xbTts?.getConfig) {\n    const config = xbTts.getConfig();\n    const mySpeakers = config?.volc?.mySpeakers || [];\n    if (mySpeakers.length > 0) {\n      return mySpeakers.map((s: any) => ({\n        name: s.name,\n        value: s.value,\n        source: s.source || (isFreeVoice(s.value) ? 'free' : 'auth'),\n        resourceId: s.resourceId || inferResourceId(s.value),\n        desc: getVoiceDesc(s.value),\n      }));\n    }\n  }\n\n  const xbVoiceData = topAny?.XB_TTS_VOICE_DATA || (window as any)?.XB_TTS_VOICE_DATA;\n  if (Array.isArray(xbVoiceData) && xbVoiceData.length > 0) {\n    return xbVoiceData.slice(0, 20).map((v: any) => ({\n      name: v.name,\n      value: v.value,\n      source: inferSource(v.value),\n      resourceId: inferResourceId(v.value),\n      desc: v.scene || '',\n    }));\n  }\n\n  return getDefaultFreeVoices();\n}\n\nfunction isFreeVoice(value: string): boolean {\n  const freeVoices = [\n    'female_1',\n    'female_2',\n    'female_3',\n    'female_4',\n    'female_5',\n    'female_6',\n    'female_7',\n    'male_1',\n    'male_2',\n    'male_3',\n    'male_4',\n  ];\n  return freeVoices.includes(value);\n}\n\nfunction inferSource(value: string): string {\n  return isFreeVoice(value) ? 'free' : 'auth';\n}\n\nexport function inferResourceId(value: string): string {\n  const lower = (value || '').toLowerCase();\n  if (lower.startsWith('icl_') || lower.startsWith('s_')) return 'seed-icl-2.0';\n  if (\n    lower.startsWith('saturn_') ||\n    lower.startsWith('uranus_') ||\n    lower.includes('_saturn_') ||\n    lower.includes('_uranus_')\n  ) {\n    return 'seed-tts-2.0';\n  }\n  return 'seed-tts-1.0';\n}\n\nfunction getVoiceDesc(value: string): string {\n  const descMap: Record<string, string> = {\n    female_1: '()',\n    female_2: '()',\n    female_3: '()',\n    female_4: '()',\n    female_5: '()',\n    female_6: '()',\n    female_7: '()',\n    male_1: '()',\n    male_2: '()',\n    male_3: '()',\n    male_4: '()',\n  };\n  return descMap[value] || '';\n}\n\nfunction getDefaultFreeVoices(): TTSSpeakerVoice[] {\n  return [\n    { name: '', value: 'female_1', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'male_1', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'female_2', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'female_3', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'female_4', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'female_5', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'female_6', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'female_7', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'male_2', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'male_3', source: 'free', resourceId: null, desc: '()' },\n    { name: '', value: 'male_4', source: 'free', resourceId: null, desc: '()' },\n  ];\n}\n\nexport async function resolveVoiceByName(voiceName: string): Promise<TTSSpeakerVoice | null> {\n  if (!voiceName) return null;\n  const voiceList = await getTTSVoiceListAsync();\n  let voice = voiceList.find(v => v.name === voiceName);\n  if (voice) return voice;\n  voice = voiceList.find(v => v.value === voiceName);\n  if (voice) return voice;\n  const provider = getTTSProvider();\n  const defaultVoice =\n    provider === TTS_PROVIDER.GPT_SOVITS_V2\n      ? (pickFirstUsableGptSoVitsVoice(voiceList) || voiceList[0])\n      : voiceList[0];\n  if (defaultVoice) {\n    console.warn(`[${SCRIPT_NAME}]  \"${voiceName}\": ${defaultVoice.name}`);\n    return defaultVoice;\n  }\n  return null;\n}\n\n// TTS_VOICE_LIST getter \ntry {\n  Object.defineProperty(getTopWindow() as any, 'TTS_VOICE_LIST', {\n    get: getTTSVoiceList,\n    configurable: true,\n  });\n} catch {\n  // ignore\n}\n\nexport function getTTSEnabled(): boolean {\n  try {\n    const saved = localStorage.getItem(getTtsEnabledKey());\n    if (saved === null) return true;\n    return saved === 'true';\n  } catch {\n    return true;\n  }\n}\n\nexport function setTTSEnabled(enabled: boolean): void {\n  try {\n    localStorage.setItem(getTtsEnabledKey(), String(enabled));\n  } catch (e) {\n    console.error(`[${SCRIPT_NAME}] TTS:`, e);\n  }\n}\n\nexport function getCharacterTTSVoice(characterId: string): string | null {\n  try {\n    const map = JSON.parse(localStorage.getItem(getCharTtsVoiceKey()) || '{}');\n    return map[characterId] || null;\n  } catch {\n    return null;\n  }\n}\n\nexport function setCharacterTTSVoice(characterId: string, voiceName: string | null): void {\n  try {\n    const map = JSON.parse(localStorage.getItem(getCharTtsVoiceKey()) || '{}');\n    if (voiceName) {\n      map[characterId] = voiceName;\n    } else {\n      delete map[characterId];\n    }\n    localStorage.setItem(getCharTtsVoiceKey(), JSON.stringify(map));\n  } catch (e) {\n    console.error(`[${SCRIPT_NAME}] TTS:`, e);\n  }\n}\n\nexport function getAllCharacterTTSVoices(): Record<string, string> {\n  try {\n    return JSON.parse(localStorage.getItem(getCharTtsVoiceKey()) || '{}');\n  } catch {\n    return {};\n  }\n}\n","import { SDK_URLS } from '../core/constants';\nimport { log, warn, error } from '../utils/dom';\n/**\n * Live2D SDK \n *  PIXI.jsCubism Corepixi-live2d-display \n */\nexport const Live2DLoader = {\n    _READY_MARK: '__desktopPetLive2dLoaderReady_v2',\n    _RUNTIME_KEY: '__desktopPetLive2dRuntime_v2',\n    _JSDELIVR_HOSTS: [\n        'cdn.jsdelivr.net',\n        'fastly.jsdelivr.net',\n        'testingcf.jsdelivr.net',\n        'gcore.jsdelivr.net',\n    ],\n    isLoaded: false,\n    loadPromise: null,\n    async load() {\n        const top = window.parent ?? window;\n        if (this.isLoaded) {\n            const runtime = this._getRuntime(top);\n            if (runtime)\n                return true;\n            warn(' Live2D runtime  SDK PIXI');\n            this.isLoaded = false;\n            this.loadPromise = null;\n        }\n        const runtime = this._getRuntime(top);\n        if (runtime) {\n            this.isLoaded = true;\n            top[this._READY_MARK] = true;\n            this.loadPromise = null;\n            return true;\n        }\n        if (this.loadPromise)\n            return this.loadPromise;\n        this.loadPromise = this._doLoad();\n        return this.loadPromise;\n    },\n    getRuntime(targetWindow) {\n        const top = targetWindow ?? window.parent ?? window;\n        return this._getRuntime(top);\n    },\n    getPixi(targetWindow) {\n        return this.getRuntime(targetWindow)?.pixi ?? null;\n    },\n    _getRuntime(top) {\n        const runtime = top[this._RUNTIME_KEY];\n        if (!runtime || typeof runtime !== 'object')\n            return null;\n        const pixi = runtime.pixi;\n        const live2dModel = runtime.live2dModel;\n        if (!pixi || !live2dModel)\n            return null;\n        const pixiMajor = this._getPixiMajorVersion(pixi);\n        if (pixiMajor !== 6)\n            return null;\n        // runtime  PIXI \n        if (top.PIXI !== pixi)\n            return null;\n        if (pixi?.live2d?.Live2DModel !== live2dModel)\n            return null;\n        return runtime;\n    },\n    _setRuntime(top) {\n        const pixi = top.PIXI;\n        const live2dModel = pixi?.live2d?.Live2DModel;\n        const pixiMajor = this._getPixiMajorVersion(pixi);\n        if (pixiMajor !== 6 || !live2dModel) {\n            return null;\n        }\n        const runtime = {\n            pixi,\n            live2dModel,\n            pixiVersion: String(pixi?.VERSION || 'unknown'),\n            loadedAt: Date.now(),\n        };\n        top[this._RUNTIME_KEY] = runtime;\n        return runtime;\n    },\n    async _doLoad() {\n        const top = window.parent ?? window;\n        try {\n            const existingRuntime = this._getRuntime(top);\n            if (existingRuntime) {\n                this.isLoaded = true;\n                top[this._READY_MARK] = true;\n                this.loadPromise = null;\n                return true;\n            }\n            //  PIXI.js\n            const pixi = top.PIXI;\n            const pixiMajor = this._getPixiMajorVersion(pixi);\n            if (!pixi || pixiMajor !== 6) {\n                if (pixi && pixiMajor !== null && pixiMajor !== 6) {\n                    warn(' PIXI  PIXI v6', {\n                        detected: pixi.VERSION ?? 'unknown',\n                    });\n                }\n                log(' PIXI.js...');\n                await this._loadScriptWithFallback(SDK_URLS.PIXI, top, 'PIXI.js');\n                log('PIXI.js ');\n            }\n            if (!top.window.PIXI) {\n                top.window.PIXI = top.PIXI;\n            }\n            //  Cubism 4 Core\n            if (!this._hasValidCubism4Core(top)) {\n                if (top.Live2DCubismCore) {\n                    warn(' Cubism 4 Core ');\n                }\n                log(' Cubism 4 Core...');\n                try {\n                    await this._loadScriptWithFallback(SDK_URLS.CUBISM4_CORE, top, 'Cubism 4 Core', 20000);\n                    log('Cubism 4 Core ');\n                }\n                catch (e) {\n                    warn('Cubism 4 Core ', e);\n                }\n            }\n            //  Cubism 2 Core\n            if (!top.Live2D) {\n                log(' Cubism 2 Core...');\n                try {\n                    await this._loadScriptWithFallback(SDK_URLS.CUBISM2_CORE, top, 'Cubism 2 Core', 20000);\n                    log('Cubism 2 Core ');\n                }\n                catch (e) {\n                    warn('Cubism 2 Core ', e);\n                }\n            }\n            //  pixi-live2d-display\n            log(' pixi-live2d-display...');\n            await this._loadScriptWithFallback(SDK_URLS.PIXI_LIVE2D_DISPLAY, top, 'pixi-live2d-display', 25000);\n            await new Promise(r => setTimeout(r, 120));\n            const runtime = this._setRuntime(top);\n            if (!runtime) {\n                throw new Error('pixi-live2d-display ');\n            }\n            this.isLoaded = true;\n            top[this._READY_MARK] = true;\n            this.loadPromise = null;\n            log('Live2D SDK ', {\n                pixi: runtime.pixiVersion,\n            });\n            return true;\n        }\n        catch (e) {\n            error('Live2D SDK :', e);\n            top[this._READY_MARK] = false;\n            top[this._RUNTIME_KEY] = null;\n            this.isLoaded = false;\n            this.loadPromise = null;\n            return false;\n        }\n    },\n    _getPixiMajorVersion(pixi) {\n        if (!pixi || typeof pixi !== 'object')\n            return null;\n        const version = String(pixi.VERSION || '').trim();\n        if (!version)\n            return null;\n        const majorStr = version.split('.')[0];\n        const major = Number.parseInt(majorStr, 10);\n        return Number.isFinite(major) ? major : null;\n    },\n    _buildUrlCandidates(originalUrl) {\n        const url = String(originalUrl || '').trim();\n        if (!url)\n            return [];\n        const candidates = [];\n        const add = (candidate) => {\n            const value = String(candidate || '').trim();\n            if (!value)\n                return;\n            if (!candidates.includes(value))\n                candidates.push(value);\n        };\n        add(url);\n        let urlObj;\n        try {\n            urlObj = new URL(url);\n        }\n        catch {\n            return candidates;\n        }\n        const host = urlObj.hostname.toLowerCase();\n        if (host.endsWith('jsdelivr.net')) {\n            for (const h of this._JSDELIVR_HOSTS) {\n                try {\n                    const u = new URL(url);\n                    u.hostname = h;\n                    add(u.toString());\n                }\n                catch {\n                    // ignore\n                }\n            }\n            if (urlObj.pathname.startsWith('/npm/')) {\n                try {\n                    const u = new URL(url);\n                    u.hostname = 'unpkg.com';\n                    u.pathname = urlObj.pathname.replace(/^\\/npm\\//, '/');\n                    add(u.toString());\n                }\n                catch {\n                    // ignore\n                }\n            }\n            if (urlObj.pathname.startsWith('/gh/')) {\n                const rest = urlObj.pathname.slice('/gh/'.length);\n                const parts = rest.split('/').filter(Boolean);\n                if (parts.length >= 3) {\n                    const owner = parts[0];\n                    const repoWithRef = parts[1];\n                    const filePath = parts.slice(2).join('/');\n                    if (owner && repoWithRef && filePath) {\n                        const [repo, ref] = repoWithRef.split('@');\n                        const suffix = `${urlObj.search || ''}${urlObj.hash || ''}`;\n                        if (ref) {\n                            add(`https://raw.githubusercontent.com/${owner}/${repo}/${ref}/${filePath}${suffix}`);\n                        }\n                        else {\n                            add(`https://raw.githubusercontent.com/${owner}/${repo}/master/${filePath}${suffix}`);\n                            add(`https://raw.githubusercontent.com/${owner}/${repo}/main/${filePath}${suffix}`);\n                        }\n                    }\n                }\n            }\n        }\n        return candidates;\n    },\n    _hasValidCubism4Core(targetWindow) {\n        const core = targetWindow.Live2DCubismCore;\n        if (!core || typeof core !== 'object')\n            return false;\n        const hasVersion = typeof core.Version === 'function';\n        const hasMoc = typeof core.Moc === 'function' || typeof core.Moc === 'object';\n        const hasUtils = typeof core.Utils === 'object';\n        return hasVersion || hasMoc || hasUtils;\n    },\n    _loadScriptBySrc(url, targetWindow, timeoutMs = 15000) {\n        return new Promise((resolve, reject) => {\n            let timer = null;\n            try {\n                const doc = targetWindow.document;\n                const script = doc.createElement('script');\n                script.src = url;\n                script.async = true;\n                script.dataset.desktopPetSdk = 'true';\n                const cleanup = () => {\n                    script.onload = null;\n                    script.onerror = null;\n                    if (timer !== null) {\n                        targetWindow.clearTimeout(timer);\n                        timer = null;\n                    }\n                };\n                script.onload = () => {\n                    cleanup();\n                    resolve();\n                };\n                script.onerror = () => {\n                    cleanup();\n                    reject(new Error(`: ${url}`));\n                };\n                timer = targetWindow.setTimeout(() => {\n                    cleanup();\n                    reject(new Error(` (${timeoutMs}ms): ${url}`));\n                }, timeoutMs);\n                doc.head.appendChild(script);\n            }\n            catch (e) {\n                if (timer !== null) {\n                    targetWindow.clearTimeout(timer);\n                }\n                reject(e);\n            }\n        });\n    },\n    async _loadScriptWithFallback(url, targetWindow, label, timeoutMs = 15000) {\n        const candidates = this._buildUrlCandidates(url);\n        let lastError = null;\n        for (let i = 0; i < candidates.length; i++) {\n            const candidate = candidates[i];\n            try {\n                if (i > 0) {\n                    warn(`${label} :`, candidate);\n                }\n                await this._loadScriptBySrc(candidate, targetWindow, timeoutMs);\n                return candidate;\n            }\n            catch (e) {\n                lastError = e;\n            }\n        }\n        throw (lastError instanceof Error ? lastError : new Error(`${label} `));\n    },\n};\n","/**\n * \n *  jQueryUI draggable  //  LLM\n *  jQueryUI draggable \n *\n * \n * IDLE  pointerdown  PENDING\n * PENDING   >   IDLE jQueryUI\n * PENDING  longPressDelay   LONG_PRESS  IDLE\n * PENDING  pointerup  WAIT_DOUBLE\n * WAIT_DOUBLE  doubleClickWindow  pointerdown+up  DOUBLE_TAP  IDLE\n * WAIT_DOUBLE    TAP  IDLE\n */\n\nexport type GestureType = 'tap' | 'double-tap' | 'long-press';\n\nexport interface GestureEvent {\n  type: GestureType;\n  clientX: number;\n  clientY: number;\n}\n\nexport interface GestureConfig {\n  /** (ms) */\n  longPressDelay: number;\n  /** (ms) */\n  doubleClickWindow: number;\n  /** (px) */\n  moveThreshold: number;\n}\n\nconst DEFAULT_CONFIG: GestureConfig = {\n  longPressDelay: 500,\n  doubleClickWindow: 300,\n  moveThreshold: 8,\n};\n\nfunction isTouchDevice(): boolean {\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n}\n\nexport class GestureRecognizer {\n  private element: HTMLElement;\n  private config: GestureConfig;\n  private onGesture: (event: GestureEvent) => void;\n  private isDraggingCheck: () => boolean;\n\n  private state: 'idle' | 'pending' | 'wait-double' = 'idle';\n  private startPos = { x: 0, y: 0 };\n  private longPressTimer: number | null = null;\n  private doubleClickTimer: number | null = null;\n  private longPressFired = false;\n  private moved = false;\n  private destroyed = false;\n\n  private boundPointerDown: (e: PointerEvent) => void;\n  private boundPointerMove: (e: PointerEvent) => void;\n  private boundPointerUp: (e: PointerEvent) => void;\n  private boundContextMenu: (e: Event) => void;\n\n  /**\n   * @param element \n   * @param config \n   * @param onGesture \n   * @param isDraggingCheck  jQueryUI draggable \n   */\n  constructor(\n    element: HTMLElement,\n    config: Partial<GestureConfig>,\n    onGesture: (event: GestureEvent) => void,\n    isDraggingCheck: () => boolean = () => false,\n  ) {\n    this.element = element;\n    this.config = {\n      ...DEFAULT_CONFIG,\n      moveThreshold: isTouchDevice() ? 12 : 8,\n      ...config,\n    };\n    this.onGesture = onGesture;\n    this.isDraggingCheck = isDraggingCheck;\n\n    this.boundPointerDown = this.handlePointerDown.bind(this);\n    this.boundPointerMove = this.handlePointerMove.bind(this);\n    this.boundPointerUp = this.handlePointerUp.bind(this);\n    this.boundContextMenu = (e: Event) => e.preventDefault();\n\n    element.addEventListener('pointerdown', this.boundPointerDown);\n    element.addEventListener('pointermove', this.boundPointerMove);\n    element.addEventListener('pointerup', this.boundPointerUp);\n    element.addEventListener('pointercancel', this.boundPointerUp);\n    element.addEventListener('contextmenu', this.boundContextMenu);\n  }\n\n  destroy(): void {\n    this.destroyed = true;\n    this.clearAllTimers();\n    this.element.removeEventListener('pointerdown', this.boundPointerDown);\n    this.element.removeEventListener('pointermove', this.boundPointerMove);\n    this.element.removeEventListener('pointerup', this.boundPointerUp);\n    this.element.removeEventListener('pointercancel', this.boundPointerUp);\n    this.element.removeEventListener('contextmenu', this.boundContextMenu);\n  }\n\n  private handlePointerDown(_e: PointerEvent): void {\n    if (this.destroyed) return;\n\n    this.startPos = { x: _e.clientX, y: _e.clientY };\n    this.longPressFired = false;\n    this.moved = false;\n\n    if (this.state === 'wait-double') {\n      //  pointerup \n      return;\n    }\n\n    this.state = 'pending';\n    this.clearLongPressTimer();\n\n    this.longPressTimer = window.setTimeout(() => {\n      if (this.state === 'pending' && !this.moved && !this.isDraggingCheck()) {\n        this.longPressFired = true;\n        this.state = 'idle';\n        this.onGesture({\n          type: 'long-press',\n          clientX: this.startPos.x,\n          clientY: this.startPos.y,\n        });\n      }\n    }, this.config.longPressDelay);\n  }\n\n  private handlePointerMove(_e: PointerEvent): void {\n    if (this.destroyed || this.state !== 'pending') return;\n\n    const dx = _e.clientX - this.startPos.x;\n    const dy = _e.clientY - this.startPos.y;\n\n    if (Math.sqrt(dx * dx + dy * dy) > this.config.moveThreshold) {\n      //    idle jQueryUI \n      this.moved = true;\n      this.clearLongPressTimer();\n      this.state = 'idle';\n    }\n  }\n\n  private handlePointerUp(_e: PointerEvent): void {\n    if (this.destroyed) return;\n    this.clearLongPressTimer();\n\n    // jQueryUI  \n    if (this.moved || this.isDraggingCheck()) {\n      this.state = 'idle';\n      return;\n    }\n\n    //    idle\n    if (this.longPressFired) {\n      this.state = 'idle';\n      return;\n    }\n\n    if (this.state === 'wait-double') {\n      // \n      this.clearDoubleClickTimer();\n      this.state = 'idle';\n      this.onGesture({\n        type: 'double-tap',\n        clientX: _e.clientX,\n        clientY: _e.clientY,\n      });\n      return;\n    }\n\n    if (this.state === 'pending' && !this.moved) {\n      //   \n      this.state = 'wait-double';\n      const x = _e.clientX;\n      const y = _e.clientY;\n      this.doubleClickTimer = window.setTimeout(() => {\n        //   \n        this.state = 'idle';\n        this.onGesture({ type: 'tap', clientX: x, clientY: y });\n      }, this.config.doubleClickWindow);\n    }\n  }\n\n  private clearLongPressTimer(): void {\n    if (this.longPressTimer !== null) {\n      window.clearTimeout(this.longPressTimer);\n      this.longPressTimer = null;\n    }\n  }\n\n  private clearDoubleClickTimer(): void {\n    if (this.doubleClickTimer !== null) {\n      window.clearTimeout(this.doubleClickTimer);\n      this.doubleClickTimer = null;\n    }\n  }\n\n  private clearAllTimers(): void {\n    this.clearLongPressTimer();\n    this.clearDoubleClickTimer();\n  }\n}\n","import { log, warn } from '../utils/dom';\nimport { GestureRecognizer, type GestureEvent } from '../utils/gesture-recognizer';\nimport { Live2DLoader } from './loader';\n\n/**\n * Live2D PIXI \n * ?fixed ?canvas\n */\nexport const Live2DStage = {\n  app: null as any,\n  canvas: null as HTMLCanvasElement | null,\n  glContext: null as WebGLRenderingContext | WebGL2RenderingContext | null,\n  container: null as HTMLDivElement | null,\n  mountStack: [] as Array<{\n    parent: ParentNode | null;\n    nextSibling: ChildNode | null;\n    styleText: string;\n    width: number;\n    height: number;\n    onPositionChange: ((x: number, y: number) => void) | null;\n  }>,\n  mountMode: 'floating' as 'floating' | 'preview',\n  _pendingFloatingResize: null as { width: number; height: number } | null,\n  loadingOverlay: null as HTMLDivElement | null,\n  loadingText: null as HTMLDivElement | null,\n  loadingBarFill: null as HTMLDivElement | null,\n  interactionLayer: null as HTMLDivElement | null,\n  gestureRecognizer: null as GestureRecognizer | null,\n  _dragClass: 'desktop-pet-dragging',\n  _minVisiblePx: 48,\n  _interactionPaddingPx: 14,\n  _alphaHitThreshold: 10,\n  _maxPixelScanSamples: 360000,\n  _onPositionChange: null as ((x: number, y: number) => void) | null,\n  _boundWindowResize: null as (() => void) | null,\n  _interactionSyncTimer: null as number | null,\n  _pixelReadBuffer: null as Uint8Array | null,\n  _lastClampLogAt: 0,\n\n  _clampPosition(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    minVisible: number = 0,\n  ): { x: number; y: number; clamped: boolean } {\n    const top = this._top();\n    const viewportWidth = top.innerWidth || top.document.documentElement.clientWidth || width;\n    const viewportHeight = top.innerHeight || top.document.documentElement.clientHeight || height;\n\n    const safeWidth = Number.isFinite(width) && width > 0 ? width : viewportWidth;\n    const safeHeight = Number.isFinite(height) && height > 0 ? height : viewportHeight;\n    const safeMinVisibleX = Math.max(0, Math.min(minVisible, safeWidth, viewportWidth));\n    const safeMinVisibleY = Math.max(0, Math.min(minVisible, safeHeight, viewportHeight));\n\n    const minX = Math.min(0, -safeWidth + safeMinVisibleX);\n    const minY = Math.min(0, -safeHeight + safeMinVisibleY);\n    const maxX = Math.max(0, viewportWidth - safeMinVisibleX);\n    const maxY = Math.max(0, viewportHeight - safeMinVisibleY);\n    const safeX = Number.isFinite(x) ? x : 0;\n    const safeY = Number.isFinite(y) ? y : 0;\n    const clampedX = Math.min(Math.max(safeX, minX), maxX);\n    const clampedY = Math.min(Math.max(safeY, minY), maxY);\n    return { x: clampedX, y: clampedY, clamped: clampedX !== safeX || clampedY !== safeY };\n  },\n\n  _shouldClampCurrentPosition(): boolean {\n    if (!this.container) return false;\n    if (this.mountMode === 'preview') return false;\n\n    //  right/bottom ?resize ?left/top\n    const hasCustom = this.container.style.right === 'auto' || this.container.style.bottom === 'auto';\n    const hasExplicitLeftTop = !!this.container.style.left || !!this.container.style.top;\n    return hasCustom || hasExplicitLeftTop;\n  },\n\n  _getContainerRectSize(options: { width: number; height: number }): { width: number; height: number } {\n    const rect = this.container?.getBoundingClientRect?.();\n    return {\n      width: rect?.width && rect.width > 0 ? rect.width : options.width,\n      height: rect?.height && rect.height > 0 ? rect.height : options.height,\n    };\n  },\n\n  _isRectFullyOutsideViewport(rect: DOMRect): boolean {\n    const top = this._top();\n    const viewportWidth = top.innerWidth || top.document.documentElement.clientWidth || 0;\n    const viewportHeight = top.innerHeight || top.document.documentElement.clientHeight || 0;\n    if (viewportWidth <= 0 || viewportHeight <= 0) return false;\n    return rect.right <= 0 || rect.bottom <= 0 || rect.left >= viewportWidth || rect.top >= viewportHeight;\n  },\n\n  _getVisibleAreaRatio(rect: DOMRect, viewportWidth: number, viewportHeight: number): number {\n    const rectWidth = Number.isFinite(rect.width) ? rect.width : 0;\n    const rectHeight = Number.isFinite(rect.height) ? rect.height : 0;\n    if (rectWidth <= 0 || rectHeight <= 0) return 1;\n    if (viewportWidth <= 0 || viewportHeight <= 0) return 1;\n\n    const visibleLeft = Math.max(0, rect.left);\n    const visibleTop = Math.max(0, rect.top);\n    const visibleRight = Math.min(viewportWidth, rect.right);\n    const visibleBottom = Math.min(viewportHeight, rect.bottom);\n    const visibleWidth = Math.max(0, visibleRight - visibleLeft);\n    const visibleHeight = Math.max(0, visibleBottom - visibleTop);\n    const visibleArea = visibleWidth * visibleHeight;\n    const totalArea = rectWidth * rectHeight;\n    if (totalArea <= 0) return 1;\n\n    return Math.max(0, Math.min(1, visibleArea / totalArea));\n  },\n\n  _clampPositionByAxis(value: number, size: number, viewportSize: number, minVisible: number): number {\n    const safeSize = Number.isFinite(size) && size > 0 ? size : viewportSize;\n    const safeViewport = Number.isFinite(viewportSize) && viewportSize > 0 ? viewportSize : safeSize;\n    const safeMinVisible = Math.max(0, Math.min(minVisible, safeSize, safeViewport));\n    const min = Math.min(0, -safeSize + safeMinVisible);\n    const max = Math.max(0, safeViewport - safeMinVisible);\n    const safeValue = Number.isFinite(value) ? value : 0;\n    return Math.min(Math.max(safeValue, min), max);\n  },\n\n  _clampContainerToViewport(options: { width: number; height: number }, reason: string): void {\n    if (!this.container) return;\n    const rect = this.container.getBoundingClientRect();\n    const size = this._getContainerRectSize(options);\n    const top = this._top();\n    const viewportWidth = top.innerWidth || top.document.documentElement.clientWidth || size.width;\n    const viewportHeight = top.innerHeight || top.document.documentElement.clientHeight || size.height;\n    const shouldClamp = this._shouldClampCurrentPosition();\n    const fullyOutside = this._isRectFullyOutsideViewport(rect);\n    const visibleRatio = this._getVisibleAreaRatio(rect, viewportWidth, viewportHeight);\n    const isResizeClamp = reason.includes('resize');\n    const forceFullVisible = (fullyOutside || isResizeClamp) && visibleRatio < 0.72;\n    if (!shouldClamp && !fullyOutside && !forceFullVisible) return;\n\n    const minVisibleX = forceFullVisible\n      ? Math.min(size.width, viewportWidth)\n      : Math.max(0, Math.min(this._minVisiblePx, size.width, viewportWidth));\n    const minVisibleY = forceFullVisible\n      ? Math.min(size.height, viewportHeight)\n      : Math.max(0, Math.min(this._minVisiblePx, size.height, viewportHeight));\n\n    const nextX = this._clampPositionByAxis(rect.left, size.width, viewportWidth, minVisibleX);\n    const nextY = this._clampPositionByAxis(rect.top, size.height, viewportHeight, minVisibleY);\n    const hasPositionChange = Math.abs(nextX - rect.left) > 0.5 || Math.abs(nextY - rect.top) > 0.5;\n    if (!hasPositionChange) return;\n\n    this.container.style.left = `${nextX}px`;\n    this.container.style.top = `${nextY}px`;\n    this.container.style.right = 'auto';\n    this.container.style.bottom = 'auto';\n\n    const now = Date.now();\n    if (now - this._lastClampLogAt > 600) {\n      this._lastClampLogAt = now;\n      log(`(${reason})`, {\n        from: { x: rect.left, y: rect.top },\n        to: { x: nextX, y: nextY },\n        fullyOutside,\n        visibleRatio,\n        forceFullVisible,\n      });\n    }\n\n    this._onPositionChange?.(nextX, nextY);\n  },\n\n  _bindWindowResize(options: { width: number; height: number }): void {\n    const top = this._top();\n    this._unbindWindowResize();\n\n    this._boundWindowResize = () => {\n      this._clampContainerToViewport(options, 'window-resize');\n    };\n\n    try {\n      top.addEventListener('resize', this._boundWindowResize, { passive: true });\n    } catch (e) {\n      warn(' window.resize ', e);\n      this._boundWindowResize = null;\n    }\n  },\n\n  _unbindWindowResize(): void {\n    const top = this._top();\n    if (!this._boundWindowResize) return;\n    try {\n      top.removeEventListener('resize', this._boundWindowResize);\n    } catch {\n      // ignore\n    } finally {\n      this._boundWindowResize = null;\n    }\n  },\n\n  /** ?*/\n  _top(): Window {\n    return window.parent ?? window;\n  },\n\n  /**  PIXI */\n  _getPIXI(): any {\n    const top = this._top();\n    return Live2DLoader.getPixi(top);\n  },\n\n  _measureOpaqueBoundsFromCanvas(\n    containerWidth: number,\n    containerHeight: number,\n  ): { left: number; top: number; width: number; height: number } | null {\n    const gl = this.glContext;\n    if (!gl) return null;\n\n    const bufferWidth = gl.drawingBufferWidth;\n    const bufferHeight = gl.drawingBufferHeight;\n    if (bufferWidth <= 0 || bufferHeight <= 0) return null;\n\n    const byteLength = bufferWidth * bufferHeight * 4;\n    if (!this._pixelReadBuffer || this._pixelReadBuffer.length !== byteLength) {\n      this._pixelReadBuffer = new Uint8Array(byteLength);\n    }\n    const pixels = this._pixelReadBuffer;\n\n    try {\n      gl.readPixels(0, 0, bufferWidth, bufferHeight, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    } catch {\n      return null;\n    }\n\n    const scanStep = Math.max(1, Math.floor(Math.sqrt((bufferWidth * bufferHeight) / this._maxPixelScanSamples)));\n    const alphaThreshold = Math.max(0, Math.min(255, this._alphaHitThreshold));\n\n    let minX = bufferWidth;\n    let minY = bufferHeight;\n    let maxX = -1;\n    let maxY = -1;\n\n    for (let y = 0; y < bufferHeight; y += scanStep) {\n      const rowOffset = y * bufferWidth * 4;\n      for (let x = 0; x < bufferWidth; x += scanStep) {\n        const alpha = pixels[rowOffset + x * 4 + 3];\n        if (alpha <= alphaThreshold) continue;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n      }\n    }\n\n    if (maxX < 0 || maxY < 0) return null;\n\n    if (scanStep > 1) {\n      maxX = Math.min(bufferWidth - 1, maxX + scanStep);\n      maxY = Math.min(bufferHeight - 1, maxY + scanStep);\n    }\n\n    const scaleX = containerWidth / bufferWidth;\n    const scaleY = containerHeight / bufferHeight;\n    const left = Math.max(0, Math.floor(minX * scaleX));\n    const right = Math.min(Math.ceil(containerWidth), Math.ceil((maxX + 1) * scaleX));\n    const top = Math.max(0, Math.floor(containerHeight - (maxY + 1) * scaleY));\n    const bottom = Math.min(Math.ceil(containerHeight), Math.ceil(containerHeight - minY * scaleY));\n    const width = right - left;\n    const height = bottom - top;\n    if (width < 8 || height < 8) return null;\n\n    return { left, top, width, height };\n  },\n\n  _syncInteractionLayerBounds(): void {\n    if (!this.container || !this.interactionLayer) return;\n\n    const layer = this.interactionLayer;\n    const container = this.container;\n    const disableLayer = () => {\n      layer.style.left = '0px';\n      layer.style.top = '0px';\n      layer.style.width = '100%';\n      layer.style.height = '100%';\n      layer.style.pointerEvents = 'none';\n      layer.style.cursor = 'default';\n    };\n\n    if (this.mountMode === 'preview') {\n      disableLayer();\n      return;\n    }\n\n    const rect = container.getBoundingClientRect();\n    const containerWidth =\n      rect.width > 0 ? rect.width : Number.parseFloat(String(container.style.width || '').replace('px', ''));\n    const containerHeight =\n      rect.height > 0 ? rect.height : Number.parseFloat(String(container.style.height || '').replace('px', ''));\n\n    if (!Number.isFinite(containerWidth) || !Number.isFinite(containerHeight) || containerWidth <= 0 || containerHeight <= 0) {\n      return;\n    }\n\n    const applyBounds = (left: number, top: number, width: number, height: number): boolean => {\n      const padding = Math.max(0, this._interactionPaddingPx);\n      const x1 = Math.max(0, Math.floor(left - padding));\n      const y1 = Math.max(0, Math.floor(top - padding));\n      const x2 = Math.min(Math.ceil(containerWidth), Math.ceil(left + width + padding));\n      const y2 = Math.min(Math.ceil(containerHeight), Math.ceil(top + height + padding));\n      const w = x2 - x1;\n      const h = y2 - y1;\n      if (w < 16 || h < 16) return false;\n\n      layer.style.left = `${x1}px`;\n      layer.style.top = `${y1}px`;\n      layer.style.width = `${w}px`;\n      layer.style.height = `${h}px`;\n      layer.style.pointerEvents = 'auto';\n      layer.style.cursor = 'pointer';\n      return true;\n    };\n\n    const model = this.app?.stage?.children?.[0] as any;\n    if (!model) {\n      disableLayer();\n      return;\n    }\n\n    const alphaBounds = this._measureOpaqueBoundsFromCanvas(containerWidth, containerHeight);\n    if (alphaBounds) {\n      const suspiciouslyHuge =\n        alphaBounds.width >= containerWidth * 0.95 && alphaBounds.height >= containerHeight * 0.95;\n      if (!suspiciouslyHuge && applyBounds(alphaBounds.left, alphaBounds.top, alphaBounds.width, alphaBounds.height)) {\n        return;\n      }\n    }\n\n    if (typeof model.getBounds === 'function') {\n      try {\n        const bounds = model.getBounds();\n        const x = Number(bounds?.x);\n        const y = Number(bounds?.y);\n        const width = Number(bounds?.width);\n        const height = Number(bounds?.height);\n        const isValid =\n          Number.isFinite(x) &&\n          Number.isFinite(y) &&\n          Number.isFinite(width) &&\n          Number.isFinite(height) &&\n          width > 0 &&\n          height > 0;\n        if (isValid) {\n          const suspiciouslyHuge = width >= containerWidth * 0.95 && height >= containerHeight * 0.95;\n          if (!suspiciouslyHuge && applyBounds(x, y, width, height)) {\n            return;\n          }\n        }\n      } catch {\n        // ignore\n      }\n    }\n\n    const fallbackWidth = Math.max(80, Math.round(containerWidth * 0.62));\n    const fallbackHeight = Math.max(120, Math.round(containerHeight * 0.88));\n    const fallbackLeft = Math.max(0, Math.round((containerWidth - fallbackWidth) / 2));\n    const fallbackTop = Math.max(0, Math.round(containerHeight - fallbackHeight));\n    if (!applyBounds(fallbackLeft, fallbackTop, fallbackWidth, fallbackHeight)) {\n      disableLayer();\n      return;\n    }\n  },\n\n  _startInteractionSyncTimer(): void {\n    this._stopInteractionSyncTimer();\n    this._syncInteractionLayerBounds();\n    this._interactionSyncTimer = window.setInterval(() => {\n      this._syncInteractionLayerBounds();\n    }, 250);\n  },\n\n  _stopInteractionSyncTimer(): void {\n    if (this._interactionSyncTimer === null) return;\n    window.clearInterval(this._interactionSyncTimer);\n    this._interactionSyncTimer = null;\n  },\n\n  _enablePointerDrag(\n    $container: JQuery<HTMLElement>,\n    options: {\n      width: number;\n      height: number;\n      onPositionChange?: (x: number, y: number) => void;\n    },\n  ): void {\n    if (!this.container) return;\n\n    const top = this._top();\n    const container = this.container;\n    const dragTarget = this.interactionLayer ?? container;\n    const onPositionChange = options.onPositionChange;\n\n    const state = {\n      pointerId: null as number | null,\n      startClientX: 0,\n      startClientY: 0,\n      startLeft: 0,\n      startTop: 0,\n      dragging: false,\n    };\n\n    const getRectLeftTop = () => {\n      const rect = container.getBoundingClientRect();\n      return { left: rect.left, top: rect.top };\n    };\n\n    const getRectSize = () => {\n      const rect = container.getBoundingClientRect();\n      return {\n        width: rect.width > 0 ? rect.width : options.width,\n        height: rect.height > 0 ? rect.height : options.height,\n      };\n    };\n\n    const cleanup = () => {\n      state.pointerId = null;\n      state.dragging = false;\n      $container.removeClass(this._dragClass);\n    };\n\n    dragTarget.addEventListener('pointerdown', (e: PointerEvent) => {\n      if (e.button !== 0) return;\n      if (state.pointerId !== null) return;\n\n      state.pointerId = e.pointerId;\n      state.startClientX = e.clientX;\n      state.startClientY = e.clientY;\n\n      const { left, top } = getRectLeftTop();\n      state.startLeft = left;\n      state.startTop = top;\n\n      try {\n        dragTarget.setPointerCapture(e.pointerId);\n      } catch {\n        // ignore\n      }\n    });\n\n    dragTarget.addEventListener('pointermove', (e: PointerEvent) => {\n      if (state.pointerId === null || e.pointerId !== state.pointerId) return;\n\n      const dx = e.clientX - state.startClientX;\n      const dy = e.clientY - state.startClientY;\n      const dist = Math.sqrt(dx * dx + dy * dy);\n\n      if (!state.dragging) {\n        if (dist < 8) return;\n        state.dragging = true;\n        $container.addClass(this._dragClass);\n\n        container.style.left = `${state.startLeft}px`;\n        container.style.top = `${state.startTop}px`;\n        container.style.right = 'auto';\n        container.style.bottom = 'auto';\n      }\n\n      const clamped = this._clampPosition(\n        state.startLeft + dx,\n        state.startTop + dy,\n        getRectSize().width,\n        getRectSize().height,\n        this._minVisiblePx,\n      );\n\n      container.style.left = `${clamped.x}px`;\n      container.style.top = `${clamped.y}px`;\n      container.style.right = 'auto';\n      container.style.bottom = 'auto';\n      e.preventDefault();\n    }, { passive: false });\n\n    const onPointerUp = (e: PointerEvent) => {\n      if (state.pointerId === null || e.pointerId !== state.pointerId) return;\n\n      const dragging = state.dragging;\n      cleanup();\n\n      if (!dragging) return;\n\n      const left = parseFloat(container.style.left || '0');\n      const topPx = parseFloat(container.style.top || '0');\n      const size = getRectSize();\n      const clamped = this._clampPosition(left, topPx, size.width, size.height, this._minVisiblePx);\n\n      container.style.left = `${clamped.x}px`;\n      container.style.top = `${clamped.y}px`;\n      container.style.right = 'auto';\n      container.style.bottom = 'auto';\n\n      this._onPositionChange = onPositionChange ?? this._onPositionChange;\n      this._onPositionChange?.(clamped.x, clamped.y);\n\n      try {\n        dragTarget.releasePointerCapture(e.pointerId);\n      } catch {\n        // ignore\n      }\n\n      // iOS ?pointerup  selection\n      try {\n        top.getSelection?.()?.removeAllRanges?.();\n      } catch {\n        // ignore\n      }\n    };\n\n    dragTarget.addEventListener('pointerup', onPointerUp);\n    dragTarget.addEventListener('pointercancel', onPointerUp);\n  },\n\n  _ensureLoadingOverlay(): boolean {\n    if (!this.container) return false;\n\n    const overlay = this.loadingOverlay;\n    const overlayAlive = !!overlay && !!overlay.ownerDocument?.documentElement?.contains(overlay);\n    if (overlayAlive) return true;\n\n    this.hideLoadingProgress();\n\n    const doc = this.container.ownerDocument;\n    const panel = doc.createElement('div');\n    panel.style.cssText = `\n      position: absolute;\n      left: 8px;\n      right: 8px;\n      bottom: 8px;\n      padding: 8px 10px;\n      border-radius: 8px;\n      background: rgba(15, 23, 42, 0.72);\n      backdrop-filter: blur(3px);\n      pointer-events: none;\n      z-index: 5;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\n      color: #e2e8f0;\n      font-size: 12px;\n      line-height: 1.4;\n    `;\n\n    const text = doc.createElement('div');\n    text.style.cssText = 'margin-bottom: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;';\n    text.textContent = ' (0%)';\n\n    const track = doc.createElement('div');\n    track.style.cssText = 'width: 100%; height: 6px; border-radius: 999px; background: rgba(148, 163, 184, 0.35); overflow: hidden;';\n\n    const fill = doc.createElement('div');\n    fill.style.cssText = 'height: 100%; width: 0%; border-radius: 999px; background: linear-gradient(90deg, #60a5fa, #22d3ee); transition: width 0.2s ease;';\n\n    track.appendChild(fill);\n    panel.appendChild(text);\n    panel.appendChild(track);\n    this.container.appendChild(panel);\n\n    this.loadingOverlay = panel;\n    this.loadingText = text;\n    this.loadingBarFill = fill;\n    return true;\n  },\n\n  showLoadingProgress(percent: number, message: string): void {\n    if (!this._ensureLoadingOverlay()) return;\n\n    const safePercent = Math.max(0, Math.min(100, Math.round(percent)));\n    if (this.loadingText) {\n      this.loadingText.textContent = `${message} (${safePercent}%)`;\n    }\n    if (this.loadingBarFill) {\n      this.loadingBarFill.style.width = `${safePercent}%`;\n    }\n  },\n\n  hideLoadingProgress(): void {\n    if (this.loadingOverlay) {\n      try {\n        this.loadingOverlay.remove();\n      } catch (e) {\n        warn('Failed to remove loading progress overlay', e);\n      }\n    }\n    this.loadingOverlay = null;\n    this.loadingText = null;\n    this.loadingBarFill = null;\n  },\n\n  /**\n   * ?PIXI Application\n   */\n  create(options: {\n    width: number;\n    height: number;\n    position: { x: number; y: number };\n    scale: number;\n    onPositionChange?: (x: number, y: number) => void;\n    onScaleChange?: (scale: number) => void;\n    onTap?: (e: GestureEvent) => void;\n    onDoubleTap?: (e: GestureEvent) => void;\n    onLongPress?: (e: GestureEvent) => void;\n  }): boolean {\n    const top = this._top();\n    const PIXI = this._getPIXI();\n    if (!PIXI) {\n      warn('PIXI ');\n      return false;\n    }\n\n    // \n    this.destroy();\n    this._onPositionChange = options.onPositionChange ?? null;\n    this._bindWindowResize({ width: options.width, height: options.height });\n    const stale = top.document.getElementById('desktop-pet-stage');\n    if (stale) stale.remove();\n\n    //  div\n    this.container = top.document.createElement('div');\n    this.container.id = 'desktop-pet-stage';\n    this.container.style.cssText = `\n      position: fixed;\n      right: 20px;\n      bottom: 20px;\n      width: ${options.width}px;\n      height: ${options.height}px;\n      overflow: hidden;\n      z-index: 10000;\n      pointer-events: none;\n      cursor: default;\n      touch-action: none;\n    `;\n\n    // Apply persisted position.\n    const hasSavedPosition =\n      Number.isFinite(options.position.x) &&\n      Number.isFinite(options.position.y) &&\n      !(options.position.x === -1 && options.position.y === -1);\n\n    if (hasSavedPosition) {\n      const clamped = this._clampPosition(\n        options.position.x,\n        options.position.y,\n        options.width,\n        options.height,\n        this._minVisiblePx,\n      );\n\n      this.container.style.left = `${clamped.x}px`;\n      this.container.style.top = `${clamped.y}px`;\n      this.container.style.right = 'auto';\n      this.container.style.bottom = 'auto';\n\n      if (clamped.clamped) {\n        log('', {\n          from: options.position,\n          to: { x: clamped.x, y: clamped.y },\n        });\n        options.onPositionChange?.(clamped.x, clamped.y);\n      }\n    }\n\n    top.document.body.appendChild(this.container);\n\n    //  canvas\n    this.canvas = top.document.createElement('canvas');\n    this.canvas.style.cssText = 'width: 100%; height: 100%; pointer-events: none;';\n    this.container.appendChild(this.canvas);\n\n    this.interactionLayer = top.document.createElement('div');\n    this.interactionLayer.className = 'desktop-pet-interaction-layer';\n    this.interactionLayer.style.cssText = `\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: auto;\n      cursor: pointer;\n      touch-action: none;\n      z-index: 4;\n    `;\n    this.container.appendChild(this.interactionLayer);\n\n    //  PIXI Application\n    const dpr = top.devicePixelRatio || 1;\n    this.canvas.width = Math.floor(options.width * dpr);\n    this.canvas.height = Math.floor(options.height * dpr);\n\n    const glContext =\n      this.canvas.getContext('webgl2', {\n        alpha: true,\n        antialias: true,\n        stencil: true,\n        depth: true,\n        preserveDrawingBuffer: true,\n        premultipliedAlpha: true,\n      }) ||\n      this.canvas.getContext('webgl', {\n        alpha: true,\n        antialias: true,\n        stencil: true,\n        depth: true,\n        preserveDrawingBuffer: true,\n        premultipliedAlpha: true,\n      });\n\n    if (!glContext) {\n      warn('WebGL is unavailable');\n      return false;\n    }\n    this.glContext = glContext as WebGLRenderingContext | WebGL2RenderingContext;\n    this._pixelReadBuffer = null;\n\n    try {\n      const attrs = (glContext as WebGLRenderingContext | WebGL2RenderingContext).getContextAttributes?.();\n      if (attrs && attrs.stencil === false) {\n        warn('Current WebGL context has no stencil buffer; mask rendering may be abnormal');\n      }\n    } catch {\n      // ignore\n    }\n\n    this.app = new PIXI.Application({\n      view: this.canvas,\n      context: glContext,\n      backgroundAlpha: 0,\n      autoStart: true,\n      width: options.width,\n      height: options.height,\n      resolution: dpr,\n      autoDensity: true,\n      antialias: true,\n    });\n\n    //  jQueryUI \n    const $container = $(this.container);\n    const draggable = ($container as any).draggable;\n    if (typeof draggable === 'function') {\n      try {\n        $container.draggable({\n          handle: '.desktop-pet-interaction-layer',\n          start: (_e: any, ui: any) => {\n            $container.addClass(this._dragClass);\n\n            const rect = this.container?.getBoundingClientRect?.();\n            if (!rect) return;\n\n            this.container!.style.left = `${rect.left}px`;\n            this.container!.style.top = `${rect.top}px`;\n            this.container!.style.right = 'auto';\n            this.container!.style.bottom = 'auto';\n\n            if (ui?.position) {\n              ui.position.left = rect.left;\n              ui.position.top = rect.top;\n            }\n          },\n          drag: (_e: any, ui: any) => {\n            const rect = this.container?.getBoundingClientRect?.();\n            const width = rect?.width && rect.width > 0 ? rect.width : options.width;\n            const height = rect?.height && rect.height > 0 ? rect.height : options.height;\n\n            const clamped = this._clampPosition(ui.position.left, ui.position.top, width, height, this._minVisiblePx);\n            ui.position.left = clamped.x;\n            ui.position.top = clamped.y;\n          },\n          stop: (_e: any, ui: any) => {\n            $container.removeClass(this._dragClass);\n\n            const rect = this.container?.getBoundingClientRect?.();\n            const width = rect?.width && rect.width > 0 ? rect.width : options.width;\n            const height = rect?.height && rect.height > 0 ? rect.height : options.height;\n\n            const clamped = this._clampPosition(\n              ui.position.left,\n              ui.position.top,\n              width,\n              height,\n              this._minVisiblePx,\n            );\n\n            this.container!.style.left = `${clamped.x}px`;\n            this.container!.style.top = `${clamped.y}px`;\n            this.container!.style.right = 'auto';\n            this.container!.style.bottom = 'auto';\n\n            this._onPositionChange?.(clamped.x, clamped.y);\n          },\n        });\n      } catch (e) {\n        warn('Failed to initialize jQueryUI draggable, fallback to native pointer drag', e);\n        this._enablePointerDrag($container, {\n          width: options.width,\n          height: options.height,\n          onPositionChange: options.onPositionChange,\n        });\n      }\n    } else {\n      warn('jQueryUI draggable not found, fallback to native pointer drag');\n      this._enablePointerDrag($container, {\n        width: options.width,\n        height: options.height,\n        onPositionChange: options.onPositionChange,\n      });\n    }\n\n    // \n    const interactionTarget = this.interactionLayer ?? this.container;\n    interactionTarget.addEventListener('wheel', (e: WheelEvent) => {\n      e.preventDefault();\n      const delta = e.deltaY > 0 ? -0.05 : 0.05;\n      const newScale = Math.max(0.1, Math.min(3, options.scale + delta));\n      options.scale = newScale;\n      options.onScaleChange?.(newScale);\n    }, { passive: false });\n\n    // Gesture recognizer (replaces raw click handler).\n    this.gestureRecognizer = new GestureRecognizer(\n      interactionTarget,\n      {},\n      (event: GestureEvent) => {\n        switch (event.type) {\n          case 'tap':\n            options.onTap?.(event);\n            break;\n          case 'double-tap':\n            options.onDoubleTap?.(event);\n            break;\n          case 'long-press':\n            options.onLongPress?.(event);\n            break;\n        }\n      },\n      () => $container.hasClass('ui-draggable-dragging') || $container.hasClass(this._dragClass),\n    );\n    this._startInteractionSyncTimer();\n\n    log('Live2D ');\n    return true;\n  },\n\n  /**\n   *  PIXI Application ?stage\n   */\n  getStage(): any {\n    return this.app?.stage;\n  },\n\n  /**\n   * \n   */\n  isPreviewMounted(): boolean {\n    return this.mountMode === 'preview';\n  },\n\n  pushMount(mountEl: HTMLElement | null): boolean {\n    if (!this.container || !this.app || !this.canvas) return false;\n    if (!mountEl || !mountEl.isConnected) return false;\n\n    const top = this._top();\n\n    const rect = this.container.getBoundingClientRect?.();\n    const width =\n      rect?.width && rect.width > 0\n        ? Math.round(rect.width)\n        : Number(String(this.container.style.width || '').replace('px', '')) || 1;\n    const height =\n      rect?.height && rect.height > 0\n        ? Math.round(rect.height)\n        : Number(String(this.container.style.height || '').replace('px', '')) || 1;\n\n    this.mountStack.push({\n      parent: this.container.parentNode,\n      nextSibling: this.container.nextSibling,\n      styleText: this.container.style.cssText,\n      width,\n      height,\n      onPositionChange: this._onPositionChange,\n    });\n\n    try {\n      const pos = top.getComputedStyle(mountEl).position;\n      if (pos === 'static') {\n        mountEl.style.position = 'relative';\n      }\n    } catch {\n      // ignore\n    }\n\n    // \n    this._onPositionChange = null;\n    this._unbindWindowResize();\n\n    try {\n      mountEl.appendChild(this.container);\n    } catch {\n      return false;\n    }\n\n    this.mountMode = 'preview';\n    this.container.style.cssText = `\n      position: absolute;\n      inset: 0;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      z-index: 1;\n      pointer-events: none;\n      cursor: default;\n      touch-action: none;\n    `;\n    if (this.interactionLayer) {\n      this.interactionLayer.style.left = '0px';\n      this.interactionLayer.style.top = '0px';\n      this.interactionLayer.style.width = '100%';\n      this.interactionLayer.style.height = '100%';\n      this.interactionLayer.style.pointerEvents = 'none';\n      this.interactionLayer.style.cursor = 'default';\n    }\n\n    try {\n      const $container = $(this.container);\n      const draggable = ($container as any).draggable;\n      if (typeof draggable === 'function') {\n        $container.draggable('disable');\n      }\n    } catch {\n      // ignore\n    }\n\n    return true;\n  },\n\n  popMount(): { width: number; height: number } | null {\n    if (!this.container || !this.app || !this.canvas) return null;\n    const entry = this.mountStack.pop();\n    if (!entry) return null;\n\n    try {\n      const parent = entry.parent;\n      if (parent) {\n        if (entry.nextSibling && entry.nextSibling.parentNode === parent) {\n          parent.insertBefore(this.container, entry.nextSibling);\n        } else {\n          parent.appendChild(this.container);\n        }\n      } else {\n        this._top().document.body.appendChild(this.container);\n      }\n    } catch {\n      // ignore\n    }\n\n    this.container.style.cssText = entry.styleText;\n    this._onPositionChange = entry.onPositionChange;\n    this.mountMode = this.mountStack.length > 0 ? 'preview' : 'floating';\n    this._syncInteractionLayerBounds();\n\n    try {\n      const $container = $(this.container);\n      const draggable = ($container as any).draggable;\n      if (typeof draggable === 'function') {\n        $container.draggable('enable');\n      }\n    } catch {\n      // ignore\n    }\n\n    //  resize clamp\n    this._bindWindowResize({ width: entry.width, height: entry.height });\n\n    const restore = this._pendingFloatingResize ?? { width: entry.width, height: entry.height };\n    this._pendingFloatingResize = null;\n    this.resize(restore.width, restore.height);\n\n    return restore;\n  },\n\n  /**\n   * ?popMount ?   */\n  resizeFloating(width: number, height: number): void {\n    if (this.mountMode === 'preview') {\n      this._pendingFloatingResize = { width, height };\n      return;\n    }\n\n    if (this.container) {\n      this.container.style.width = `${width}px`;\n      this.container.style.height = `${height}px`;\n      this._clampContainerToViewport({ width, height }, 'stage-resize');\n      this._syncInteractionLayerBounds();\n    }\n    if (this.app) {\n      try {\n        this.app.renderer.resize(width, height);\n      } catch (e) {\n        warn('renderer.resize ', e);\n      }\n    }\n  },\n\n  /**\n   *  width/height ?   */\n  resizePreview(width: number, height: number): void {\n    if (this.mountMode !== 'preview') return;\n    if (!this.app) return;\n    try {\n      this.app.renderer.resize(width, height);\n      this._syncInteractionLayerBounds();\n    } catch (e) {\n      warn('renderer.resize ', e);\n    }\n  },\n\n  /**\n   *  resizeFloating?   */\n  resize(width: number, height: number): void {\n    this.resizeFloating(width, height);\n  },\n\n  /**\n   * ?   */\n  destroy(): void {\n    this.hideLoadingProgress();\n    this._unbindWindowResize();\n    this._stopInteractionSyncTimer();\n    this.mountStack = [];\n    this.mountMode = 'floating';\n    this._pendingFloatingResize = null;\n\n    if (this.gestureRecognizer) {\n      this.gestureRecognizer.destroy();\n      this.gestureRecognizer = null;\n    }\n\n    if (this.app) {\n      try {\n        this.app.destroy(true);\n      } catch (e) {\n        warn('Failed to destroy PIXI Application', e);\n      }\n      this.app = null;\n    }\n    if (this.container) {\n      try {\n        this.container.remove();\n      } catch (e) {\n        warn('', e);\n      }\n      this.container = null;\n    }\n    this.interactionLayer = null;\n    this.canvas = null;\n    this.glContext = null;\n    this._pixelReadBuffer = null;\n  },\n};\n\r\n","import type { EmotionTag } from '../core/constants';\nimport type { EmotionMotionOverride } from '../core/emotion';\n\nexport const EXPRESSION_LIVE2D_MAP: Record<\n  EmotionTag,\n  {\n    expressions: string[];\n    motions: string[];\n  }\n> = {\n  : {\n    expressions: ['normal', 'default', 'neutral', 'idle', 'base'],\n    motions: ['idle', 'normal', 'wait', 'default', 'stand'],\n  },\n  : {\n    expressions: ['smile', 'happy', 'joy', 'glad', 'pleased'],\n    motions: ['happy', 'smile', 'joy', 'weixiao', 'xiao', ''],\n  },\n  : {\n    expressions: ['angry', 'anger', 'mad', 'rage', 'annoyed'],\n    motions: ['angry', 'rage', 'mad', 'shengqi', 'duqi', ''],\n  },\n  : {\n    expressions: ['sad', 'sorrow', 'cry', 'upset', 'depressed'],\n    motions: ['sad', 'cry', 'sorrow', 'nanguo', 'leiw', ''],\n  },\n  : {\n    expressions: ['surprised', 'shock', 'amazed', 'wow', 'astonished'],\n    motions: ['surprised', 'shock', 'amazed', 'jingya', 'jingxi', ''],\n  },\n  : {\n    expressions: ['smirk', 'mock', 'sneer', 'tease', 'sarcastic'],\n    motions: ['mock', 'tease', 'tiaoxi', ''],\n  },\n  : {\n    expressions: ['shy', 'blush', 'embarrassed', 'bashful', 'timid'],\n    motions: ['shy', 'embarrassed', 'blush', 'haixiu', 'shame', ''],\n  },\n  : {\n    expressions: ['think', 'ponder', 'confused', 'wonder', 'curious'],\n    motions: ['think', 'ponder', 'wonder', 'sikao', ''],\n  },\n  : {\n    expressions: ['laugh', 'lol', 'haha', 'giggle', 'rofl'],\n    motions: ['laugh', 'giggle', 'haha', 'daxiao', 'oowarai', ''],\n  },\n  : {\n    expressions: ['playful', 'wink', 'silly', 'fun', 'mischievous'],\n    motions: ['playful', 'wink', 'fun', 'gaoguai', 'silly', ''],\n  },\n};\n\nfunction uniquePush(list: string[], seen: Set<string>, value: unknown): void {\n  const normalized = String(value ?? '').trim();\n  if (!normalized || seen.has(normalized)) return;\n  seen.add(normalized);\n  list.push(normalized);\n}\n\nfunction uniquePushAllowEmpty(list: string[], seen: Set<string>, value: unknown): void {\n  const raw = String(value ?? '');\n  const normalized = raw.trim();\n  if (!normalized && raw !== '') return;\n  const finalValue = normalized || '';\n  if (seen.has(finalValue)) return;\n  seen.add(finalValue);\n  list.push(finalValue);\n}\n\nexport type Live2DMotionEntry = {\n  group: string;\n  index: number;\n  name: string;\n};\n\nfunction uniqueMotionPush(list: Live2DMotionEntry[], seen: Set<string>, entry: Live2DMotionEntry): void {\n  const group = String(entry.group ?? '');\n  const index = Number.isFinite(entry.index) ? Math.max(0, Math.floor(entry.index)) : 0;\n  const name = String(entry.name ?? '').trim();\n  if (!name) return;\n  const key = `${group}#${index}#${name.toLowerCase()}`;\n  if (seen.has(key)) return;\n  seen.add(key);\n  list.push({ group, index, name });\n}\n\nfunction normalizeFileStem(input: unknown): string {\n  const raw = String(input ?? '').trim();\n  if (!raw) return '';\n\n  const noHash = raw.split('#')[0];\n  const noQuery = noHash.split('?')[0];\n  const filePart = noQuery.split('/').pop() || noQuery;\n  let decoded = filePart;\n  try {\n    decoded = decodeURIComponent(filePart);\n  } catch {\n    // ignore\n  }\n\n  return decoded\n    .replace(/\\.exp3\\.json$/i, '')\n    .replace(/\\.motion3\\.json$/i, '')\n    .replace(/\\.mtn$/i, '')\n    .replace(/\\.json$/i, '')\n    .trim();\n}\n\nfunction normalizeDefinitionName(def: unknown, fallback = ''): string {\n  if (typeof def === 'string') {\n    return normalizeFileStem(def) || def.trim();\n  }\n  if (!def || typeof def !== 'object') {\n    return fallback;\n  }\n\n  const obj = def as any;\n  const directName = obj.Name || obj.name || obj.Id || obj.id || '';\n  if (String(directName ?? '').trim()) {\n    return String(directName).trim();\n  }\n\n  const fileLike = obj.File || obj.file || obj.Path || obj.path || '';\n  const stem = normalizeFileStem(fileLike);\n  if (stem) return stem;\n\n  return fallback;\n}\n\nfunction collectSettingsCandidates(model: any): any[] {\n  const candidates: any[] = [];\n  const seen = new Set<any>();\n\n  const add = (obj: any) => {\n    if (!obj || typeof obj !== 'object') return;\n    if (seen.has(obj)) return;\n    seen.add(obj);\n    candidates.push(obj);\n  };\n\n  const motionManager = model?.internalModel?.motionManager;\n  const settings = model?.internalModel?.settings;\n\n  add(settings);\n  add(settings?.json);\n  add(settings?.rawSettings);\n  add(settings?.modelJson);\n  add(motionManager?.settings);\n  add(motionManager?.settings?.json);\n  add(motionManager?.settings?.rawSettings);\n  add(motionManager?.settings?.modelJson);\n\n  return candidates;\n}\n\nfunction isExpressionFileLike(input: unknown): boolean {\n  const raw = String(input ?? '').trim().toLowerCase();\n  if (!raw) return false;\n  return /\\.exp3\\.json($|[?#])/.test(raw) || /\\.exp\\.json($|[?#])/.test(raw) || /\\.exp($|[?#])/.test(raw);\n}\n\nfunction isMotionFileLike(input: unknown): boolean {\n  const raw = String(input ?? '').trim().toLowerCase();\n  if (!raw) return false;\n  return /\\.motion3\\.json($|[?#])/.test(raw) || /\\.mtn($|[?#])/.test(raw);\n}\n\nfunction isMotionDefinition(node: unknown): boolean {\n  if (typeof node === 'string') {\n    return isMotionFileLike(node);\n  }\n  if (!node || typeof node !== 'object') return false;\n\n  const obj = node as any;\n  const fileLike = obj.File || obj.file || obj.Path || obj.path || '';\n  if (isMotionFileLike(fileLike)) return true;\n\n  const soundLike = obj.Sound || obj.sound || '';\n  if (typeof soundLike === 'string' && soundLike.trim()) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction countMotionDefinitions(list: unknown[]): number {\n  let count = 0;\n  for (const item of list) {\n    if (isMotionDefinition(item)) count++;\n  }\n  return count > 0 ? count : list.length;\n}\n\nfunction mergeGroupCount(target: Record<string, number>, key: unknown, count: unknown): void {\n  const keyRaw = String(key ?? '');\n  const normalized = keyRaw.trim();\n  if (!normalized && keyRaw !== '') return;\n\n  const groupName = normalized || '';\n  const parsedCount = Number(count);\n  const safeCount = Number.isFinite(parsedCount) && parsedCount > 0 ? Math.max(1, Math.floor(parsedCount)) : 1;\n  const prev = target[groupName];\n  target[groupName] = Number.isFinite(prev) && prev > 0 ? Math.max(prev, safeCount) : safeCount;\n}\n\nfunction pushFromContainer(names: string[], seen: Set<string>, container: unknown, fallbackPrefix: string): void {\n  const pushFromList = (list: unknown[], fallbackPrefixInner: string) => {\n    for (let i = 0; i < list.length; i++) {\n      const normalized = normalizeDefinitionName(list[i], `${fallbackPrefixInner}_${i + 1}`);\n      uniquePush(names, seen, normalized);\n    }\n  };\n\n  if (Array.isArray(container)) {\n    pushFromList(container, fallbackPrefix);\n    return;\n  }\n  if (!container || typeof container !== 'object') return;\n\n  let i = 0;\n  for (const [key, value] of Object.entries(container as Record<string, unknown>)) {\n    const fallbackName = normalizeFileStem(key) || String(key || '').trim() || `${fallbackPrefix}_${i + 1}`;\n    const normalized = normalizeDefinitionName(value, fallbackName);\n    uniquePush(names, seen, normalized || fallbackName);\n    i++;\n  }\n}\n\nexport function collectExpressionNamesFromUnknown(raw: unknown): string[] {\n  const names: string[] = [];\n  const seen = new Set<string>();\n  const visited = new Set<any>();\n\n  const visit = (node: unknown, context = ''): void => {\n    if (node == null) return;\n\n    if (typeof node === 'string') {\n      const text = node.trim();\n      if (!text) return;\n      if (isExpressionFileLike(text) || /exp|expression/.test(context)) {\n        uniquePush(names, seen, normalizeFileStem(text) || text);\n      }\n      return;\n    }\n\n    if (Array.isArray(node)) {\n      for (let i = 0; i < node.length; i++) {\n        const item = node[i];\n        const fallback = `${context || 'expression'}_${i + 1}`;\n        if (typeof item === 'string') {\n          if (isExpressionFileLike(item) || /exp|expression/.test(context)) {\n            uniquePush(names, seen, normalizeFileStem(item) || item);\n          }\n          continue;\n        }\n\n        if (item && typeof item === 'object') {\n          const normalized = normalizeDefinitionName(item, fallback);\n          const itemAny = item as any;\n          const fileLike = itemAny.File || itemAny.file || itemAny.Path || itemAny.path || '';\n          if (/exp|expression/.test(context) || isExpressionFileLike(fileLike)) {\n            uniquePush(names, seen, normalized || fallback);\n          }\n        }\n\n        visit(item, context);\n      }\n      return;\n    }\n\n    if (typeof node !== 'object') return;\n    if (visited.has(node)) return;\n    visited.add(node);\n\n    const obj = node as Record<string, unknown>;\n    const anyObj = obj as any;\n    const directFile = anyObj.File || anyObj.file || anyObj.Path || anyObj.path || '';\n    if (isExpressionFileLike(directFile)) {\n      uniquePush(names, seen, normalizeDefinitionName(obj, normalizeFileStem(directFile)));\n    }\n\n    for (const [rawKey, value] of Object.entries(obj)) {\n      const key = String(rawKey || '').trim();\n      if (!key) continue;\n      const keyLower = key.toLowerCase();\n      const keyIsExpression = keyLower.includes('expression') || keyLower.includes('expr') || keyLower === 'exp';\n      const nextContext = keyIsExpression ? 'expression' : context;\n\n      if (typeof value === 'string') {\n        const text = value.trim();\n        if (!text) continue;\n        if (isExpressionFileLike(text) || keyIsExpression || /exp|expression/.test(context)) {\n          const fallback = normalizeFileStem(key) || key;\n          const normalized = normalizeDefinitionName({ Name: fallback, File: text }, fallback);\n          uniquePush(names, seen, normalized || fallback);\n        }\n        continue;\n      }\n\n      if (Array.isArray(value)) {\n        if (keyIsExpression || /exp|expression/.test(context)) {\n          pushFromContainer(names, seen, value, normalizeFileStem(key) || 'expression');\n        }\n        visit(value, nextContext);\n        continue;\n      }\n\n      if (value && typeof value === 'object') {\n        if (keyIsExpression) {\n          const fallback = normalizeFileStem(key) || key;\n          uniquePush(names, seen, normalizeDefinitionName(value, fallback));\n        }\n        visit(value, nextContext);\n      }\n    }\n  };\n\n  visit(raw, '');\n  return names;\n}\n\nexport function collectMotionGroupCountsFromUnknown(raw: unknown): Record<string, number> {\n  const groups: Record<string, number> = {};\n  const visited = new Set<any>();\n\n  const visit = (node: unknown, parentKey = '', context = ''): void => {\n    if (node == null) return;\n\n    if (Array.isArray(node)) {\n      const count = countMotionDefinitions(node);\n      if ((parentKey === '' || !!parentKey) && count > 0 && (context === 'motion' || node.some(item => isMotionDefinition(item)))) {\n        mergeGroupCount(groups, parentKey, count);\n      }\n\n      for (const item of node) {\n        if (item && typeof item === 'object') {\n          visit(item, parentKey, context);\n        }\n      }\n      return;\n    }\n\n    if (typeof node !== 'object') return;\n    if (visited.has(node)) return;\n    visited.add(node);\n\n    const obj = node as Record<string, unknown>;\n    for (const [rawKey, value] of Object.entries(obj)) {\n      const keyRaw = String(rawKey ?? '');\n      const keyTrimmed = keyRaw.trim();\n      const key = keyTrimmed || (keyRaw === '' ? '' : '');\n      if (!key && keyRaw !== '') continue;\n\n      const keyLower = key.toLowerCase();\n      const keyIsMotionContainer =\n        keyLower.includes('motions') ||\n        keyLower.includes('motion') ||\n        keyLower.includes('anim') ||\n        keyLower.includes('mtn');\n      const nextContext = keyIsMotionContainer ? 'motion' : context;\n\n      if (Array.isArray(value)) {\n        const count = countMotionDefinitions(value);\n        if (count > 0 && (nextContext === 'motion' || value.some(item => isMotionDefinition(item)))) {\n          mergeGroupCount(groups, key, count);\n        }\n        visit(value, key, nextContext);\n        continue;\n      }\n\n      if (typeof value === 'string') {\n        if (isMotionFileLike(value) && parentKey) {\n          mergeGroupCount(groups, parentKey, 1);\n        }\n        continue;\n      }\n\n      if (value && typeof value === 'object') {\n        if (keyIsMotionContainer) {\n          const nested = value as Record<string, unknown>;\n          for (const [nestedRawKey, nestedValue] of Object.entries(nested)) {\n            const nestedRaw = String(nestedRawKey ?? '');\n            const nestedTrimmed = nestedRaw.trim();\n            const nestedKey = nestedTrimmed || (nestedRaw === '' ? '' : '');\n            if (!nestedKey && nestedRaw !== '') continue;\n            if (!Array.isArray(nestedValue)) continue;\n            const nestedCount = countMotionDefinitions(nestedValue);\n            if (nestedCount > 0) {\n              mergeGroupCount(groups, nestedKey, nestedCount);\n            }\n          }\n        }\n        visit(value, key, nextContext);\n      }\n    }\n  };\n\n  visit(raw, '', '');\n  return groups;\n}\n\nfunction pushMotionEntriesFromGroupContainer(entries: Live2DMotionEntry[], seen: Set<string>, container: unknown): void {\n  if (!container) return;\n\n  const pushFromList = (group: string, list: unknown[]) => {\n    for (let i = 0; i < list.length; i++) {\n      const def = list[i];\n      if (!isMotionDefinition(def)) continue;\n      const name = normalizeDefinitionName(def, `motion_${i + 1}`);\n      uniqueMotionPush(entries, seen, { group, index: i, name });\n    }\n  };\n\n  if (Array.isArray(container)) {\n    pushFromList('', container);\n    return;\n  }\n\n  if (typeof container !== 'object') return;\n\n  for (const [rawKey, value] of Object.entries(container as Record<string, unknown>)) {\n    const groupRaw = String(rawKey ?? '');\n    const groupTrimmed = groupRaw.trim();\n    if (!groupTrimmed && groupRaw !== '') continue;\n    const group = groupTrimmed || '';\n    if (!Array.isArray(value)) continue;\n    pushFromList(group, value);\n  }\n}\n\nexport function collectMotionEntries(model: any): Live2DMotionEntry[] {\n  const entries: Live2DMotionEntry[] = [];\n  const seen = new Set<string>();\n\n  const motionManager = model?.internalModel?.motionManager;\n  pushMotionEntriesFromGroupContainer(entries, seen, motionManager?.definitions);\n\n  const settingsCandidates = collectSettingsCandidates(model);\n  for (const settings of settingsCandidates) {\n    pushMotionEntriesFromGroupContainer(entries, seen, settings?.motions);\n    pushMotionEntriesFromGroupContainer(entries, seen, settings?.Motions);\n    pushMotionEntriesFromGroupContainer(entries, seen, settings?.FileReferences?.Motions);\n  }\n\n  return entries;\n}\n\nexport function collectExpressionNames(model: any): string[] {\n  const names: string[] = [];\n  const seen = new Set<string>();\n  const expressionManager = model?.internalModel?.motionManager?.expressionManager;\n\n  pushFromContainer(names, seen, expressionManager?.definitions, 'definition');\n  pushFromContainer(names, seen, expressionManager?.expressions, 'expression');\n  for (const name of collectExpressionNamesFromUnknown(expressionManager?.definitions)) {\n    uniquePush(names, seen, name);\n  }\n  for (const name of collectExpressionNamesFromUnknown(expressionManager?.expressions)) {\n    uniquePush(names, seen, name);\n  }\n\n  const settingsCandidates = collectSettingsCandidates(model);\n  for (const settings of settingsCandidates) {\n    pushFromContainer(names, seen, settings?.expressions, 'settings_expr');\n    pushFromContainer(names, seen, settings?.Expressions, 'settings_expr');\n    pushFromContainer(names, seen, settings?.FileReferences?.Expressions, 'file_ref_expr');\n    for (const name of collectExpressionNamesFromUnknown(settings)) {\n      uniquePush(names, seen, name);\n    }\n  }\n\n  const settings = model?.internalModel?.settings;\n  if (settings && typeof settings === 'object') {\n    if (typeof (settings as any).getExpressionCount === 'function') {\n      let count = 0;\n      try {\n        count = Number((settings as any).getExpressionCount()) || 0;\n      } catch {\n        // ignore\n      }\n      count = Math.max(0, Math.min(count, 1000));\n\n      for (let i = 0; i < count; i++) {\n        let name = '';\n        if (typeof (settings as any).getExpressionName === 'function') {\n          try {\n            name = String((settings as any).getExpressionName(i) ?? '').trim();\n          } catch {\n            // ignore\n          }\n        }\n        if (!name && typeof (settings as any).getExpressionFile === 'function') {\n          try {\n            name = normalizeFileStem((settings as any).getExpressionFile(i));\n          } catch {\n            // ignore\n          }\n        }\n        uniquePush(names, seen, name || `expression_${i + 1}`);\n      }\n    }\n  }\n\n  return names;\n}\n\nexport function collectMotionGroupNames(model: any): string[] {\n  const groupNames: string[] = [];\n  const seen = new Set<string>();\n  const motionManager = model?.internalModel?.motionManager;\n\n  const pushFromObject = (obj: unknown) => {\n    if (!obj || typeof obj !== 'object') return;\n    for (const key of Object.keys(obj as Record<string, unknown>)) {\n      uniquePushAllowEmpty(groupNames, seen, key);\n    }\n  };\n\n  pushFromObject(motionManager?.motionGroups);\n  pushFromObject(motionManager?.groups);\n  pushFromObject(motionManager?.definitions);\n  for (const [groupName] of Object.entries(collectMotionGroupCountsFromUnknown(motionManager?.definitions))) {\n    uniquePushAllowEmpty(groupNames, seen, groupName);\n  }\n\n  const settingsCandidates = collectSettingsCandidates(model);\n  for (const settings of settingsCandidates) {\n    pushFromObject(settings?.motions);\n    pushFromObject(settings?.Motions);\n    pushFromObject(settings?.FileReferences?.Motions);\n    for (const [groupName] of Object.entries(collectMotionGroupCountsFromUnknown(settings))) {\n      uniquePushAllowEmpty(groupNames, seen, groupName);\n    }\n  }\n\n  const settings = model?.internalModel?.settings;\n  if (settings && typeof settings === 'object') {\n    const anySettings = settings as any;\n    if (typeof anySettings.getMotionGroupCount === 'function' && typeof anySettings.getMotionGroupName === 'function') {\n      let count = 0;\n      try {\n        count = Number(anySettings.getMotionGroupCount()) || 0;\n      } catch {\n        // ignore\n      }\n      count = Math.max(0, Math.min(count, 1000));\n\n      for (let i = 0; i < count; i++) {\n        try {\n          uniquePushAllowEmpty(groupNames, seen, String(anySettings.getMotionGroupName(i) ?? ''));\n        } catch {\n          // ignore\n        }\n      }\n    } else if (typeof anySettings.getMotionGroupNames === 'function') {\n      try {\n        const names = anySettings.getMotionGroupNames();\n        if (Array.isArray(names)) {\n          for (const name of names) uniquePushAllowEmpty(groupNames, seen, name);\n        }\n      } catch {\n        // ignore\n      }\n    }\n  }\n\n  return groupNames;\n}\n\nexport function matchLive2DExpression(model: any, targetExpression: EmotionTag, override?: string): string | null {\n  const overrideName = String(override || '').trim();\n  if (overrideName) return overrideName;\n\n  const mapping = EXPRESSION_LIVE2D_MAP[targetExpression];\n  const candidates = mapping?.expressions || [String(targetExpression || '').toLowerCase()];\n\n  const definitions = collectExpressionNames(model);\n  if (!definitions.length) return null;\n\n  for (const candidateRaw of candidates) {\n    const candidate = String(candidateRaw || '').toLowerCase();\n    const exact = definitions.find((def) => String(def || '').toLowerCase() === candidate);\n    if (exact) return exact;\n  }\n\n  for (const candidateRaw of candidates) {\n    const candidate = String(candidateRaw || '').toLowerCase();\n    for (const def of definitions) {\n      const name = String(def || '').toLowerCase();\n      if (name.includes(candidate) || candidate.includes(name)) {\n        return def;\n      }\n    }\n  }\n\n  return null;\n}\n\nexport type Live2DMotionMatch = { group: string; index: number; name?: string };\n\nexport function matchLive2DMotion(\n  model: any,\n  targetExpression: EmotionTag,\n  override?: EmotionMotionOverride,\n): Live2DMotionMatch | null {\n  if (override && override.enabled === false) return null;\n\n  const overrideGroup = String(override?.group || '').trim();\n  if (overrideGroup) {\n    const entries = collectMotionEntries(model);\n    const lower = overrideGroup.toLowerCase();\n    const exactByName = entries.find((e) => e.name.toLowerCase() === lower);\n    if (exactByName) return { group: exactByName.group, index: exactByName.index, name: exactByName.name };\n\n    const fuzzyByName = entries.find((e) => {\n      const nameLower = e.name.toLowerCase();\n      return nameLower.includes(lower) || lower.includes(nameLower);\n    });\n    if (fuzzyByName) return { group: fuzzyByName.group, index: fuzzyByName.index, name: fuzzyByName.name };\n\n    return { group: overrideGroup, index: 0 };\n  }\n\n  const mapping = EXPRESSION_LIVE2D_MAP[targetExpression];\n  if (!mapping?.motions?.length) return null;\n\n  const groupNames = collectMotionGroupNames(model);\n  if (!groupNames.length) return null;\n\n  for (const candidateRaw of mapping.motions) {\n    const candidate = String(candidateRaw || '').trim().toLowerCase();\n    if (!candidate) continue;\n    const exact = groupNames.find((name) => String(name || '').trim().toLowerCase() === candidate);\n    if (exact) {\n      return { group: exact, index: 0 };\n    }\n  }\n\n  for (const candidateRaw of mapping.motions) {\n    const candidate = String(candidateRaw || '').toLowerCase();\n    if (!candidate) continue;\n    for (const groupName of groupNames) {\n      const nameLower = String(groupName || '').toLowerCase();\n      if (!nameLower) continue;\n      if (nameLower.includes(candidate) || candidate.includes(nameLower)) {\n        return { group: groupName, index: 0 };\n      }\n    }\n  }\n\n  const entries = collectMotionEntries(model);\n  if (!entries.length) return null;\n\n  for (const candidateRaw of mapping.motions) {\n    const candidate = String(candidateRaw || '').trim().toLowerCase();\n    if (!candidate) continue;\n    const exact = entries.find((e) => e.name.toLowerCase() === candidate);\n    if (exact) return { group: exact.group, index: exact.index, name: exact.name };\n  }\n\n  for (const candidateRaw of mapping.motions) {\n    const candidate = String(candidateRaw || '').trim().toLowerCase();\n    if (!candidate) continue;\n    const fuzzy = entries.find((e) => {\n      const nameLower = e.name.toLowerCase();\n      return nameLower.includes(candidate) || candidate.includes(nameLower);\n    });\n    if (fuzzy) return { group: fuzzy.group, index: fuzzy.index, name: fuzzy.name };\n  }\n\n  return null;\n}\n","import { EIKANYA_CDN_BASE, EIKANYA_RAW_BASE, LIVE2D_CDN_BASE } from '../core/constants';\r\nimport { useSettingsStore } from '../core/settings';\nimport { error, log, warn } from '../utils/dom';\nimport { Live2DLoader } from './loader';\nimport { Live2DStage } from './stage';\nimport {\n  collectExpressionNames,\n  collectExpressionNamesFromUnknown,\n  collectMotionEntries,\n  collectMotionGroupCountsFromUnknown,\n  collectMotionGroupNames,\n  type Live2DMotionEntry,\n} from './expression-motion';\n\nconst TICKER_REGISTERED_FLAG = '__desktopPetLive2dTickerV1';\n\nexport type ModelLoadProgress = {\n  percent: number;\n  message: string;\n};\n\r\n/**\n * Live2D \n * /\n */\nexport const Live2DManager = {\n  _JSDELIVR_HOSTS: [\n    'cdn.jsdelivr.net',\n    'fastly.jsdelivr.net',\n    'testingcf.jsdelivr.net',\n    'gcore.jsdelivr.net',\n  ],\n  _runtime: null as any,\n  model: null as any,\n  isReady: false,\n  modelBaseWidth: null as number | null,\n  modelBaseHeight: null as number | null,\n  modelBaseBounds: null as { x: number; y: number; width: number; height: number } | null,\n  _lastModelJson: null as any,\n  _lastModelJsonSourceUrl: '' as string,\n  _autoMotionTimer: null as number | null,\n  autoMotionLoopEnabled: true,\n  _mouthParamCore: null as any,\n  _mouthParamIds: [] as string[],\n  _mouthParamIndexes: [] as number[],\n  _mouthParamRangeMins: [] as number[],\r\n  _mouthParamRangeMaxs: [] as number[],\r\n  _mouthParamWarned: false,\r\n  _mouthCurrentValue: 0,\r\n  _lipSyncActive: false,\r\n  _inModelUpdate: false,\r\n  _writeMaskCore: null as any,\r\n  _writeMaskRestore: null as (() => void) | null,\r\n  _updateHookModel: null as any,\r\n  _updateHookRestore: null as (() => void) | null,\r\n  _manualMouthParamEnabled: false,\r\n  _manualMouthParamIds: [] as string[],\r\n  _manualMouthParamIdSet: new Set<string>(),\r\n\r\n  /**  */\n  _top(): Window {\n    return window.parent ?? window;\n  },\n\n  /**  PIXI  */\n  _getPIXI(): any {\n    const runtimePixi = Live2DLoader.getPixi(this._top());\n    if (runtimePixi) return runtimePixi;\n    return this._runtime?.pixi ?? null;\n  },\n\r\n  _encodePathSegment(segment: string): string {\r\n    if (typeof segment !== 'string' || !segment) return segment;\r\n\r\n    let decoded = segment;\r\n    try {\r\n      decoded = decodeURIComponent(segment);\r\n    } catch {\r\n      return segment;\r\n    }\r\n\r\n    const safeChar = /[A-Za-z0-9\\-._~!$&'()*+,;=:@]/;\r\n    let encoded = '';\r\n    for (const ch of decoded) {\r\n      encoded += safeChar.test(ch) ? ch : encodeURIComponent(ch);\r\n    }\r\n    return encoded;\r\n  },\r\n\r\n  _normalizeRemoteUrl(inputUrl: string): string {\r\n    const url = String(inputUrl || '').trim();\r\n    if (!url) return url;\r\n\r\n    try {\r\n      const urlObj = new URL(url);\r\n      urlObj.pathname = urlObj.pathname\r\n        .split('/')\r\n        .map(segment => this._encodePathSegment(segment))\r\n        .join('/');\r\n      return urlObj.toString();\r\n    } catch {\r\n      return url;\r\n    }\r\n  },\r\n\r\n  _normalizeResourceRef(inputRef: string): string {\r\n    const raw = String(inputRef || '').trim();\r\n    if (!raw) return raw;\r\n\r\n    //  #  %23 URL \r\n    const hashSafe = raw.replace(/#/g, '%23');\r\n    const normalized = hashSafe.replace(/\\\\/g, '/');\r\n\r\n    const qIndex = normalized.indexOf('?');\r\n    const pathPart = qIndex >= 0 ? normalized.slice(0, qIndex) : normalized;\r\n    const queryPart = qIndex >= 0 ? normalized.slice(qIndex) : '';\r\n\r\n    const encodedPath = pathPart\r\n      .split('/')\r\n      .map(segment => this._encodePathSegment(segment))\r\n      .join('/');\r\n\r\n    return `${encodedPath}${queryPart.replace(/#/g, '%23')}`;\r\n  },\r\n\r\n  _getMirrorEikanyaModelUrl(modelUrl: string): string | null {\r\n    const url = String(modelUrl || '').trim();\r\n    if (!url) return null;\r\n\r\n    if (url.startsWith(EIKANYA_CDN_BASE)) {\r\n      return `${EIKANYA_RAW_BASE}${url.slice(EIKANYA_CDN_BASE.length)}`;\r\n    }\r\n    if (url.startsWith(EIKANYA_RAW_BASE)) {\r\n      return `${EIKANYA_CDN_BASE}${url.slice(EIKANYA_RAW_BASE.length)}`;\r\n    }\r\n    return null;\r\n  },\r\n\r\n  _expandJsDelivrHosts(inputUrl: string): string[] {\r\n    const url = String(inputUrl || '').trim();\r\n    if (!url) return [];\r\n\r\n    let urlObj: URL;\r\n    try {\r\n      urlObj = new URL(url);\r\n    } catch {\r\n      return [];\r\n    }\r\n\r\n    if (!urlObj.hostname.toLowerCase().endsWith('jsdelivr.net')) return [];\r\n\r\n    const results: string[] = [];\r\n    for (const host of this._JSDELIVR_HOSTS) {\r\n      try {\r\n        const u = new URL(url);\r\n        u.hostname = host;\r\n        results.push(u.toString());\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n    return results;\r\n  },\r\n\r\n  _convertJsDelivrGhToRawCandidates(inputUrl: string): string[] {\r\n    const url = String(inputUrl || '').trim();\r\n    if (!url) return [];\r\n\r\n    let urlObj: URL;\r\n    try {\r\n      urlObj = new URL(url);\r\n    } catch {\r\n      return [];\r\n    }\r\n\r\n    const host = urlObj.hostname.toLowerCase();\r\n    if (!host.endsWith('jsdelivr.net')) return [];\r\n    if (!urlObj.pathname.startsWith('/gh/')) return [];\r\n\r\n    const rest = urlObj.pathname.slice('/gh/'.length);\r\n    const parts = rest.split('/').filter(Boolean);\r\n    if (parts.length < 2) return [];\r\n\r\n    const owner = parts[0];\r\n    const repoWithRef = parts[1];\r\n    const filePath = parts.slice(2).join('/');\r\n    if (!owner || !repoWithRef || !filePath) return [];\r\n\r\n    const [repo, ref] = repoWithRef.split('@');\r\n    const suffix = `${urlObj.search || ''}${urlObj.hash || ''}`;\r\n\r\n    if (ref) {\r\n      return [`https://raw.githubusercontent.com/${owner}/${repo}/${ref}/${filePath}${suffix}`];\r\n    }\r\n\r\n    return [\r\n      `https://raw.githubusercontent.com/${owner}/${repo}/master/${filePath}${suffix}`,\r\n      `https://raw.githubusercontent.com/${owner}/${repo}/main/${filePath}${suffix}`,\r\n    ];\r\n  },\r\n\r\n  _buildModelUrlCandidates(modelUrl: string): string[] {\r\n    const bases: string[] = [];\r\n    const addBase = (url: string) => {\r\n      const normalized = this._normalizeRemoteUrl(url);\r\n      if (!normalized) return;\r\n      if (!bases.includes(normalized)) bases.push(normalized);\r\n    };\r\n\r\n    addBase(modelUrl);\r\n    const mirrorUrl = this._getMirrorEikanyaModelUrl(modelUrl);\r\n    if (mirrorUrl) addBase(mirrorUrl);\r\n\r\n    const candidates: string[] = [];\r\n    const add = (url: string) => {\r\n      const normalized = this._normalizeRemoteUrl(url);\r\n      if (!normalized) return;\r\n      if (!candidates.includes(normalized)) candidates.push(normalized);\r\n    };\r\n\r\n    for (const base of bases) {\r\n      add(base);\r\n      for (const variant of this._expandJsDelivrHosts(base)) add(variant);\r\n      for (const raw of this._convertJsDelivrGhToRawCandidates(base)) add(raw);\r\n    }\r\n\r\n    return candidates;\r\n  },\r\n\r\n  async _createModelWithTimeout(Live2DModel: any, dataUrl: string, timeoutMs = 30000): Promise<any> {\n    let timer: number | null = null;\n    try {\n      const timeoutPromise = new Promise<never>((_resolve, reject) => {\n        timer = window.setTimeout(() => {\n          reject(new Error(` (${timeoutMs}ms)`));\n        }, timeoutMs);\n      });\n\n      return await Promise.race([\n        Live2DModel.from(dataUrl, {\n          //  galgame  WebGL renderer  autoUpdate\n          //  Cubism2/ WebGL program \n          autoUpdate: false,\n          autoInteract: false,\n        }),\n        timeoutPromise,\n      ]);\n    } finally {\n      if (timer !== null) {\n        window.clearTimeout(timer);\n      }\n    }\n  },\n\r\n  async _fetchWithTimeout(url: string, init: RequestInit, timeoutMs = 12000): Promise<Response> {\r\n    if (typeof AbortController === 'undefined') {\r\n      return fetch(url, init);\r\n    }\r\n\r\n    const controller = new AbortController();\r\n    const timer = window.setTimeout(() => controller.abort(), timeoutMs);\r\n\r\n    try {\r\n      return await fetch(url, { ...init, signal: controller.signal });\r\n    } catch (e: any) {\r\n      if (e?.name === 'AbortError') {\r\n        throw new Error(` (${timeoutMs}ms): ${url}`);\r\n      }\r\n      throw e;\r\n    } finally {\r\n      window.clearTimeout(timer);\r\n    }\r\n  },\r\n\r\n  _toPositiveNumber(value: unknown, fallback: number): number {\r\n    const n = typeof value === 'number' ? value : Number(value);\r\n    return Number.isFinite(n) && n > 0 ? n : fallback;\r\n  },\r\n\r\n  _toScale(value: unknown, fallback = 1): number {\n    const n = typeof value === 'number' ? value : Number(value);\n    if (!Number.isFinite(n) || n <= 0) return fallback;\n    return Math.min(20, Math.max(0.01, n));\n  },\n\n  _readModelBaseBounds(model: any): { x: number; y: number; width: number; height: number } | null {\n    if (!model || typeof model.getLocalBounds !== 'function') return null;\n    try {\n      const bounds = model.getLocalBounds();\n      if (!bounds) return null;\n      const width = Number(bounds.width);\n      const height = Number(bounds.height);\n      if (!Number.isFinite(width) || !Number.isFinite(height) || width <= 0 || height <= 0) {\n        return null;\n      }\n      const x = Number.isFinite(Number(bounds.x)) ? Number(bounds.x) : 0;\n      const y = Number.isFinite(Number(bounds.y)) ? Number(bounds.y) : 0;\n      return { x, y, width, height };\n    } catch {\n      return null;\n    }\n  },\n\n  _resolveModelBaseBounds(): { x: number; y: number; width: number; height: number } {\n    if (this.modelBaseBounds) return this.modelBaseBounds;\n\n    const measured = this._readModelBaseBounds(this.model);\n    if (measured) {\n      this.modelBaseBounds = measured;\n      this.modelBaseWidth = measured.width;\n      this.modelBaseHeight = measured.height;\n      return measured;\n    }\n\n    return {\n      x: 0,\n      y: 0,\n      width: this._toPositiveNumber(this.modelBaseWidth, 500),\n      height: this._toPositiveNumber(this.modelBaseHeight, 800),\n    };\n  },\n\n  _applyStageTransform(stageWidth: number, stageHeight: number, scale: number): {\n    finalScale: number;\n    stageWidth: number;\n    stageHeight: number;\n    modelWidth: number;\n    modelHeight: number;\n  } | null {\n    if (!this.model) return null;\n\n    const safeStageWidth = this._toPositiveNumber(stageWidth, 280);\n    const safeStageHeight = this._toPositiveNumber(stageHeight, 360);\n    const bounds = this._resolveModelBaseBounds();\n    const safeModelWidth = this._toPositiveNumber(bounds.width, 500);\n    const safeModelHeight = this._toPositiveNumber(bounds.height, 800);\n    const fitScale = Math.min(safeStageWidth / safeModelWidth, safeStageHeight / safeModelHeight) * 0.9;\n    const finalScale = this._toScale(fitScale * this._toScale(scale, 1), 0.3);\n\n    this.model.visible = true;\n    this.model.alpha = 1;\n    this.model.scale.set(finalScale);\n\n    if (this.model.anchor?.set) {\n      this.model.anchor.set(0.5, 1);\n      this.model.x = safeStageWidth / 2;\n      this.model.y = safeStageHeight;\n    } else if (this.model.pivot?.set) {\n      this.model.pivot.set(bounds.x + safeModelWidth / 2, bounds.y + safeModelHeight);\n      this.model.x = safeStageWidth / 2;\n      this.model.y = safeStageHeight;\n    } else {\n      this.model.x = safeStageWidth / 2;\n      this.model.y = safeStageHeight / 2;\n    }\n\n    return {\n      finalScale,\n      stageWidth: safeStageWidth,\n      stageHeight: safeStageHeight,\n      modelWidth: safeModelWidth,\n      modelHeight: safeModelHeight,\n    };\n  },\n\r\n  _normalizeLegacyCubism2Settings(modelJson: any): void {\r\n    if (!modelJson || modelJson.FileReferences) return;\r\n\r\n    const textures = modelJson.textures || modelJson.Textures;\r\n    if (Array.isArray(textures)) return;\r\n    if (!textures || typeof textures !== 'object') return;\r\n\r\n    const entries = Object.entries(textures)\r\n      .filter((entry): entry is [string, string[]] => Array.isArray(entry[1]) && entry[1].length > 0);\r\n    if (entries.length === 0) return;\r\n\r\n    const hintKeys = [\r\n      modelJson.config?.texture,\r\n      modelJson.config?.textureId,\r\n      modelJson.config?.skin,\r\n      modelJson.config?.modelId,\r\n      modelJson.config?.defaultTexture,\r\n      modelJson.config?.defaultSkin,\r\n    ]\r\n      .map(v => (v === undefined || v === null ? '' : String(v).trim()))\r\n      .filter(Boolean);\r\n\r\n    let selected = entries[0];\r\n    for (const hint of hintKeys) {\r\n      const matched = entries.find(([key]) => key === hint);\r\n      if (matched) {\r\n        selected = matched;\r\n        break;\r\n      }\r\n    }\r\n\r\n    const normalizedTextures = selected[1].map((item: string) => {\r\n      const raw = String(item || '').trim();\r\n      if (!raw) return raw;\r\n      if (/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(raw)) return raw;\r\n      if (raw.startsWith('/')) return raw;\r\n      if (raw.includes('/')) return raw;\r\n      //  textures/  JSON \r\n      return `textures/${raw}`;\r\n    });\r\n    modelJson.textures = normalizedTextures;\r\n    modelJson.Textures = normalizedTextures;\r\n    log(' Cubism2 ', {\r\n      key: selected[0],\r\n      textureCount: normalizedTextures.length,\r\n    });\r\n  },\r\n\r\n  _clearAutoMotionLoop(): void {\r\n    if (this._autoMotionTimer !== null) {\r\n      window.clearInterval(this._autoMotionTimer);\r\n      this._autoMotionTimer = null;\r\n    }\r\n  },\r\n\r\n  _stopCurrentMotion(reason = 'manual'): void {\r\n    const model = this.model;\r\n    if (!model) return;\r\n\r\n    let stopped = false;\r\n    const tryCall = (obj: any, method: string) => {\r\n      if (!obj || typeof obj[method] !== 'function') return;\r\n      try {\r\n        obj[method]();\r\n        stopped = true;\r\n      } catch {\r\n        // ignore\r\n      }\r\n    };\r\n\r\n    const mm = model?.internalModel?.motionManager as any;\r\n    const animator = model?.internalModel?.animator as any;\r\n    const internal = model?.internalModel as any;\r\n\r\n    tryCall(model, 'stopMotions');\r\n    tryCall(mm, 'stopAllMotions');\r\n    tryCall(mm, 'stopAllMotion');\r\n    tryCall(mm, 'stopMotion');\r\n    tryCall(mm, 'stop');\r\n    tryCall(animator, 'stopAllMotions');\r\n    tryCall(animator, 'stopAllMotion');\r\n    tryCall(animator, 'stop');\r\n    tryCall(internal, 'stopAllMotions');\r\n\r\n    if (stopped) {\r\n      log('', { reason });\r\n    }\r\n  },\r\n\r\n  _refreshManualMouthParams(): void {\r\n    let enabled = false;\r\n    const ids: string[] = [];\r\n    try {\n      const store = useSettingsStore();\n      const s = store.settings as any;\n      enabled = !!s?.lipSyncManualParamsEnabled;\n      const raw = Array.isArray(s?.lipSyncManualParamIds) ? s.lipSyncManualParamIds : [];\n      const set = new Set<string>();\n      for (const item of raw) {\n        const id = String(item || '').trim();\n        if (!id) continue;\r\n        const low = id.toLowerCase();\r\n        if (set.has(low)) continue;\r\n        set.add(low);\r\n        ids.push(id);\r\n      }\r\n    } catch {\r\n      // ignore\r\n    }\r\n\r\n    this._manualMouthParamEnabled = enabled;\r\n    this._manualMouthParamIds = ids;\r\n    this._manualMouthParamIdSet = new Set(ids.map(id => id.toLowerCase()));\r\n  },\r\n\r\n  _setLipSyncActive(active: boolean): void {\r\n    const next = !!active;\r\n    if (this._lipSyncActive === next) return;\r\n\r\n    this._lipSyncActive = next;\r\n    if (next) {\r\n      this._refreshManualMouthParams();\r\n      const model = this.model;\r\n      const coreModel = model?.internalModel?.coreModel;\r\n      if (model) this._ensureLipSyncHooks(model);\r\n      if (coreModel) this._installCoreWriteMask(coreModel);\r\n    }\r\n    log(`LipSync active=${next}`);\r\n  },\r\n\r\n  setAutoMotionLoopEnabled(enabled: boolean): void {\r\n    this.autoMotionLoopEnabled = Boolean(enabled);\r\n\r\n    if (!this.model) {\r\n      this._clearAutoMotionLoop();\r\n      return;\r\n    }\r\n\r\n    if (this.autoMotionLoopEnabled) {\r\n      this._startAutoMotionLoop();\r\n    } else {\r\n      this._clearAutoMotionLoop();\r\n      this._stopCurrentMotion('auto-motion-disabled');\r\n    }\r\n  },\r\n\r\n  _pickDefaultMotionGroup(groups: Record<string, number>): string | null {\r\n    const keys = Object.keys(groups).filter(key => groups[key] > 0);\r\n    if (keys.length === 0) return null;\r\n\r\n    const preferred = ['idle', 'home', 'stand', 'normal', 'default', 'main', 'loop', 'wait'];\r\n    for (const key of keys) {\r\n      const lower = key.toLowerCase();\r\n      if (preferred.some(token => lower.includes(token))) {\r\n        return key;\r\n      }\r\n    }\r\n\r\n    if (keys.includes('')) {\r\n      return '';\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  _startAutoMotionLoop(): void {\r\n    this._clearAutoMotionLoop();\r\n    if (!this.model) return;\r\n\r\n    const initialGroups = this.getMotionGroups();\r\n    const motionGroup = this._pickDefaultMotionGroup(initialGroups);\r\n    const allGroupNames = Object.keys(initialGroups).filter(key => initialGroups[key] > 0);\r\n    if (allGroupNames.length === 0) {\r\n      log('');\r\n      return;\r\n    }\r\n\r\n    const playOne = () => {\r\n      if (!this.model) return;\r\n      const groups = this.getMotionGroups();\r\n\r\n      if (motionGroup !== null) {\r\n        const count = groups[motionGroup] ?? 0;\r\n        if (count <= 0) return;\r\n        const idx = Math.floor(Math.random() * count);\r\n        this.playMotion(motionGroup, idx);\r\n        return;\r\n      }\r\n\r\n      const groupNames = Object.keys(groups).filter(key => groups[key] > 0);\r\n      if (groupNames.length === 0) return;\r\n      const randGroup = groupNames[Math.floor(Math.random() * groupNames.length)];\r\n      const count = groups[randGroup];\r\n      if (count <= 0) return;\r\n      const randIndex = Math.floor(Math.random() * count);\r\n      this.playMotion(randGroup, randIndex);\r\n    };\r\n\r\n    playOne();\r\n    this._autoMotionTimer = window.setInterval(playOne, 10000);\r\n    if (motionGroup !== null) {\r\n      log('', {\r\n        mode: 'preferred-group',\r\n        group: motionGroup || '(empty)',\r\n        intervalMs: 10000,\r\n      });\r\n    } else {\r\n      log('', {\r\n        mode: 'random-all-groups',\r\n        groupCount: allGroupNames.length,\r\n        intervalMs: 10000,\r\n      });\r\n    }\r\n  },\r\n\r\n  _stripJsonComments(text: string): string {\r\n    let output = '';\r\n    let inString = false;\r\n    let quoteChar = '\"';\r\n    let escaping = false;\r\n    let inLineComment = false;\r\n    let inBlockComment = false;\r\n\r\n    for (let i = 0; i < text.length; i++) {\r\n      const ch = text[i];\r\n      const next = i + 1 < text.length ? text[i + 1] : '';\r\n\r\n      if (inLineComment) {\r\n        if (ch === '\\n') {\r\n          inLineComment = false;\r\n          output += ch;\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if (inBlockComment) {\r\n        if (ch === '*' && next === '/') {\r\n          inBlockComment = false;\r\n          i++;\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if (inString) {\r\n        output += ch;\r\n        if (escaping) {\r\n          escaping = false;\r\n        } else if (ch === '\\\\') {\r\n          escaping = true;\r\n        } else if (ch === quoteChar) {\r\n          inString = false;\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if (ch === '/' && next === '/') {\r\n        inLineComment = true;\r\n        i++;\r\n        continue;\r\n      }\r\n\r\n      if (ch === '/' && next === '*') {\r\n        inBlockComment = true;\r\n        i++;\r\n        continue;\r\n      }\r\n\r\n      if (ch === '\"' || ch === '\\'') {\r\n        inString = true;\r\n        quoteChar = ch;\r\n      }\r\n\r\n      output += ch;\r\n    }\r\n\r\n    return output;\r\n  },\r\n\r\n  _tryParseModelJson(text: string): any | null {\r\n    const raw = String(text ?? '').replace(/^\\uFEFF/, '').trim();\r\n    if (!raw) return null;\r\n\r\n    try {\r\n      return JSON.parse(raw);\r\n    } catch {\r\n      // ignore\r\n    }\r\n\r\n    let cleaned = this._stripJsonComments(raw);\r\n    cleaned = cleaned.replace(/,\\s*([}\\]])/g, '$1');\r\n    cleaned = cleaned.replace(/}(\\s*){/g, '},$1{');\r\n    cleaned = cleaned.replace(/](\\s*){/g, '],$1{');\r\n    cleaned = cleaned.replace(/([}\\]0-9\"'])(\\s*)(?=\"[^\"]+\"\\s*:)/g, '$1,$2');\r\n\r\n    try {\r\n      return JSON.parse(cleaned);\r\n    } catch {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  _buildModelJsonCandidates(modelUrl: string): string[] {\r\n    const candidates = [modelUrl];\r\n\r\n    const addCandidate = (url: string) => {\r\n      if (!url) return;\r\n      if (!candidates.includes(url)) candidates.push(url);\r\n    };\r\n\r\n    addCandidate(modelUrl.replace(/\\/model\\.json(?=([?#].*)?$)/i, '/model.model.json'));\r\n    addCandidate(modelUrl.replace(/\\/model3\\.json(?=([?#].*)?$)/i, '/model.model3.json'));\r\n\r\n    return candidates;\r\n  },\r\n\r\n  async _fetchModelJsonCandidate(modelUrl: string, useProxy: boolean): Promise<any | null> {\r\n    const requestUrl = useProxy ? this._getProxiedUrl(modelUrl) : modelUrl;\r\n    const resp = await this._fetchWithTimeout(requestUrl, { method: 'GET', cache: 'no-store' }, 12000);\r\n    if (!resp.ok) return null;\r\n\r\n    const text = await resp.text();\r\n    const modelJson = this._tryParseModelJson(text);\r\n    if (!modelJson) return null;\r\n\r\n    return { modelJson, sourceUrl: modelUrl, useProxy };\r\n  },\r\n\r\n  /**\n   *  CORS  URL\n   * : getCorsProxyUrl -> enableCorsProxy -> corsProxy.getProxyUrl -> /proxy?url=\n   */\n  _getProxiedUrl(originalUrl: string): string {\n    const top = this._top() as any;\n    const url = String(originalUrl || '').trim();\n    if (!url) return url;\n    //  URL\n    if (url.toLowerCase().includes('/proxy?url=')) return url;\n\r\n    // SillyTavern  CORS \n    if (typeof top.getCorsProxyUrl === 'function') {\r\n      try {\r\n        const proxied = top.getCorsProxyUrl(url);\r\n        if (typeof proxied === 'string' && proxied) return proxied;\r\n      } catch (_e) { /* ignore */ }\r\n    }\r\n\r\n    if (typeof top.enableCorsProxy === 'function') {\r\n      try {\r\n        const proxied = top.enableCorsProxy(url);\r\n        if (typeof proxied === 'string' && proxied) return proxied;\r\n      } catch (_e) { /* ignore */ }\r\n    }\r\n\r\n    if (top.corsProxy?.getProxyUrl) {\r\n      try {\r\n        const proxied = top.corsProxy.getProxyUrl(url);\r\n        if (typeof proxied === 'string' && proxied) return proxied;\r\n      } catch (_e) { /* ignore */ }\r\n    }\r\n\r\n    // \n    const origin = top.location?.origin;\n    if (origin) {\n      return `${origin}/proxy?url=${encodeURIComponent(url)}`;\n    }\n\r\n    return url;\r\n  },\r\n\r\n  /**\n   *  SDK  Ticker\n   */\n  async init(): Promise<boolean> {\n    if (this.isReady) {\r\n      const runtime = Live2DLoader.getRuntime(this._top());\r\n      if (runtime) {\r\n        this._runtime = runtime;\r\n        return true;\r\n      }\r\n      this.isReady = false;\r\n    }\r\n\r\n    const sdkLoaded = await Live2DLoader.load();\r\n    if (!sdkLoaded) {\r\n      error('SDK  Live2DManager');\r\n      return false;\r\n    }\r\n\r\n    //  runtime \r\n    let runtime = Live2DLoader.getRuntime(this._top());\r\n    let retries = 30;\r\n    while (!runtime && retries > 0) {\r\n      await new Promise(r => setTimeout(r, 100));\r\n      runtime = Live2DLoader.getRuntime(this._top());\r\n      retries--;\r\n    }\r\n\r\n    if (!runtime?.pixi || !runtime?.live2dModel) {\r\n      error(' Live2D runtime ');\r\n      return false;\r\n    }\r\n\r\n    try {\n      const PIXI = runtime.pixi;\n      const Live2DModel = runtime.live2dModel;\n      if (typeof Live2DModel?.registerTicker !== 'function') {\n        throw new Error('Live2DModel.registerTicker ');\n      }\n\n      //  ticker\n      const lastRegisteredTicker = (Live2DModel as any)[TICKER_REGISTERED_FLAG] as unknown;\n      if (lastRegisteredTicker !== PIXI.Ticker) {\n        Live2DModel.registerTicker(PIXI.Ticker);\n        (Live2DModel as any)[TICKER_REGISTERED_FLAG] = PIXI.Ticker;\n        log('Live2D ticker ');\n      } else {\n        log('Live2D ticker ');\n      }\n\n      this._runtime = runtime;\n      this.isReady = true;\n      log('Live2DManager ');\n      return true;\n    } catch (e) {\r\n      error('Live2DManager ', e);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  /**\n   *  URL \n   *  model JSON ->  ->  data URL ->  Live2DModel.from\n   */\n  async loadModel(\n    modelPath: string,\r\n    onProgress?: (progress: ModelLoadProgress) => void,\r\n  ): Promise<boolean> {\r\n    let progress = 0;\r\n    const reportProgress = (percent: number, message: string): void => {\r\n      if (!onProgress) return;\r\n      progress = Math.max(progress, Math.round(percent));\r\n      onProgress({\r\n        percent: Math.max(0, Math.min(100, progress)),\r\n        message,\r\n      });\r\n    };\r\n\r\n    reportProgress(2, '');\r\n    if (!this.isReady) {\r\n      reportProgress(8, ' Live2D ');\r\n      const ready = await this.init();\r\n      if (!ready) {\r\n        reportProgress(100, 'Live2D ');\r\n        return false;\r\n      }\r\n    }\r\n\r\n    const runtime = Live2DLoader.getRuntime(this._top()) ?? this._runtime;\r\n    const PIXI = runtime?.pixi ?? this._getPIXI();\r\n    const Live2DModel = runtime?.live2dModel ?? PIXI?.live2d?.Live2DModel;\r\n    if (!PIXI || !Live2DModel) {\r\n      reportProgress(100, 'Live2D ');\r\n      error('Live2D ');\r\n      return false;\r\n    }\r\n\r\n    reportProgress(12, '');\r\n    //  URL\n    let modelUrl: string;\r\n    if (modelPath.startsWith('http://') || modelPath.startsWith('https://')) {\r\n      modelUrl = modelPath;\r\n    } else {\r\n      modelUrl = `${LIVE2D_CDN_BASE}${modelPath}`;\r\n    }\r\n\r\n    modelUrl = this._normalizeRemoteUrl(modelUrl);\r\n\r\n    try {\r\n      log(':', modelPath);\r\n      reportProgress(18, '');\r\n\r\n      // \n      this.destroyModel();\n\r\n      const modelUrlCandidates = this._buildModelUrlCandidates(modelUrl);\r\n      let model: any = null;\r\n      let texturesReady = false;\r\n      let loadedFromUrl = modelUrl;\r\n      let lastError: unknown = null;\r\n\r\n      for (let i = 0; i < modelUrlCandidates.length; i++) {\r\n        const candidateUrl = modelUrlCandidates[i];\r\n        let attemptModel: any = null;\r\n        let attemptTexturesReady = false;\r\n        const attemptLabel = modelUrlCandidates.length > 1\r\n          ? ` (${i + 1}/${modelUrlCandidates.length})`\r\n          : '';\r\n        const attemptProgressStart = 24 + Math.floor((i / modelUrlCandidates.length) * 38);\r\n\r\n        try {\r\n          if (i > 0) {\r\n            log(':', candidateUrl);\r\n          }\r\n\r\n          reportProgress(attemptProgressStart, `${attemptLabel}`);\r\n          const dataUrl = await this._buildRemoteModelDataUrl(candidateUrl);\r\n          reportProgress(attemptProgressStart + 12, `${attemptLabel}`);\r\n          try {\r\n            attemptModel = await this._createModelWithTimeout(Live2DModel, dataUrl);\r\n          } catch (fromError) {\r\n            warn('', fromError);\r\n            reportProgress(attemptProgressStart + 16, `${attemptLabel}`);\r\n            const proxyDataUrl = await this._buildRemoteModelDataUrl(candidateUrl, true);\r\n            attemptModel = await this._createModelWithTimeout(Live2DModel, proxyDataUrl);\r\n            log('');\r\n          }\r\n\r\n          reportProgress(attemptProgressStart + 22, `${attemptLabel}`);\r\n          attemptTexturesReady = await this._waitForTextures(attemptModel, (loadedCount, totalCount) => {\r\n            if (totalCount <= 0) {\r\n              return;\r\n            }\r\n            const textureRatio = Math.max(0, Math.min(1, loadedCount / totalCount));\r\n            const textureProgress = attemptProgressStart + 22 + textureRatio * 14;\r\n            reportProgress(textureProgress, ` ${loadedCount}/${totalCount}${attemptLabel}`);\r\n          });\r\n          if (!attemptTexturesReady) {\r\n            warn('');\r\n            reportProgress(attemptProgressStart + 36, `${attemptLabel}`);\r\n            try {\r\n              const proxyDataUrl = await this._buildRemoteModelDataUrl(candidateUrl, true);\r\n              const proxyModel = await this._createModelWithTimeout(Live2DModel, proxyDataUrl);\r\n              const proxyTexturesReady = await this._waitForTextures(proxyModel, (loadedCount, totalCount) => {\r\n                if (totalCount <= 0) {\r\n                  return;\r\n                }\r\n                const textureRatio = Math.max(0, Math.min(1, loadedCount / totalCount));\r\n                const textureProgress = attemptProgressStart + 36 + textureRatio * 8;\r\n                reportProgress(textureProgress, ` ${loadedCount}/${totalCount}${attemptLabel}`);\r\n              });\r\n              if (proxyTexturesReady) {\r\n                try {\r\n                  attemptModel.destroy();\r\n                } catch {\r\n                  // ignore\r\n                }\r\n                attemptModel = proxyModel;\r\n                attemptTexturesReady = true;\r\n                log('');\r\n              } else {\r\n                warn('');\r\n                try {\r\n                  proxyModel.destroy();\r\n                } catch {\r\n                  // ignore\r\n                }\r\n              }\r\n            } catch (retryError) {\r\n              warn('', retryError);\r\n            }\r\n          }\r\n\r\n          if (!attemptTexturesReady) {\r\n            const hasNextCandidate = i < modelUrlCandidates.length - 1;\r\n            if (hasNextCandidate) {\r\n              warn(':', candidateUrl);\r\n              reportProgress(attemptProgressStart + 44, `${attemptLabel}`);\r\n              throw new Error('');\r\n            }\r\n            warn('');\r\n          }\r\n\r\n          model = attemptModel;\r\n          texturesReady = attemptTexturesReady;\r\n          loadedFromUrl = candidateUrl;\r\n          lastError = null;\r\n          break;\r\n        } catch (attemptError) {\r\n          lastError = attemptError;\r\n          warn(` (${i + 1}/${modelUrlCandidates.length})`, candidateUrl, attemptError);\r\n          try {\r\n            attemptModel?.destroy?.();\r\n          } catch {\r\n            // ignore\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!model) {\r\n        throw (lastError instanceof Error ? lastError : new Error(''));\r\n      }\r\n\r\n      this.model = model;\n      const measuredBounds = this._readModelBaseBounds(model);\n      if (measuredBounds) {\n        this.modelBaseBounds = measuredBounds;\n        this.modelBaseWidth = measuredBounds.width;\n        this.modelBaseHeight = measuredBounds.height;\n      } else {\n        this.modelBaseBounds = null;\n        this.modelBaseWidth = model.width > 0 ? model.width : 500;\n        this.modelBaseHeight = model.height > 0 ? model.height : 800;\n      }\n      reportProgress(95, '');\n      log('', this.getExpressions());\n      log('', this.getMotionGroups());\n      if (!texturesReady) {\n        warn('');\n      }\n      if (loadedFromUrl !== modelUrl) {\r\n        log(':', loadedFromUrl);\r\n      }\r\n      reportProgress(100, '');\r\n      log('');\r\n      return true;\r\n    } catch (e) {\r\n      reportProgress(100, '');\r\n      error(':', e);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  /**\n   *  model JSON URL\n   *  JSON  data URL \n   */\n  async _buildRemoteModelDataUrl(modelUrl: string, forceProxyResources = false): Promise<string> {\n    const candidateUrls = this._buildModelJsonCandidates(modelUrl);\r\n\r\n    let modelJson: any = null;\r\n    let sourceModelUrl = modelUrl;\r\n    let useProxy = false;\r\n\r\n    for (const candidateUrl of candidateUrls) {\r\n      try {\r\n        const direct = await this._fetchModelJsonCandidate(candidateUrl, false);\r\n        if (direct) {\r\n          modelJson = direct.modelJson;\r\n          sourceModelUrl = direct.sourceUrl;\r\n          useProxy = false;\r\n          break;\r\n        }\r\n      } catch (directError) {\r\n        warn(' JSON ', candidateUrl, directError);\r\n      }\r\n\r\n      try {\r\n        const proxied = await this._fetchModelJsonCandidate(candidateUrl, true);\r\n        if (proxied) {\r\n          modelJson = proxied.modelJson;\r\n          sourceModelUrl = proxied.sourceUrl;\r\n          useProxy = true;\r\n          break;\r\n        }\r\n      } catch (proxyError) {\r\n        warn(' JSON ', candidateUrl, proxyError);\r\n      }\r\n    }\r\n\r\n    if (!modelJson) {\r\n      throw new Error(' JSON ');\r\n    }\r\n\r\n    if (sourceModelUrl !== modelUrl) {\r\n      log(' JSON :', sourceModelUrl);\r\n    }\r\n\r\n    const modifiedModelJson = JSON.parse(JSON.stringify(modelJson));\r\n    this._normalizeLegacyCubism2Settings(modifiedModelJson);\r\n\r\n    //  URL\n    const resolveUrl = (p: string): string => {\n      if (typeof p !== 'string') return p;\r\n      const raw = p.trim();\r\n      if (!raw) return p;\r\n\r\n      const normalized = this._normalizeResourceRef(raw);\r\n      const hasScheme = /^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(normalized);\r\n      const abs = hasScheme\r\n        ? this._normalizeRemoteUrl(normalized)\r\n        : this._normalizeRemoteUrl(new URL(normalized, sourceModelUrl).toString());\r\n\r\n      if ((useProxy || forceProxyResources) && (abs.startsWith('http://') || abs.startsWith('https://'))) {\r\n        return this._getProxiedUrl(abs);\r\n      }\r\n      return abs;\r\n    };\r\n\r\n    //  Cubism 3/4 model3.json\n    if (modifiedModelJson?.FileReferences) {\r\n      const refs = modifiedModelJson.FileReferences;\r\n      for (const key of Object.keys(refs)) {\r\n        if (typeof refs[key] === 'string') {\r\n          refs[key] = resolveUrl(refs[key]);\r\n        }\r\n      }\r\n\r\n      if (typeof refs.Moc === 'string') refs.Moc = resolveUrl(refs.Moc);\r\n      if (Array.isArray(refs.Textures)) refs.Textures = refs.Textures.map(resolveUrl);\r\n      if (typeof refs.Physics === 'string') refs.Physics = resolveUrl(refs.Physics);\r\n      if (typeof refs.Pose === 'string') refs.Pose = resolveUrl(refs.Pose);\r\n      if (typeof refs.UserData === 'string') refs.UserData = resolveUrl(refs.UserData);\r\n\r\n      if (refs.Motions && typeof refs.Motions === 'object') {\r\n        for (const groupName of Object.keys(refs.Motions)) {\r\n          const motionList = refs.Motions[groupName];\r\n          if (!Array.isArray(motionList)) continue;\r\n          for (const motionDef of motionList) {\r\n            if (!motionDef || typeof motionDef !== 'object') continue;\r\n            if (typeof motionDef.File === 'string') motionDef.File = resolveUrl(motionDef.File);\r\n            if (typeof motionDef.Sound === 'string') motionDef.Sound = resolveUrl(motionDef.Sound);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (Array.isArray(refs.Expressions)) {\r\n        for (const exprDef of refs.Expressions) {\r\n          if (!exprDef || typeof exprDef !== 'object') continue;\r\n          if (typeof exprDef.File === 'string') exprDef.File = resolveUrl(exprDef.File);\r\n        }\r\n      }\r\n    } else {\n      //  Cubism 2.1 model.json\n      if (typeof modifiedModelJson.model === 'string') {\n        modifiedModelJson.model = resolveUrl(modifiedModelJson.model);\n      } else if (typeof modifiedModelJson.Model === 'string') {\n        modifiedModelJson.Model = resolveUrl(modifiedModelJson.Model);\r\n      }\r\n\r\n      const textures = modifiedModelJson.textures || modifiedModelJson.Textures;\r\n      if (Array.isArray(textures)) {\r\n        for (let i = 0; i < textures.length; i++) {\r\n          if (typeof textures[i] === 'string') textures[i] = resolveUrl(textures[i]);\r\n        }\r\n      }\r\n\r\n      if (typeof modifiedModelJson.physics === 'string') modifiedModelJson.physics = resolveUrl(modifiedModelJson.physics);\r\n      if (typeof modifiedModelJson.Physics === 'string') modifiedModelJson.Physics = resolveUrl(modifiedModelJson.Physics);\r\n      if (typeof modifiedModelJson.pose === 'string') modifiedModelJson.pose = resolveUrl(modifiedModelJson.pose);\r\n      if (typeof modifiedModelJson.Pose === 'string') modifiedModelJson.Pose = resolveUrl(modifiedModelJson.Pose);\r\n\r\n      const motions = modifiedModelJson.motions || modifiedModelJson.Motions;\r\n      if (motions && typeof motions === 'object') {\r\n        for (const groupName of Object.keys(motions)) {\r\n          const motionList = motions[groupName];\r\n          if (!Array.isArray(motionList)) continue;\r\n          for (const motionDef of motionList) {\r\n            if (!motionDef || typeof motionDef !== 'object') continue;\r\n            if (typeof motionDef.file === 'string') motionDef.file = resolveUrl(motionDef.file);\r\n            if (typeof motionDef.File === 'string') motionDef.File = resolveUrl(motionDef.File);\r\n            if (typeof motionDef.sound === 'string') motionDef.sound = resolveUrl(motionDef.sound);\r\n            if (typeof motionDef.Sound === 'string') motionDef.Sound = resolveUrl(motionDef.Sound);\r\n          }\r\n        }\r\n      }\r\n\r\n      const expressions = modifiedModelJson.expressions || modifiedModelJson.Expressions;\r\n      if (Array.isArray(expressions)) {\n        for (const exprDef of expressions) {\n          if (!exprDef || typeof exprDef !== 'object') continue;\n          if (typeof exprDef.file === 'string') exprDef.file = resolveUrl(exprDef.file);\n          if (typeof exprDef.File === 'string') exprDef.File = resolveUrl(exprDef.File);\n        }\n      }\n    }\n\n    //  model json/\n    this._lastModelJson = modifiedModelJson;\n    this._lastModelJsonSourceUrl = sourceModelUrl;\n\n    //  data URL\n    const modelJsonStr = JSON.stringify(modifiedModelJson);\n    const modelJsonBase64 = btoa(unescape(encodeURIComponent(modelJsonStr)));\n    return `data:application/json;base64,${modelJsonBase64}`;\n  },\n\r\n  /**\n   *  PIXI \n   */\n  mountToStage(stageWidth: number, stageHeight: number, scale: number): void {\n    if (!this.model) return;\n\r\n    const stage = Live2DStage.getStage();\r\n    if (!stage) return;\r\n\r\n    // \n    while (stage.children.length > 0) {\n      stage.removeChildAt(0);\n    }\r\n\r\n    const transform = this._applyStageTransform(stageWidth, stageHeight, scale);\n    if (!transform) return;\n\n    stage.addChild(this.model);\n\n    try {\n      if ('autoUpdate' in this.model) {\n        (this.model as any).autoUpdate = true;\n      }\n    } catch {\n      // ignore\n    }\n\n    log('', {\n      stageWidth: transform.stageWidth,\n      stageHeight: transform.stageHeight,\n      scale: transform.finalScale,\n      modelWidth: transform.modelWidth,\n      modelHeight: transform.modelHeight,\n    });\n\r\n    //  idle\r\n    if (this.autoMotionLoopEnabled) {\r\n      this._startAutoMotionLoop();\r\n    } else {\r\n      this._clearAutoMotionLoop();\r\n    }\r\n  },\r\n\r\n  /**\n   * \n   */\n  updateScale(stageWidth: number, stageHeight: number, scale: number): void {\n    if (!this.model) return;\n    this._applyStageTransform(stageWidth, stageHeight, scale);\n  },\n\r\n  /**\n   * \n   */\n  _getModelBaseSize(): { width: number; height: number } {\n    if (this.modelBaseBounds) {\n      return {\n        width: this.modelBaseBounds.width,\n        height: this.modelBaseBounds.height,\n      };\n    }\n\n    if (this.modelBaseWidth && this.modelBaseHeight) {\n      return {\n        width: this.modelBaseWidth,\n        height: this.modelBaseHeight,\r\n      };\r\n    }\r\n\r\n    if (!this.model) {\r\n      return { width: 500, height: 800 };\r\n    }\r\n\r\n    const scaleX = this.model.scale?.x || 1;\r\n    const scaleY = this.model.scale?.y || 1;\r\n    const width = this.model.width > 0 && scaleX !== 0 ? this.model.width / scaleX : 500;\r\n    const height = this.model.height > 0 && scaleY !== 0 ? this.model.height / scaleY : 800;\r\n\r\n    return { width, height };\r\n  },\r\n\r\n  /**\n   * \n   */\n  getExpressions(): string[] {\n    if (!this.model) return [];\n    try {\n      const names = collectExpressionNames(this.model);\n      if (names.length > 0) return names;\n\n      const cached = this._lastModelJson;\n      if (cached) {\n        const fallbackNames = collectExpressionNamesFromUnknown(cached);\n        if (fallbackNames.length > 0) return fallbackNames;\n      }\n\n      return [];\n    } catch (e) {\n      warn('', e);\n      return [];\n    }\n  },\n\r\n  /**\n   * \n   */\n  getMotionGroups(): Record<string, number> {\n    const groups: Record<string, number> = {};\n    if (!this.model) return groups;\n\n    const mergeGroupMap = (source: Record<string, number> | null | undefined): void => {\n      if (!source || typeof source !== 'object') return;\n      for (const [name, count] of Object.entries(source)) {\n        const keyRaw = String(name ?? '');\n        const keyTrimmed = keyRaw.trim();\n        if (!keyTrimmed && keyRaw !== '') continue;\n        const groupName = keyTrimmed || '';\n        const parsedCount = Number(count);\n        const safeCount = Number.isFinite(parsedCount) && parsedCount > 0 ? Math.max(1, Math.floor(parsedCount)) : 1;\n        const prev = groups[groupName];\n        groups[groupName] = Number.isFinite(prev) && prev > 0 ? Math.max(prev, safeCount) : safeCount;\n      }\n    };\n\n    const motionManager = this.model?.internalModel?.motionManager as any;\n    const defs = motionManager?.definitions;\n    if (defs && typeof defs === 'object') {\n      for (const [group, motions] of Object.entries(defs)) {\n        if (Array.isArray(motions)) {\n          groups[group] = motions.length;\n        }\n      }\n    }\n\n    try {\n      const groupNames = collectMotionGroupNames(this.model);\n      for (const groupName of groupNames) {\n        if (!Object.prototype.hasOwnProperty.call(groups, groupName)) {\n          groups[groupName] = 1;\n        } else if (!Number.isFinite(groups[groupName]) || groups[groupName] <= 0) {\n          groups[groupName] = 1;\n        }\n      }\n    } catch (e) {\n      warn('', e);\n    }\n\n    try {\n      mergeGroupMap(collectMotionGroupCountsFromUnknown(this.model?.internalModel?.settings));\n      mergeGroupMap(collectMotionGroupCountsFromUnknown(this.model?.internalModel?.motionManager?.settings));\n    } catch (e) {\n      warn('', e);\n    }\n\n    try {\n      const cached = this._lastModelJson;\n      if (cached) {\n        mergeGroupMap(collectMotionGroupCountsFromUnknown(cached));\n      }\n    } catch (e) {\n      warn('', e);\n    }\n    return groups;\n  },\n\n  /**\n   *  +  group/index\n   */\n  getMotions(): Live2DMotionEntry[] {\n    if (!this.model) return [];\n\n    try {\n      const merged: Live2DMotionEntry[] = [];\n      const seen = new Set<string>();\n\n      const pushAll = (items: Live2DMotionEntry[]) => {\n        for (const item of Array.isArray(items) ? items : []) {\n          const group = String(item?.group ?? '');\n          const indexRaw = Number(item?.index);\n          const index = Number.isFinite(indexRaw) ? Math.max(0, Math.floor(indexRaw)) : 0;\n          const name = String(item?.name ?? '').trim();\n          if (!name) continue;\n          const key = `${group}#${index}#${name.toLowerCase()}`;\n          if (seen.has(key)) continue;\n          seen.add(key);\n          merged.push({ group, index, name });\n        }\n      };\n\n      pushAll(collectMotionEntries(this.model));\n\n      const cached = this._lastModelJson;\n      if (cached) {\n        const cachedAny = cached as any;\n        const motionsContainer =\n          cachedAny?.FileReferences?.Motions ?? cachedAny?.Motions ?? cachedAny?.motions ?? null;\n        if (motionsContainer) {\n          pushAll(\n            collectMotionEntries({\n              internalModel: { motionManager: { definitions: motionsContainer }, settings: cached },\n            } as any),\n          );\n        }\n      }\n\n      return merged;\n    } catch (e) {\n      warn('', e);\n      return [];\n    }\n  },\n\n  /**\n   * \n   */\n  playExpression(name?: string): void {\n    if (!this.model) return;\r\n    try {\r\n      if (name) {\r\n        this.model.expression(name);\r\n      } else {\r\n        const expressions = this.getExpressions();\r\n        if (expressions.length > 0) {\r\n          const idx = Math.floor(Math.random() * expressions.length);\r\n          this.model.expression(expressions[idx]);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      warn(':', e);\r\n    }\r\n  },\r\n\r\n  /**\n   * \n   */\n  playMotion(group?: string, index?: number): void {\n    if (!this.model) return;\r\n    try {\r\n      const runMotion = (groupName: string, motionIndex: number) => {\r\n        try {\r\n          this.model.motion(groupName, motionIndex);\r\n          return;\r\n        } catch (firstError) {\r\n          const mm = this.model?.internalModel?.motionManager as any;\r\n          if (typeof mm?.startMotion === 'function') {\r\n            mm.startMotion(groupName, motionIndex, 3);\r\n            return;\r\n          }\r\n          if (typeof mm?.startRandomMotion === 'function') {\r\n            mm.startRandomMotion(groupName, 3);\r\n            return;\r\n          }\r\n          throw firstError;\r\n        }\r\n      };\r\n\r\n      //  motions key  \"\"\r\n      if (typeof group === 'string') {\r\n        runMotion(group, index ?? 0);\r\n      } else {\r\n        const groups = this.getMotionGroups();\r\n        const groupNames = Object.keys(groups);\r\n        if (groupNames.length > 0) {\r\n          const randGroup = groupNames[Math.floor(Math.random() * groupNames.length)];\r\n          const count = groups[randGroup];\r\n          const randIndex = Math.floor(Math.random() * count);\r\n          runMotion(randGroup, randIndex);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      warn(':', e);\r\n    }\r\n  },\r\n\r\n  /**\n   * \n   */\n  playRandomAnimation(): void {\n    this.playExpression();\r\n    this.playMotion();\r\n  },\r\n\r\n  /**\r\n   *  TTS \r\n   * -  galgame  Live2DManager.setMouthOpen\r\n   * -  model characterId \r\n   */\r\n  setMouthOpen(_characterId: string, value: number): boolean {\r\n    const model = this.model;\r\n    if (!model?.internalModel?.coreModel) return false;\r\n\r\n    const coreModel = model.internalModel.coreModel;\r\n    const clampedValue = Math.max(0, Math.min(1, value));\r\n    this._mouthCurrentValue = clampedValue;\r\n    const topAny = this._top() as any;\n    const logPrefix = '[] LipSync';\n    this._ensureLipSyncHooks(model);\n    this._installCoreWriteMask(coreModel);\n\r\n    const getParamRange = (paramId: string, paramIndex: number): { min: number; max: number } => {\r\n      let min = Number.NaN;\r\n      let max = Number.NaN;\r\n\r\n      const readNumber = (v: any): number => {\r\n        const n = Number(v);\r\n        return Number.isFinite(n) ? n : Number.NaN;\r\n      };\r\n\r\n      if (Number.isFinite(paramIndex) && paramIndex >= 0) {\r\n        try {\r\n          if (typeof coreModel.getParameterMinimumValue === 'function') {\r\n            min = readNumber(coreModel.getParameterMinimumValue(paramIndex));\r\n          }\r\n        } catch {\r\n          // ignore\r\n        }\r\n        try {\r\n          if (typeof coreModel.getParameterMaximumValue === 'function') {\r\n            max = readNumber(coreModel.getParameterMaximumValue(paramIndex));\r\n          }\r\n        } catch {\r\n          // ignore\r\n        }\r\n      }\r\n\r\n      if (!Number.isFinite(min)) {\r\n        try {\r\n          if (typeof coreModel.getParamMin === 'function') {\r\n            min = readNumber(coreModel.getParamMin(paramId));\r\n          }\r\n        } catch {\r\n          // ignore\r\n        }\r\n      }\r\n      if (!Number.isFinite(max)) {\r\n        try {\r\n          if (typeof coreModel.getParamMax === 'function') {\r\n            max = readNumber(coreModel.getParamMax(paramId));\r\n          }\r\n        } catch {\r\n          // ignore\r\n        }\r\n      }\r\n\r\n      if (!Number.isFinite(min)) min = 0;\r\n      if (!Number.isFinite(max) || max <= min) max = 1;\r\n      return { min, max };\r\n    };\r\n\r\n    const mapToParamValue = (paramId: string, paramIndex: number): number => {\r\n      const { min, max } = getParamRange(paramId, paramIndex);\r\n      //  [-x, +x]  0 \r\n      if (min < 0 && max > 0) {\r\n        return clampedValue * max;\r\n      }\r\n      return min + (max - min) * clampedValue;\r\n    };\r\n\r\n    const getIndexById = (paramId: string): number => {\r\n      try {\r\n        if (typeof coreModel.getParameterIndex === 'function') {\r\n          return coreModel.getParameterIndex(paramId);\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.getParamIndex === 'function') {\r\n          return coreModel.getParamIndex(paramId);\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      return -1;\r\n    };\r\n\r\n    const applyById = (paramId: string): boolean => {\r\n      const paramIndex = getIndexById(paramId);\r\n      const mappedValue = mapToParamValue(paramId, paramIndex);\r\n      try {\r\n        if (typeof coreModel.setParameterValueById === 'function') {\r\n          coreModel.setParameterValueById(paramId, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.addParameterValueById === 'function') {\r\n          coreModel.addParameterValueById(paramId, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.setParamFloat === 'function') {\r\n          coreModel.setParamFloat(paramId, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.addParamFloat === 'function') {\r\n          coreModel.addParamFloat(paramId, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      return false;\r\n    };\r\n\r\n    const applyByIndex = (paramIndex: number): boolean => {\r\n      if (!Number.isFinite(paramIndex) || paramIndex < 0) return false;\r\n      const paramId = (() => {\r\n        try {\r\n          if (typeof coreModel.getParameterId === 'function') {\r\n            return String(coreModel.getParameterId(paramIndex) || '');\r\n          }\r\n        } catch {\r\n          // ignore\r\n        }\r\n        return '';\r\n      })();\r\n      const mappedValue = mapToParamValue(paramId || `__idx_${paramIndex}`, paramIndex);\r\n      try {\r\n        if (typeof coreModel.setParameterValueByIndex === 'function') {\r\n          coreModel.setParameterValueByIndex(paramIndex, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.addParameterValueByIndex === 'function') {\r\n          coreModel.addParameterValueByIndex(paramIndex, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.setParameterValue === 'function') {\r\n          coreModel.setParameterValue(paramIndex, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      try {\r\n        if (typeof coreModel.addParameterValue === 'function') {\r\n          coreModel.addParameterValue(paramIndex, mappedValue, 1);\r\n          return true;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      return false;\r\n    };\r\n\r\n    const paramNames = [\r\n      'ParamMouthOpenY',\r\n      'PARAM_MOUTH_OPEN_Y',\r\n      'ParamMouthOpen',\r\n      'ParamA',\r\n      'Param58',\r\n      'Param61',\r\n      'Param_Mouth_Open',\r\n      'mouth_open',\r\n    ];\r\n\r\n    let appliedAny = false;\r\n    if (this._manualMouthParamEnabled && this._manualMouthParamIds.length > 0) {\r\n      for (const manualId of this._manualMouthParamIds) {\r\n        const idx = getIndexById(manualId);\r\n        if (applyById(manualId)) appliedAny = true;\r\n        if (applyByIndex(idx)) appliedAny = true;\r\n      }\r\n    }\r\n\r\n    const visited = new Set<string>();\r\n    for (const paramName of paramNames) {\r\n      if (visited.has(paramName)) continue;\r\n      visited.add(paramName);\r\n      const paramIndex = getIndexById(paramName);\r\n      if (paramIndex >= 0) {\r\n        if (applyById(paramName)) appliedAny = true;\r\n        if (applyByIndex(paramIndex)) appliedAny = true;\r\n      }\r\n    }\r\n    if (appliedAny) return true;\r\n\r\n    //  mouth/lip/ParamA\r\n    if (this._mouthParamCore !== coreModel) {\r\n      this._mouthParamCore = coreModel;\r\n      this._mouthParamIds = [];\r\n      this._mouthParamIndexes = [];\r\n      this._mouthParamRangeMins = [];\r\n      this._mouthParamRangeMaxs = [];\r\n      this._mouthParamWarned = false;\r\n      try {\r\n        if (typeof coreModel.getParameterCount === 'function' && typeof coreModel.getParameterId === 'function') {\r\n          const count = Number(coreModel.getParameterCount()) || 0;\r\n          const numericFallback: Array<{ id: string; idx: number; min: number; max: number }> = [];\r\n          for (let i = 0; i < count; i++) {\r\n            const pid = String(coreModel.getParameterId(i) || '');\r\n            const low = pid.toLowerCase();\r\n            const range = getParamRange(pid, i);\r\n            if (low.includes('mouth') || low.includes('lip') || pid === 'ParamA') {\r\n              this._mouthParamIds.push(pid);\r\n              this._mouthParamIndexes.push(i);\r\n              this._mouthParamRangeMins.push(range.min);\r\n              this._mouthParamRangeMaxs.push(range.max);\r\n              continue;\r\n            }\r\n\r\n            // Cubism2  Param58/Param61\r\n            if (/^param\\d+$/i.test(pid) && range.max >= 8 && range.min >= -1) {\r\n              numericFallback.push({ id: pid, idx: i, min: range.min, max: range.max });\r\n            }\r\n          }\r\n\r\n          if (this._mouthParamIds.length === 0 && numericFallback.length > 0) {\r\n            numericFallback.sort((a, b) => b.max - a.max);\r\n            const picked = numericFallback.slice(0, 3);\r\n            for (const item of picked) {\r\n              this._mouthParamIds.push(item.id);\r\n              this._mouthParamIndexes.push(item.idx);\r\n              this._mouthParamRangeMins.push(item.min);\r\n              this._mouthParamRangeMaxs.push(item.max);\r\n            }\r\n            try {\r\n              topAny?.console?.log?.(`${logPrefix}: `, picked);\r\n            } catch {\r\n              // ignore\r\n            }\r\n          }\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < this._mouthParamIds.length; i++) {\r\n      const pid = this._mouthParamIds[i];\r\n      const pidx = this._mouthParamIndexes[i] ?? -1;\r\n      if (applyById(pid)) appliedAny = true;\r\n      if (applyByIndex(pidx)) appliedAny = true;\r\n    }\r\n    if (appliedAny) return true;\r\n\r\n    if (!this._mouthParamWarned) {\r\n      this._mouthParamWarned = true;\r\n      const msg = `${logPrefix}: `;\r\n      try {\r\n        topAny?.console?.warn?.(msg, {\r\n          presetCandidates: paramNames,\r\n          scannedIds: this._mouthParamIds,\r\n        });\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  _isMouthParam(paramIdOrIndex: string | number, coreModel: any): boolean {\r\n    const preset = [\r\n      'parammouthopeny',\r\n      'param_mouth_open_y',\r\n      'parammouthopen',\r\n      'parama',\r\n      'param58',\r\n      'param61',\r\n      'param_mouth_open',\r\n      'mouth_open',\r\n    ];\r\n\r\n    if (typeof paramIdOrIndex === 'number') {\r\n      if (this._mouthParamIndexes.includes(paramIdOrIndex)) return true;\r\n      try {\r\n        if (typeof coreModel?.getParameterId === 'function') {\r\n          const pid = String(coreModel.getParameterId(paramIdOrIndex) || '').trim();\r\n          if (pid) return this._isMouthParam(pid, coreModel);\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const id = String(paramIdOrIndex || '').trim().toLowerCase();\r\n    if (!id) return false;\r\n\r\n    if (this._manualMouthParamEnabled && this._manualMouthParamIdSet.size > 0) {\r\n      if (this._manualMouthParamIdSet.has(id)) return true;\r\n    }\r\n\r\n    if (preset.includes(id)) return true;\r\n\r\n    return this._mouthParamIds.some(pid => String(pid || '').trim().toLowerCase() === id);\r\n  },\r\n\r\n  _installCoreWriteMask(coreModel: any): void {\r\n    if (!coreModel) return;\r\n    if (this._writeMaskCore === coreModel) return;\r\n\r\n    if (this._writeMaskRestore) {\r\n      try {\r\n        this._writeMaskRestore();\r\n      } catch {\r\n        // ignore\r\n      }\r\n      this._writeMaskCore = null;\r\n      this._writeMaskRestore = null;\r\n    }\r\n\r\n    const restoreEntries: Array<{ method: string; raw: any }> = [];\r\n    const methods = [\r\n      'setParameterValueById',\r\n      'addParameterValueById',\r\n      'setParamFloat',\r\n      'addParamFloat',\r\n      'setParameterValueByIndex',\r\n      'addParameterValueByIndex',\r\n      'setParameterValue',\r\n      'addParameterValue',\r\n    ];\r\n\r\n    const getParamRef = (method: string, args: any[]): string | number | null => {\r\n      if (!Array.isArray(args) || args.length === 0) return null;\r\n      const first = args[0];\r\n      if (method.includes('ById') || method === 'setParamFloat' || method === 'addParamFloat') {\r\n        return typeof first === 'string' ? first : null;\r\n      }\r\n      if (method.includes('ByIndex')) {\r\n        return typeof first === 'number' ? first : null;\r\n      }\r\n      if (method === 'setParameterValue' || method === 'addParameterValue') {\r\n        if (typeof first === 'number' || typeof first === 'string') return first;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    for (const method of methods) {\r\n      const raw = coreModel?.[method];\r\n      if (typeof raw !== 'function') continue;\r\n      restoreEntries.push({ method, raw });\r\n      coreModel[method] = (...args: any[]) => {\r\n        const paramRef = getParamRef(method, args);\r\n        if (\r\n          paramRef !== null &&\r\n          this._lipSyncActive &&\r\n          this._inModelUpdate &&\r\n          this._isMouthParam(paramRef, coreModel)\r\n        ) {\r\n          return undefined;\r\n        }\r\n        return raw.apply(coreModel, args);\r\n      };\r\n    }\r\n\r\n    this._writeMaskCore = coreModel;\r\n    this._writeMaskRestore = () => {\r\n      for (const entry of restoreEntries) {\r\n        try {\r\n          coreModel[entry.method] = entry.raw;\r\n        } catch {\r\n          // ignore\r\n        }\r\n      }\r\n    };\r\n  },\r\n\r\n  _ensureLipSyncHooks(model: any): void {\r\n    if (!model) return;\r\n    if (this._updateHookModel === model) return;\r\n\r\n    if (this._updateHookRestore) {\r\n      try {\r\n        this._updateHookRestore();\r\n      } catch {\r\n        // ignore\r\n      }\r\n      this._updateHookRestore = null;\r\n      this._updateHookModel = null;\r\n    }\r\n\r\n    const internal = model?.internalModel;\r\n    const updater = internal?.update;\r\n    if (typeof updater !== 'function') return;\r\n\r\n    const rawUpdate = updater.bind(internal);\r\n    const self = this;\r\n    internal.update = function (...args: any[]) {\r\n      self._inModelUpdate = true;\r\n      let ret: any;\r\n      try {\r\n        ret = rawUpdate(...args);\r\n      } finally {\r\n        self._inModelUpdate = false;\r\n        if (self._lipSyncActive) {\r\n          try {\r\n            self._applyMouthValueToModel(model);\r\n          } catch {\r\n            // ignore\r\n          }\r\n        }\r\n      }\r\n      return ret;\r\n    };\r\n\r\n    this._updateHookModel = model;\r\n    this._updateHookRestore = () => {\r\n      try {\r\n        internal.update = updater;\r\n      } catch {\r\n        // ignore\r\n      }\r\n    };\r\n  },\r\n\r\n  _applyMouthValueToModel(model: any): boolean {\r\n    if (!model?.internalModel?.coreModel) return false;\r\n    const targetValue = Math.max(0, Math.min(1, this._mouthCurrentValue || 0));\r\n    const oldValue = this._mouthCurrentValue;\r\n    this._mouthCurrentValue = targetValue;\r\n    const applied = this.setMouthOpen('__mouth_hook__', targetValue);\r\n    this._mouthCurrentValue = oldValue;\r\n    return applied;\r\n  },\r\n\r\n  _getMouthParamSource(): 'manual' | 'auto' {\r\n    if (this._manualMouthParamEnabled && this._manualMouthParamIdSet.size > 0) {\r\n      return 'manual';\r\n    }\r\n    return 'auto';\r\n  },\r\n\r\n  getLipSyncDebugInfo(): {\n    lipSyncOverride: 'active' | 'inactive';\n    mouthParamsSource: 'manual' | 'auto';\n    mouthParamsCount: number;\n  } {\n    this._refreshManualMouthParams();\n    const source = this._getMouthParamSource();\n    const count = source === 'manual' ? this._manualMouthParamIdSet.size : this._mouthParamIds.length;\n    return {\n      lipSyncOverride: this._lipSyncActive ? 'active' : 'inactive',\n      mouthParamsSource: source,\r\n      mouthParamsCount: count,\r\n    };\r\n  },\r\n\r\n  /**\n   * \n   */\n  destroyModel(): void {\n    this._clearAutoMotionLoop();\n    this._lipSyncActive = false;\n    this._inModelUpdate = false;\n\n    if (this.model) {\r\n      try {\r\n        if (this.model.parent) {\r\n          this.model.parent.removeChild(this.model);\r\n        }\r\n        this.model.destroy();\r\n      } catch (e) {\r\n        warn('', e);\r\n      }\r\n      this.model = null;\r\n    }\r\n    this._mouthParamCore = null;\r\n    this._mouthParamIds = [];\r\n    this._mouthParamIndexes = [];\r\n    this._mouthParamRangeMins = [];\r\n    this._mouthParamRangeMaxs = [];\r\n    this._mouthParamWarned = false;\r\n    this._mouthCurrentValue = 0;\r\n    if (this._writeMaskRestore) {\r\n      try {\r\n        this._writeMaskRestore();\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n    this._writeMaskCore = null;\r\n    this._writeMaskRestore = null;\r\n    if (this._updateHookRestore) {\r\n      try {\r\n        this._updateHookRestore();\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n    this._updateHookModel = null;\r\n    this._updateHookRestore = null;\r\n    this._manualMouthParamEnabled = false;\n    this._manualMouthParamIds = [];\n    this._manualMouthParamIdSet.clear();\n    this.modelBaseWidth = null;\n    this.modelBaseHeight = null;\n    this.modelBaseBounds = null;\n    this._lastModelJson = null;\n    this._lastModelJsonSourceUrl = '';\n  },\n\r\n  /**\n   * \n   */\n  async _waitForTextures(\n    model: any,\r\n    onProgress?: (loadedCount: number, totalCount: number) => void,\r\n  ): Promise<boolean> {\r\n    return new Promise((resolve) => {\r\n      let retryCount = 0;\r\n      const maxRetries = 80;\r\n\r\n      const check = () => {\r\n        retryCount++;\r\n        if (retryCount > maxRetries) {\r\n          const internal = model.internalModel;\r\n          const textures = internal?.textures || internal?._textures || [];\r\n          const textureList = Array.isArray(textures) ? textures : [];\r\n          const loadedCount = textureList.filter((tex: any) => !!tex?.baseTexture?.valid).length;\r\n          onProgress?.(loadedCount, textureList.length);\r\n          warn(` (${loadedCount}/${textureList.length})`);\r\n          resolve(false);\r\n          return;\r\n        }\r\n\r\n        const internal = model.internalModel;\r\n        if (!internal) {\r\n          setTimeout(check, 100);\r\n          return;\r\n        }\r\n\r\n        const textures = internal.textures || internal._textures || [];\r\n        if (textures.length === 0) {\r\n          onProgress?.(1, 1);\r\n          resolve(true);\r\n          return;\r\n        }\r\n\r\n        const loadedCount = textures.filter((tex: any) => {\r\n          if (!tex) return false;\r\n          if (tex.baseTexture) return tex.baseTexture.valid;\r\n          return true;\r\n        }).length;\r\n        onProgress?.(loadedCount, textures.length);\r\n\r\n        const allLoaded = textures.every((tex: any) => {\r\n          if (!tex) return false;\r\n          if (tex.baseTexture) return tex.baseTexture.valid;\r\n          return true;\r\n        });\r\n\r\n        if (allLoaded) {\r\n          resolve(true);\r\n        } else {\r\n          setTimeout(check, 100);\r\n        }\r\n      };\r\n\r\n      check();\r\n    });\r\n  },\r\n};\r\n\r\n\r\n\r\n","import { SCRIPT_NAME } from '../core/constants';\nimport { Live2DManager } from './manager';\n\n// : TTSManager._getProxiedAudioUrl ( audio/tts-manager.ts)\nlet _ttsGetProxiedAudioUrlRef: ((url: string) => string) | null = null;\nexport function setLipSyncRefs({ getProxiedAudioUrl }: { getProxiedAudioUrl?: (url: string) => string }): void {\n  if (getProxiedAudioUrl) _ttsGetProxiedAudioUrlRef = getProxiedAudioUrl;\n}\n\nfunction getTopWindow(): Window {\n  try {\n    return window.parent ?? window;\n  } catch {\n    return window;\n  }\n}\n\n// ============================================\n// LipSync  ()\n// : galgame/src/live2d/lip-sync.js\n// ============================================\nexport const LipSyncManager = {\n  audioContext: null as AudioContext | null,\n  analyser: null as AnalyserNode | null,\n  dataArray: null as Uint8Array | null,\n  source: null as MediaElementAudioSourceNode | null,\n  animationFrameId: null as number | null,\n  currentCharacterId: null as string | null,\n  lastVolume: 0,\n  connectedAudioElements: new WeakSet<HTMLAudioElement>(),\n  _proxyAudio: null as HTMLAudioElement | null,\n  _proxyAudioCleanup: null as (() => void) | null,\n\n  config: {\n    fftSize: 256,\n    smoothingFactor: 0.5,\n    sensitivity: 2.5,\n    minThreshold: 0.01,\n  },\n\n  init(): void {\n    if (this.audioContext) {\n      if (this.audioContext.state === 'suspended') {\n        this.audioContext.resume().then(() => {\n          console.log(`[${SCRIPT_NAME}] LipSync: AudioContext `);\n        });\n      }\n      return;\n    }\n\n    const topAny: any = getTopWindow() as any;\n    const AudioContextClass = topAny.AudioContext || topAny.webkitAudioContext;\n    if (!AudioContextClass) {\n      console.warn(`[${SCRIPT_NAME}] LipSync:  Web Audio API`);\n      return;\n    }\n\n    this.audioContext = new AudioContextClass();\n    this.analyser = this.audioContext.createAnalyser();\n    this.analyser.fftSize = this.config.fftSize;\n    this.analyser.smoothingTimeConstant = this.config.smoothingFactor;\n    this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n    console.log(`[${SCRIPT_NAME}] LipSyncManager `);\n  },\n\n  _getProxiedAudioUrl(originalUrl: string): string {\n    if (_ttsGetProxiedAudioUrlRef) {\n      return _ttsGetProxiedAudioUrlRef(originalUrl);\n    }\n\n    const topAny: any = getTopWindow() as any;\n\n    if (typeof topAny.getCorsProxyUrl === 'function') {\n      try {\n        const proxied = topAny.getCorsProxyUrl(originalUrl);\n        console.log(`[${SCRIPT_NAME}] LipSync:  getCorsProxyUrl `);\n        return proxied;\n      } catch (e) {\n        console.warn(`[${SCRIPT_NAME}] LipSync: getCorsProxyUrl `, e);\n      }\n    }\n\n    if (typeof topAny.enableCorsProxy === 'function') {\n      try {\n        const proxied = topAny.enableCorsProxy(originalUrl);\n        if (typeof proxied === 'string' && proxied) {\n          console.log(`[${SCRIPT_NAME}] LipSync:  enableCorsProxy `);\n          return proxied;\n        }\n      } catch (e) {\n        console.warn(`[${SCRIPT_NAME}] LipSync: enableCorsProxy `, e);\n      }\n    }\n\n    if (topAny.corsProxy?.getProxyUrl) {\n      try {\n        const proxied = topAny.corsProxy.getProxyUrl(originalUrl);\n        console.log(`[${SCRIPT_NAME}] LipSync:  corsProxy.getProxyUrl `);\n        return proxied;\n      } catch (e) {\n        console.warn(`[${SCRIPT_NAME}] LipSync: corsProxy.getProxyUrl `, e);\n      }\n    }\n\n    if (topAny.location) {\n      const origin = topAny.location.origin;\n      console.log(`[${SCRIPT_NAME}] LipSync:  /proxy`);\n      return `${origin}/proxy?url=${encodeURIComponent(originalUrl)}`;\n    }\n\n    return originalUrl;\n  },\n\n  connectAudio(audioElement: HTMLAudioElement): boolean {\n    if (!audioElement) return false;\n\n    if (this.connectedAudioElements.has(audioElement)) {\n      this.init();\n      if (this.audioContext?.state === 'suspended') {\n        this.audioContext.resume();\n      }\n      return true;\n    }\n\n    this.init();\n    if (!this.audioContext || !this.analyser) return false;\n\n    if (this.audioContext.state === 'suspended') {\n      this.audioContext.resume().catch(e => console.warn('AudioContext resume failed:', e));\n    }\n\n    try {\n      if (this.source) {\n        try {\n          this.source.disconnect();\n        } catch {\n          // ignore\n        }\n      }\n\n      const topAny: any = getTopWindow() as any;\n      let targetAudio: HTMLAudioElement = audioElement;\n      const src = audioElement.src || '';\n      const isLocalhost = src.includes('127.0.0.1') || src.includes('localhost');\n      const isDataUrl = src.startsWith('data:');\n      const isBlobUrl = src.startsWith('blob:');\n      let isSameOrigin = false;\n      try {\n        const base = topAny.location?.origin || window.location.origin;\n        const url = new URL(src, base);\n        isSameOrigin = url.origin === base;\n      } catch {\n        // ignore\n      }\n\n      if (!isLocalhost && !isDataUrl && !isBlobUrl && !isSameOrigin) {\n        console.log(`[${SCRIPT_NAME}] LipSync: `);\n        const proxiedUrl = this._getProxiedAudioUrl(src);\n        if (proxiedUrl && proxiedUrl !== src) {\n          targetAudio = new Audio(proxiedUrl);\n          targetAudio.crossOrigin = 'anonymous';\n          console.log(`[${SCRIPT_NAME}] LipSync: `, proxiedUrl.substring(0, 50) + '...');\n\n          targetAudio.currentTime = audioElement.currentTime;\n          targetAudio.volume = 0.001;\n\n          if (!audioElement.paused) {\n            targetAudio.play().catch(e => {\n              console.warn(`[${SCRIPT_NAME}] LipSync: `, e);\n            });\n          }\n\n          const syncPlay = () => {\n            if (this._proxyAudio && this._proxyAudio.paused) {\n              this._proxyAudio.currentTime = audioElement.currentTime;\n              this._proxyAudio.play().catch(() => {});\n            }\n          };\n          const syncPause = () => {\n            if (this._proxyAudio) {\n              this._proxyAudio.pause();\n            }\n          };\n          const syncSeek = () => {\n            if (this._proxyAudio) {\n              this._proxyAudio.currentTime = audioElement.currentTime;\n            }\n          };\n\n          audioElement.addEventListener('play', syncPlay);\n          audioElement.addEventListener('playing', syncPlay);\n          audioElement.addEventListener('pause', syncPause);\n          audioElement.addEventListener('ended', syncPause);\n          audioElement.addEventListener('seeked', syncSeek);\n\n          this._proxyAudio = targetAudio;\n          this._proxyAudioCleanup = () => {\n            audioElement.removeEventListener('play', syncPlay);\n            audioElement.removeEventListener('playing', syncPlay);\n            audioElement.removeEventListener('pause', syncPause);\n            audioElement.removeEventListener('ended', syncPause);\n            audioElement.removeEventListener('seeked', syncSeek);\n          };\n        }\n      }\n\n      console.log(`[${SCRIPT_NAME}] LipSync: `, targetAudio.src?.substring(0, 50) + '...');\n      this.source = this.audioContext.createMediaElementSource(targetAudio);\n      this.source.connect(this.analyser);\n      this.analyser.connect(this.audioContext.destination);\n      this.connectedAudioElements.add(audioElement);\n      return true;\n    } catch (e) {\n      console.warn(`[${SCRIPT_NAME}] LipSync:  ( Source )`, e);\n      return false;\n    }\n  },\n\n  getVolume(): number {\n    if (!this.analyser || !this.dataArray) return 0;\n    this.analyser.getByteFrequencyData(this.dataArray);\n\n    let sum = 0;\n    const length = Math.floor(this.dataArray.length * 0.75);\n    for (let i = 0; i < length; i++) {\n      sum += this.dataArray[i];\n    }\n    const average = sum / length / 255;\n    return Math.min(1, average * this.config.sensitivity);\n  },\n\n  async startSync(characterId: string): Promise<void> {\n    this.stopSync();\n    this.currentCharacterId = characterId;\n    Live2DManager._setLipSyncActive(true);\n\n    if (this.audioContext?.state === 'suspended') {\n      try {\n        await this.audioContext.resume();\n        console.log(`[${SCRIPT_NAME}] LipSync: AudioContext `);\n      } catch (e) {\n        console.warn(`[${SCRIPT_NAME}] LipSync: AudioContext `, e);\n      }\n    }\n\n    console.log(\n      `[${SCRIPT_NAME}] LipSync:  - characterId=${characterId}, AudioContext.state=${this.audioContext?.state}`,\n    );\n\n    let frameCount = 0;\n    const update = () => {\n      if (!this.currentCharacterId) return;\n\n      let volume = this.getVolume();\n      if (volume < this.config.minThreshold) volume = 0;\n\n      volume = this.lastVolume * 0.4 + volume * 0.6;\n      this.lastVolume = volume;\n\n      frameCount++;\n      if (frameCount % 30 === 0) {\n        console.log(`[${SCRIPT_NAME}] LipSync: =${volume.toFixed(3)}, rawData[0]=${this.dataArray?.[0]}`);\n      }\n\n      Live2DManager.setMouthOpen(this.currentCharacterId, volume);\n      this.animationFrameId = requestAnimationFrame(update);\n    };\n    update();\n  },\n\n  stopSync(): void {\n    if (this.animationFrameId) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n\n    if (this.currentCharacterId) {\n      Live2DManager.setMouthOpen(this.currentCharacterId, 0);\n    }\n    this.currentCharacterId = null;\n    this.lastVolume = 0;\n    Live2DManager._setLipSyncActive(false);\n\n    if (this._proxyAudioCleanup) {\n      try {\n        this._proxyAudioCleanup();\n      } catch {\n        // ignore\n      }\n      this._proxyAudioCleanup = null;\n    }\n\n    if (this._proxyAudio) {\n      try {\n        this._proxyAudio.pause();\n        this._proxyAudio.src = '';\n      } catch {\n        // ignore\n      }\n      this._proxyAudio = null;\n    }\n  },\n\n  cleanup(): void {\n    this.stopSync();\n    if (this.source) {\n      try {\n        this.source.disconnect();\n      } catch {\n        // ignore\n      }\n      this.source = null;\n    }\n  },\n};\n","import { SCRIPT_NAME } from '../core/constants';\nimport { useSettingsStore } from '../core/settings';\nimport { Live2DManager } from '../live2d/manager';\nimport { LipSyncManager } from '../live2d/lip-sync';\nimport {\n  TTS_PROVIDER,\n  getTTSProvider,\n  getGptSoVitsConfig,\n  getCharacterTTSVoice,\n  resolveVoiceByName,\n  inferResourceId,\n  normalizeGptSoVitsSwitchMode,\n  type TTSSpeakerVoice,\n} from './tts-config';\n\n// ============================================\n// TTS  (LittleWhiteBox / GPT-SoVITS)\n// : galgame/src/audio/tts-manager.js\n// ============================================\n\nexport type TTSSegment = {\n  type: 'dialogue' | 'narration';\n  speaker: string;\n  text: string;\n  tts?: {\n    speaker?: string;\n    context?: string;\n  };\n};\n\ntype ToastFn = (msg: string) => void;\n\nfunction getTopWindow(): Window {\n  try {\n    return window.parent ?? window;\n  } catch {\n    return window;\n  }\n}\n\nfunction getSettingsSnapshot(): any {\n  try {\n    const store = useSettingsStore();\n    return store.settings;\n  } catch {\n    return {};\n  }\n}\n\n// : showToast ( UI )\nlet _showToastRef: ToastFn | null = null;\nexport function setTTSManagerRefs({ showToast }: { showToast?: ToastFn }): void {\n  if (showToast) _showToastRef = showToast;\n}\n\nfunction showToast(msg: string): void {\n  if (_showToastRef) {\n    _showToastRef(msg);\n    return;\n  }\n\n  try {\n    const topAny: any = getTopWindow() as any;\n    const t = topAny?.toastr || (window as any)?.toastr;\n    if (t?.info) {\n      t.info(msg);\n      return;\n    }\n  } catch {\n    // ignore\n  }\n\n  console.log(`[${SCRIPT_NAME}]`, msg);\n}\n\nfunction clipText(text: unknown, max = 160): string {\n  const value = String(text || '');\n  if (value.length <= max) return value;\n  return `${value.slice(0, max)}...`;\n}\n\nfunction isProxyNotFound(status: number, bodyText = ''): boolean {\n  if (status !== 404) return false;\n  const body = String(bodyText || '').toLowerCase();\n  return body.includes('not found') || body.includes('/proxy') || body.includes('cannot get');\n}\n\nfunction safeUrl(input: unknown): URL | null {\n  try {\n    return new URL(String(input || ''));\n  } catch {\n    return null;\n  }\n}\n\nfunction hasLive2D(): boolean {\n  return !!Live2DManager.model;\n}\n\nexport const TTSManager = {\n  enabled: true,\n  provider: TTS_PROVIDER.LITTLEWHITEBOX,\n  autoPlay: true,\n  isPlaying: false,\n  isLoading: false,\n  currentAudio: null as HTMLAudioElement | null,\n  currentSegmentId: null as string | null,\n  littleWhiteBox: null as any,\n  xiaobaixTts: null as any,\n\n  _gptSoVitsResolvedProxyRoute: '',\n  _gptSoVitsActiveWeights: { gpt: '', sovits: '' },\n  _gptSoVitsWeightSwitchUnavailable: false,\n  _gptSoVitsWeightSwitchWarned: false,\n  _gptSoVitsProxyWarned: false,\n  _gptSoVitsFetchController: null as AbortController | null,\n\n  _refreshProviderState(): boolean {\n    const provider = getTTSProvider();\n    this.provider = provider;\n    this.autoPlay = getSettingsSnapshot()?.ttsAutoPlay !== false;\n\n    const topAny: any = getTopWindow() as any;\n\n    if (provider === TTS_PROVIDER.LITTLEWHITEBOX) {\n      this.xiaobaixTts = null;\n      this.littleWhiteBox = null;\n\n      if (topAny?.xiaobaixTts) {\n        this.xiaobaixTts = topAny.xiaobaixTts;\n        console.log(`[${SCRIPT_NAME}] TTSManager:  xiaobaixTts`);\n      } else if (topAny?.LittleWhiteBox) {\n        this.littleWhiteBox = topAny.LittleWhiteBox;\n        console.log(`[${SCRIPT_NAME}] TTSManager:  LittleWhiteBox`);\n      }\n\n      if (!this.xiaobaixTts && !this.littleWhiteBox) {\n        console.warn(`[${SCRIPT_NAME}] TTSManager:  xiaobaixTts/LittleWhiteBoxTTS`);\n        this.enabled = false;\n        return false;\n      }\n\n      this.enabled = true;\n      return true;\n    }\n\n    if (provider === TTS_PROVIDER.GPT_SOVITS_V2) {\n      this.enabled = true;\n      return true;\n    }\n\n    this.enabled = true;\n    return true;\n  },\n\n  _onPlaybackEnded(reason = 'unknown'): void {\n    console.log(`[${SCRIPT_NAME}] TTS:  - reason=${reason}`);\n    this.isPlaying = false;\n    this.isLoading = false;\n    this.currentAudio = null;\n    this.currentSegmentId = null;\n    this.hideLoadingIndicator();\n    LipSyncManager.stopSync();\n  },\n\n  init(): void {\n    this._refreshProviderState();\n\n    try {\n      const topAny: any = getTopWindow() as any;\n      const jq = topAny?.jQuery || topAny?.$;\n      if (jq) {\n        jq(topAny).on('tts_complete tts_end', () => {\n          this._onPlaybackEnded('littlewhitebox_event');\n        });\n      }\n    } catch {\n      // ignore\n    }\n  },\n\n  showLoadingIndicator(): void {\n    try {\n      const top = getTopWindow();\n      top.document.getElementById('desktop-pet-stage')?.classList.add('desktop-pet-tts-active');\n    } catch {\n      // ignore\n    }\n  },\n\n  hideLoadingIndicator(): void {\n    try {\n      const top = getTopWindow();\n      top.document.getElementById('desktop-pet-stage')?.classList.remove('desktop-pet-tts-active');\n    } catch {\n      // ignore\n    }\n  },\n\n  _abortGptSoVitsFetch(reason = 'manual'): void {\n    if (this._gptSoVitsFetchController) {\n      try {\n        this._gptSoVitsFetchController.abort(reason);\n      } catch {\n        // ignore\n      }\n      this._gptSoVitsFetchController = null;\n    }\n  },\n\n  stop(): void {\n    if (!this.isPlaying && !this.isLoading) return;\n\n    this._abortGptSoVitsFetch('stop');\n    console.log(`[${SCRIPT_NAME}] TTS: `);\n\n    try {\n      if (this.currentAudio && typeof this.currentAudio.pause === 'function') {\n        try {\n          this.currentAudio.pause();\n        } catch {\n          // ignore\n        }\n        try {\n          this.currentAudio.src = '';\n          if (typeof this.currentAudio.load === 'function') this.currentAudio.load();\n        } catch {\n          // ignore\n        }\n      }\n\n      if (this.xiaobaixTts && this.xiaobaixTts.player) {\n        const player = this.xiaobaixTts.player;\n        if (typeof player._stopCurrent === 'function') {\n          player._stopCurrent();\n        }\n        if (typeof player.clear === 'function') {\n          player.clear();\n          console.log(`[${SCRIPT_NAME}] TTS: `);\n        }\n      } else if (this.xiaobaixTts && typeof this.xiaobaixTts.stop === 'function') {\n        this.xiaobaixTts.stop();\n      } else if (this.littleWhiteBox && typeof this.littleWhiteBox.stop === 'function') {\n        this.littleWhiteBox.stop();\n      }\n    } catch (e) {\n      console.warn(`[${SCRIPT_NAME}] TTS: `, e);\n    }\n\n    this.isPlaying = false;\n    this.isLoading = false;\n    this.currentAudio = null;\n    this.currentSegmentId = null;\n    this.hideLoadingIndicator();\n    LipSyncManager.stopSync();\n  },\n\n  _getCurrentAudioElement(): HTMLAudioElement | null {\n    if (this.currentAudio) return this.currentAudio;\n\n    if (this.xiaobaixTts?.player?.currentAudio) {\n      return this.xiaobaixTts.player.currentAudio;\n    }\n    if (this.xiaobaixTts?.player?.audio) {\n      return this.xiaobaixTts.player.audio;\n    }\n    if (this.xiaobaixTts?.player?.audioElements?.length > 0) {\n      return this.xiaobaixTts.player.audioElements[0];\n    }\n    if (this.xiaobaixTts?.audio) {\n      return this.xiaobaixTts.audio;\n    }\n\n    const top = getTopWindow();\n    const allAudio = top.document.querySelectorAll('audio');\n    for (const audio of allAudio) {\n      if ((audio as HTMLAudioElement).src && !(audio as HTMLAudioElement).paused) {\n        return audio as HTMLAudioElement;\n      }\n    }\n    const anyAudio = top.document.querySelector('audio[src]') as HTMLAudioElement | null;\n    if (anyAudio) return anyAudio;\n    return null;\n  },\n\n  _getPreferredAudioElement(): HTMLAudioElement | null {\n    if (this.currentAudio) return this.currentAudio;\n    if (this.xiaobaixTts?.player?.currentAudio) {\n      return this.xiaobaixTts.player.currentAudio;\n    }\n    if (this.xiaobaixTts?.player?.audio) {\n      return this.xiaobaixTts.player.audio;\n    }\n    if (this.xiaobaixTts?.player?.audioElements?.length > 0) {\n      return this.xiaobaixTts.player.audioElements[0];\n    }\n    if (this.xiaobaixTts?.audio) {\n      return this.xiaobaixTts.audio;\n    }\n    return null;\n  },\n\n  _isProxyUrl(url: unknown): boolean {\n    const parsed = safeUrl(url);\n    if (!parsed) return false;\n    return /^\\/proxy(\\/|\\?|$)/i.test(parsed.pathname);\n  },\n\n  _buildGptSoVitsProxyUrl(route: string, originalUrl: string): string {\n    const direct = String(originalUrl || '').trim();\n    if (!direct) return '';\n    const encoded = encodeURIComponent(direct);\n    const origin = window.location?.origin || '';\n\n    switch (route) {\n      case 'proxy_path_relative':\n        return `/proxy/${encoded}`;\n      case 'proxy_path_origin':\n        return origin ? `${origin}/proxy/${encoded}` : '';\n      case 'proxy_query_relative':\n        return `/proxy?url=${encoded}`;\n      case 'proxy_query_origin':\n        return origin ? `${origin}/proxy?url=${encoded}` : '';\n      default:\n        return '';\n    }\n  },\n\n  _rememberProxyRoute(route: string, url: string): void {\n    if (!route) return;\n    if (this._gptSoVitsResolvedProxyRoute !== route) {\n      this._gptSoVitsResolvedProxyRoute = route;\n      console.log(`[${SCRIPT_NAME}] GPT-SoVITS : ${route} -> ${clipText(url, 96)}`);\n    }\n  },\n\n  _getProxiedAudioUrl(originalUrl: string): string {\n    const directUrl = String(originalUrl || '').trim();\n    if (!directUrl) return directUrl;\n    if (this._isProxyUrl(directUrl)) return directUrl;\n\n    const topAny: any = getTopWindow() as any;\n\n    if (typeof topAny.getCorsProxyUrl === 'function') {\n      try {\n        const proxied = topAny.getCorsProxyUrl(directUrl);\n        if (typeof proxied === 'string' && proxied) return proxied;\n      } catch {\n        // ignore\n      }\n    }\n\n    if (typeof topAny.enableCorsProxy === 'function') {\n      try {\n        const proxied = topAny.enableCorsProxy(directUrl);\n        if (typeof proxied === 'string' && proxied) return proxied;\n      } catch {\n        // ignore\n      }\n    }\n\n    if (topAny.corsProxy?.getProxyUrl) {\n      try {\n        const proxied = topAny.corsProxy.getProxyUrl(directUrl);\n        if (typeof proxied === 'string' && proxied) return proxied;\n      } catch {\n        // ignore\n      }\n    }\n\n    const remembered = String(this._gptSoVitsResolvedProxyRoute || '').trim();\n    if (remembered) {\n      const rememberedUrl = this._buildGptSoVitsProxyUrl(remembered, directUrl);\n      if (rememberedUrl) return rememberedUrl;\n    }\n\n    return (\n      this._buildGptSoVitsProxyUrl('proxy_path_relative', directUrl) ||\n      this._buildGptSoVitsProxyUrl('proxy_query_relative', directUrl) ||\n      directUrl\n    );\n  },\n\n  _buildGptSoVitsTtsUrl(text: string, resolvedVoice: TTSSpeakerVoice): string {\n    const cfg = getGptSoVitsConfig();\n    const base = String(cfg.apiUrl || '').replace(/\\/$/, '');\n    const endpointRaw = String(cfg.endpoint || '/tts').trim();\n    const endpoint = endpointRaw.startsWith('/') ? endpointRaw : `/${endpointRaw}`;\n    if (!base) return '';\n\n    try {\n      const url = new URL(base + endpoint);\n      const vcfg: any = resolvedVoice?.gptSoVits || {};\n\n      const textLang = String(vcfg.textLang || cfg.textLang || 'auto').trim() || 'auto';\n      const promptLang = String(vcfg.promptLang || 'zh').trim() || 'zh';\n      const refAudioPath = String(vcfg.refAudioPath || '').trim();\n      const promptText = String(vcfg.promptText || '').trim();\n\n      url.searchParams.set('text', text);\n      url.searchParams.set('text_lang', textLang);\n      url.searchParams.set('ref_audio_path', refAudioPath);\n      url.searchParams.set('prompt_lang', promptLang);\n      url.searchParams.set('prompt_text', promptText);\n\n      if (cfg.textSplitMethod) url.searchParams.set('text_split_method', String(cfg.textSplitMethod));\n      if (cfg.mediaType) url.searchParams.set('media_type', String(cfg.mediaType));\n      url.searchParams.set('streaming_mode', cfg.streamingMode ? 'true' : 'false');\n      if (cfg.speedFactor) url.searchParams.set('speed_factor', String(cfg.speedFactor));\n\n      return url.toString();\n    } catch (e) {\n      console.warn(`[${SCRIPT_NAME}] GPT-SoVITS: URL`, e);\n      return '';\n    }\n  },\n\n  async _requestGptSoVitsApi(\n    method: 'GET' | 'POST',\n    pathname: string,\n    queryParams: Record<string, any> = {},\n    jsonBody: any = undefined,\n  ): Promise<{ text: string; status: number; url: string; route: string }> {\n    const cfg = getGptSoVitsConfig();\n    const base = String(cfg.apiUrl || '').replace(/\\/$/, '');\n    const pathRaw = String(pathname || '').trim() || '/';\n    const path = pathRaw.startsWith('/') ? pathRaw : `/${pathRaw}`;\n    if (!base) throw new Error('GPT-SoVITS API ');\n\n    const directUrlObj = new URL(base + path);\n    Object.entries(queryParams || {}).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== '') {\n        directUrlObj.searchParams.set(String(key), String(value));\n      }\n    });\n    const directUrl = directUrlObj.toString();\n\n    const attemptTargets: Array<{ route: string; url: string }> = [];\n    if (!cfg.useCorsProxy) {\n      attemptTargets.push({ route: 'direct', url: directUrl });\n    } else {\n      const preferred = String(this._gptSoVitsResolvedProxyRoute || '').trim();\n      const seen = new Set<string>();\n      const addTarget = (route: string, url: string) => {\n        if (!url || seen.has(url)) return;\n        seen.add(url);\n        attemptTargets.push({ route, url });\n      };\n\n      if (preferred) addTarget(preferred, this._buildGptSoVitsProxyUrl(preferred, directUrl));\n      addTarget('proxy_path_relative', this._buildGptSoVitsProxyUrl('proxy_path_relative', directUrl));\n      addTarget('proxy_path_origin', this._buildGptSoVitsProxyUrl('proxy_path_origin', directUrl));\n      addTarget('proxy_query_relative', this._buildGptSoVitsProxyUrl('proxy_query_relative', directUrl));\n      addTarget('proxy_query_origin', this._buildGptSoVitsProxyUrl('proxy_query_origin', directUrl));\n      addTarget('direct', directUrl);\n    }\n\n    const errors: string[] = [];\n    for (const target of attemptTargets) {\n      const controller = new AbortController();\n      this._gptSoVitsFetchController = controller;\n\n      try {\n        const options: RequestInit & { headers: Record<string, string> } = {\n          method,\n          mode: 'cors',\n          credentials: 'omit',\n          signal: controller.signal,\n          headers: {},\n        };\n\n        if (jsonBody !== undefined) {\n          options.headers['Content-Type'] = 'application/json';\n          options.body = JSON.stringify(jsonBody);\n        }\n\n        const response = await fetch(target.url, options);\n        const text = await response.text();\n\n        if (response.ok) {\n          if (target.route !== 'direct') {\n            this._rememberProxyRoute(target.route, target.url);\n          }\n          return { text, status: response.status, url: target.url, route: target.route };\n        }\n\n        if (target.route !== 'direct' && isProxyNotFound(response.status, text)) {\n          errors.push(`${target.route}:HTTP${response.status}(proxy-not-found)`);\n          continue;\n        }\n\n        errors.push(`${target.route}:HTTP${response.status}:${clipText(text, 120)}`);\n      } catch (e: any) {\n        const msg = e?.message || String(e);\n        errors.push(`${target.route}:${msg}`);\n      } finally {\n        if (this._gptSoVitsFetchController === controller) {\n          this._gptSoVitsFetchController = null;\n        }\n      }\n    }\n\n    throw new Error(`${method} ${path}  -> ${errors.join(' | ')}`);\n  },\n\n  async _fetchGptSoVitsApi(pathname: string, queryParams: Record<string, any> = {}): Promise<string> {\n    const { text } = await this._requestGptSoVitsApi('GET', pathname, queryParams);\n    return text;\n  },\n\n  async _postGptSoVitsApi(pathname: string, jsonBody: Record<string, any> = {}): Promise<string> {\n    const { text } = await this._requestGptSoVitsApi('POST', pathname, {}, jsonBody);\n    return text;\n  },\n\n  async _setGptSoVitsWeights(kind: 'gpt' | 'sovits', weightsPath: string): Promise<void> {\n    const normalizedKind = kind === 'gpt' ? 'gpt' : 'sovits';\n    const path = String(weightsPath || '').trim();\n    if (!path) return;\n    const endpoint = `/set_${normalizedKind}_weights`;\n    await this._fetchGptSoVitsApi(endpoint, { weights_path: path });\n  },\n\n  async _setGptSoVitsModelPair(\n    gptWeightsPath: string,\n    sovitsWeightsPath: string,\n    endpointOverride = '',\n  ): Promise<void> {\n    const cfg = getGptSoVitsConfig();\n    const endpoint = String(endpointOverride || cfg.setModelEndpoint || '/set_model').trim() || '/set_model';\n\n    try {\n      await this._postGptSoVitsApi(endpoint, {\n        gpt_model_path: String(gptWeightsPath || '').trim(),\n        sovits_model_path: String(sovitsWeightsPath || '').trim(),\n      });\n      return;\n    } catch {\n      await this._fetchGptSoVitsApi(endpoint, {\n        gpt_model_path: String(gptWeightsPath || '').trim(),\n        sovits_model_path: String(sovitsWeightsPath || '').trim(),\n      });\n    }\n  },\n\n  async _ensureGptSoVitsWeights(resolvedVoice: TTSSpeakerVoice): Promise<boolean> {\n    const cfg = getGptSoVitsConfig();\n    const vcfg: any = resolvedVoice?.gptSoVits || {};\n\n    const desiredGpt = String(vcfg.gptWeightsPath || '').trim();\n    const desiredSovits = String(vcfg.sovitsWeightsPath || '').trim();\n\n    let switchMode = normalizeGptSoVitsSwitchMode(vcfg.modelSwitchMode || cfg.modelSwitchMode);\n    const setModelEndpoint = String(vcfg.setModelEndpoint || cfg.setModelEndpoint || '/set_model').trim() || '/set_model';\n\n    if (switchMode === 'none') return true;\n    if (!desiredGpt && !desiredSovits) return true;\n    if (this._gptSoVitsWeightSwitchUnavailable) return false;\n\n    if (switchMode === 'set_model') {\n      if (desiredGpt && desiredSovits) {\n        try {\n          await this._setGptSoVitsModelPair(desiredGpt, desiredSovits, setModelEndpoint);\n          this._gptSoVitsActiveWeights.gpt = desiredGpt;\n          this._gptSoVitsActiveWeights.sovits = desiredSovits;\n          return true;\n        } catch (e) {\n          console.warn(`[${SCRIPT_NAME}] GPT-SoVITS: set_model  set_weights`, e);\n          switchMode = 'set_weights';\n        }\n      } else {\n        switchMode = 'set_weights';\n      }\n    }\n\n    if (switchMode === 'set_weights') {\n      try {\n        if (desiredGpt && desiredGpt !== this._gptSoVitsActiveWeights.gpt) {\n          await this._setGptSoVitsWeights('gpt', desiredGpt);\n          this._gptSoVitsActiveWeights.gpt = desiredGpt;\n        }\n        if (desiredSovits && desiredSovits !== this._gptSoVitsActiveWeights.sovits) {\n          await this._setGptSoVitsWeights('sovits', desiredSovits);\n          this._gptSoVitsActiveWeights.sovits = desiredSovits;\n        }\n        return true;\n      } catch (e) {\n        if (!this._gptSoVitsWeightSwitchWarned) {\n          this._gptSoVitsWeightSwitchWarned = true;\n          showToast('GPT-SoVITS  /proxy  set_* ');\n        }\n        console.warn(`[${SCRIPT_NAME}] GPT-SoVITS: set_weights `, e);\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  async _speakWithGptSoVits(segment: TTSSegment, segmentId: string, resolvedVoice: TTSSpeakerVoice): Promise<boolean> {\n    const cfg = getGptSoVitsConfig();\n    const vcfg: any = resolvedVoice?.gptSoVits || {};\n\n    if (!cfg.apiUrl) {\n      showToast('GPT-SoVITS:  API ');\n      return false;\n    }\n    if (!String(vcfg.refAudioPath || '').trim()) {\n      showToast('GPT-SoVITS:  refAudioPath');\n      return false;\n    }\n\n    await this._ensureGptSoVitsWeights(resolvedVoice);\n\n    const directUrl = this._buildGptSoVitsTtsUrl(segment.text, resolvedVoice);\n    if (!directUrl) {\n      showToast('GPT-SoVITS: URL');\n      return false;\n    }\n\n    const audioUrl = cfg.useCorsProxy ? this._getProxiedAudioUrl(directUrl) : directUrl;\n\n    const audio = new Audio();\n    audio.crossOrigin = 'anonymous';\n    audio.src = audioUrl;\n\n    this.currentAudio = audio;\n    this.currentSegmentId = segmentId;\n\n    const onEnded = () => {\n      if (this.currentAudio === audio) {\n        this._onPlaybackEnded('gpt_sovits_audio_ended');\n      }\n    };\n    const onError = (e: any) => {\n      console.warn(`[${SCRIPT_NAME}] GPT-SoVITS: audio error`, e);\n      if (!this._gptSoVitsProxyWarned && cfg.useCorsProxy) {\n        this._gptSoVitsProxyWarned = true;\n        showToast('GPT-SoVITS  /proxy  CORS ');\n      } else {\n        showToast('GPT-SoVITS //CORS');\n      }\n      onEnded();\n    };\n\n    audio.addEventListener('ended', onEnded, { once: true });\n    audio.addEventListener('error', onError, { once: true });\n\n    try {\n      await audio.play();\n    } catch (e) {\n      console.warn(`[${SCRIPT_NAME}] GPT-SoVITS: play() `, e);\n      showToast('GPT-SoVITS ');\n      onEnded();\n      return false;\n    }\n\n    this.isPlaying = true;\n\n    if (hasLive2D()) {\n      const lipId = segment.speaker || 'pet';\n      console.log(`[${SCRIPT_NAME}] TTS:  - hasLive2D=true, speaker=${lipId}`);\n      this._startLipSyncOnPlay(lipId);\n    } else {\n      console.log(`[${SCRIPT_NAME}] TTS: Live2D `);\n    }\n\n    return true;\n  },\n\n  _startLipSyncWhenModelReady(characterId: string, maxWait = 5000): void {\n    const startTime = Date.now();\n    const tryWait = () => {\n      if (hasLive2D()) {\n        this._startLipSyncOnPlay(characterId, maxWait);\n        return;\n      }\n      if (Date.now() - startTime < maxWait) {\n        setTimeout(tryWait, 120);\n      } else {\n        console.warn(`[${SCRIPT_NAME}] LipSync:  - characterId=${characterId}`);\n      }\n    };\n    tryWait();\n  },\n\n  async _waitForModelReadyBeforeTTS(_characterId: string, maxWait = 5000): Promise<boolean> {\n    const startTime = Date.now();\n    while (Date.now() - startTime < maxWait) {\n      if (hasLive2D()) return true;\n      await new Promise(r => setTimeout(r, 120));\n    }\n    console.warn(`[${SCRIPT_NAME}] TTS: TTS`);\n    return false;\n  },\n\n  _startLipSyncOnPlay(characterId: string, maxWait = 5000): void {\n    console.log(`[${SCRIPT_NAME}] LipSync: _startLipSyncOnPlay  - characterId=${characterId}`);\n    const startTime = Date.now();\n    let hasStarted = false;\n\n    const tryBind = () => {\n      const preferredAudio = this._getPreferredAudioElement();\n      const audioElement = preferredAudio || this._getCurrentAudioElement();\n      console.log(\n        `[${SCRIPT_NAME}] LipSync:  -`,\n        audioElement\n          ? `src=${audioElement.src?.substring(0, 50)}... paused=${audioElement.paused} currentTime=${audioElement.currentTime}`\n          : 'null',\n      );\n\n      if (!audioElement) {\n        if (Date.now() - startTime < maxWait && !hasStarted) {\n          setTimeout(tryBind, 100);\n        } else if (!hasStarted) {\n          console.warn(`[${SCRIPT_NAME}] LipSync: `);\n        }\n        return;\n      }\n\n      if (!audioElement.paused) {\n        console.log(`[${SCRIPT_NAME}] LipSync: `);\n        hasStarted = true;\n        this._bindLipSyncToAudio(audioElement, characterId);\n        return;\n      }\n\n      if (!preferredAudio) {\n        if (Date.now() - startTime < maxWait && !hasStarted) {\n          setTimeout(tryBind, 100);\n        } else if (!hasStarted) {\n          console.warn(`[${SCRIPT_NAME}] LipSync: `);\n          if (audioElement.src) {\n            this._bindLipSyncToAudio(audioElement, characterId);\n          }\n        }\n        return;\n      }\n\n      console.log(`[${SCRIPT_NAME}] LipSync: ...`);\n\n      const onPlaying = () => {\n        if (hasStarted) return;\n        hasStarted = true;\n        console.log(`[${SCRIPT_NAME}] LipSync: `);\n        this._bindLipSyncToAudio(audioElement, characterId);\n      };\n\n      audioElement.addEventListener('playing', onPlaying, { once: true });\n      audioElement.addEventListener('play', onPlaying, { once: true });\n\n      const onTimeUpdate = () => {\n        if (hasStarted) return;\n        if (audioElement.currentTime > 0 && !audioElement.paused) {\n          console.log(`[${SCRIPT_NAME}] LipSync: timeupdate `);\n          onPlaying();\n        }\n      };\n      audioElement.addEventListener('timeupdate', onTimeUpdate);\n\n      setTimeout(() => {\n        audioElement.removeEventListener('playing', onPlaying);\n        audioElement.removeEventListener('play', onPlaying);\n        audioElement.removeEventListener('timeupdate', onTimeUpdate);\n        if (!hasStarted) {\n          console.warn(`[${SCRIPT_NAME}] LipSync: `);\n          if (audioElement.src) {\n            this._bindLipSyncToAudio(audioElement, characterId);\n          }\n        }\n      }, maxWait);\n    };\n\n    tryBind();\n  },\n\n  _bindLipSyncToAudio(audioElement: HTMLAudioElement, characterId: string): void {\n    if (LipSyncManager.connectAudio(audioElement)) {\n      void LipSyncManager.startSync(characterId);\n    }\n\n    const onEnd = () => {\n      console.log(`[${SCRIPT_NAME}] LipSync: /`);\n      LipSyncManager.stopSync();\n      audioElement.removeEventListener('ended', onEnd);\n      audioElement.removeEventListener('pause', onEnd);\n    };\n\n    audioElement.addEventListener('ended', onEnd, { once: true });\n    audioElement.addEventListener('pause', onEnd, { once: true });\n  },\n\n  async speak(segment: TTSSegment, segmentId: string): Promise<void> {\n    if (!segment || segment.type !== 'dialogue') {\n      if (segment && segment.type === 'narration') {\n        console.log(`[${SCRIPT_NAME}] TTS:  - ${segment.text.substring(0, 30)}...`);\n      }\n      return;\n    }\n    if (!segment.text) return;\n\n    const provider = getTTSProvider();\n    if (provider !== this.provider || !this.enabled) {\n      this._refreshProviderState();\n    }\n    if (!this.enabled) return;\n\n    const settings = getSettingsSnapshot();\n    const ttsConfig = segment.tts || {};\n    const boundVoice = getCharacterTTSVoice(segment.speaker);\n    let voiceName = ttsConfig.speaker || boundVoice || settings.ttsDefaultSpeaker;\n    if (!voiceName) {\n      voiceName = provider === TTS_PROVIDER.GPT_SOVITS_V2 ? segment.speaker || '' : '';\n    }\n    if (!voiceName) voiceName = '';\n    const context = ttsConfig.context || '';\n\n    const resolvedVoice = await resolveVoiceByName(String(voiceName || ''));\n    if (!resolvedVoice) {\n      console.error(`[${SCRIPT_NAME}] TTS:  \"${voiceName}\" (provider=${provider})`);\n      if (provider === TTS_PROVIDER.GPT_SOVITS_V2) {\n        showToast('GPT-SoVITS: ');\n      }\n      return;\n    }\n\n    console.log(\n      `[${SCRIPT_NAME}] TTS: provider=${provider}, voiceName=${voiceName}, context=${context || ''}, text=${segment.text.substring(0, 30)}...`,\n    );\n    if (hasLive2D()) {\n      try {\n        const info = Live2DManager.getLipSyncDebugInfo();\n        console.log(\n          `[${SCRIPT_NAME}] TTS: lipSyncOverride=active, mouthParamsSource=${info.mouthParamsSource}, count=${info.mouthParamsCount}`,\n        );\n      } catch {\n        // ignore\n      }\n    }\n\n    this.isLoading = true;\n    this.showLoadingIndicator();\n\n    try {\n      await this._waitForModelReadyBeforeTTS(segment.speaker);\n\n      if (provider === TTS_PROVIDER.GPT_SOVITS_V2) {\n        await this._speakWithGptSoVits(segment, segmentId, resolvedVoice);\n        return;\n      }\n\n      const speakerValue = resolvedVoice.value;\n      const resourceId = inferResourceId(speakerValue);\n\n      if (this.xiaobaixTts && typeof this.xiaobaixTts.speak === 'function') {\n        await this.xiaobaixTts.speak(segment.text, {\n          speaker: speakerValue,\n          resourceId,\n          contextTexts: context ? [context] : [],\n        });\n        this.isPlaying = true;\n        this.currentSegmentId = segmentId;\n        if (hasLive2D()) {\n          this._startLipSyncOnPlay(segment.speaker || 'pet');\n        }\n        return;\n      }\n\n      if (this.littleWhiteBox && typeof this.littleWhiteBox.callGenerate === 'function') {\n        await this.littleWhiteBox.callGenerate({\n          message: segment.text,\n          speaker: speakerValue,\n          resourceId,\n          contextTexts: context ? [context] : [],\n        });\n        this.isPlaying = true;\n        this.currentSegmentId = segmentId;\n        if (hasLive2D()) {\n          this._startLipSyncOnPlay(segment.speaker || 'pet');\n        }\n        return;\n      }\n\n      console.warn(`[${SCRIPT_NAME}] TTS:  TTS  LittleWhiteBox `);\n    } catch (err) {\n      console.error(`[${SCRIPT_NAME}] TTS:`, err);\n    } finally {\n      this.isLoading = false;\n      this.hideLoadingIndicator();\n    }\n  },\n};\n","import { log, warn } from '../utils/dom';\nimport type { CommentTriggerMode } from '../core/constants';\n\ntype MonitorCallback = () => void;\ntype StopHandle = { stop: () => void };\ntype UserSignalSource = 'message_sent' | 'generation_after_commands' | 'user_message_rendered';\ntype TriggerSource = 'user' | 'ai';\n\n/**\n * Chat message monitor.\n * Uses event-gating to separate real user/AI turns from the plugin's own generateRaw flow.\n */\nexport const ChatMonitor = {\n  /** Count since last trigger. */\n  messageCount: 0,\n\n  /** Ignore next N GENERATION_ENDED events (our own generateRaw). */\n  ignoreNextCount: 0,\n\n  /** Trigger callback. */\n  _onTrigger: null as MonitorCallback | null,\n\n  /** Event stop handles. */\n  _stops: [] as StopHandle[],\n\n  /** Latest user-side signal time (for dedupe). */\n  _lastUserSignalAt: 0,\n\n  /** Runtime config. */\n  _config: {\n    autoTrigger: true,\n    triggerInterval: 3,\n    triggerProbability: 60,\n    commentTriggerMode: 'ai' as CommentTriggerMode,\n  },\n\n  init(\n    config: {\n      autoTrigger: boolean;\n      triggerInterval: number;\n      triggerProbability: number;\n      commentTriggerMode: CommentTriggerMode;\n    },\n    onTrigger: MonitorCallback,\n  ): void {\n    this._config = { ...config };\n    this._onTrigger = onTrigger;\n    this._lastUserSignalAt = 0;\n\n    const messageSentStop = this._bindEvent('MESSAGE_SENT', (_messageId: number) => {\n      log('(MESSAGE_SENT)');\n      this._recordUserSignal('message_sent');\n    });\n    if (messageSentStop) {\n      this._stops.push(messageSentStop);\n    }\n\n    // Fallback for environments where MESSAGE_SENT exists but does not fire.\n    const userRenderedStop = this._bindEvent('USER_MESSAGE_RENDERED', (_messageId: number) => {\n      log('(USER_MESSAGE_RENDERED)');\n      this._recordUserSignal('user_message_rendered');\n    });\n    if (userRenderedStop) {\n      this._stops.push(userRenderedStop);\n    }\n\n    // Fallback for some /send command paths.\n    const afterCommandsStop = this._bindEvent(\n      'GENERATION_AFTER_COMMANDS',\n      (_type: string, option: { quiet_prompt?: string }, dryRun: boolean) => {\n        if (dryRun) return;\n        if (option?.quiet_prompt) return;\n        log('(GENERATION_AFTER_COMMANDS)');\n        this._recordUserSignal('generation_after_commands');\n      },\n    );\n    if (afterCommandsStop) {\n      this._stops.push(afterCommandsStop);\n    }\n\n    const generationStartedStop = this._bindEvent(\n      'GENERATION_STARTED',\n      (_type: string, option: { quiet_prompt?: string }, dryRun: boolean) => {\n        if (dryRun) return;\n        if (option?.quiet_prompt) return;\n      },\n    );\n    if (generationStartedStop) {\n      this._stops.push(generationStartedStop);\n    }\n\n    const generationEndedStop = this._bindEvent('GENERATION_ENDED', (_messageId: number) => {\n      if (this.ignoreNextCount > 0) {\n        this.ignoreNextCount--;\n        return;\n      }\n      this._handleTriggerCount('ai');\n    });\n    if (generationEndedStop) {\n      this._stops.push(generationEndedStop);\n    }\n\n    log(\n      `(mode=${this._config.commentTriggerMode}, interval=${this._config.triggerInterval}, prob=${this._config.triggerProbability})`,\n    );\n  },\n\n  _resolveEventName(eventKey: string): string | null {\n    try {\n      const top = window.parent ?? window;\n      const fromSillyTavern = (top as any)?.SillyTavern?.eventTypes?.[eventKey];\n      if (fromSillyTavern) return String(fromSillyTavern);\n    } catch {\n      // ignore\n    }\n\n    try {\n      const fromLegacy = (tavern_events as any)?.[eventKey];\n      if (fromLegacy) return String(fromLegacy);\n    } catch {\n      // ignore\n    }\n\n    return null;\n  },\n\n  _bindEvent(eventKey: string, handler: (...args: any[]) => void): StopHandle | null {\n    const eventName = this._resolveEventName(eventKey);\n    if (!eventName) {\n      warn(`: ${eventKey}`);\n      return null;\n    }\n\n    try {\n      const top = window.parent ?? window;\n      const eventSource = (top as any)?.SillyTavern?.eventSource;\n      if (eventSource && typeof eventSource.on === 'function') {\n        eventSource.on(eventName, handler);\n        log(`(${eventKey} -> ${eventName}, via eventSource)`);\n        return {\n          stop: () => {\n            try {\n              if (typeof eventSource.off === 'function') {\n                eventSource.off(eventName, handler);\n              }\n            } catch {\n              // ignore\n            }\n          },\n        };\n      }\n    } catch {\n      // ignore\n    }\n\n    if (typeof eventOn === 'function') {\n      const stop = eventOn(eventName as any, handler);\n      log(`(${eventKey} -> ${eventName}, via eventOn)`);\n      return stop;\n    }\n\n    warn(`: ${eventKey}`);\n    return null;\n  },\n\n  updateConfig(config: {\n    autoTrigger: boolean;\n    triggerInterval: number;\n    triggerProbability: number;\n    commentTriggerMode: CommentTriggerMode;\n  }): void {\n    this._config = { ...config };\n  },\n\n  _shouldCountBySource(source: TriggerSource): boolean {\n    const mode = this._config.commentTriggerMode;\n    return mode === 'both' || mode === source;\n  },\n\n  _recordUserSignal(source: UserSignalSource): void {\n    const now = Date.now();\n\n    // MESSAGE_SENT / USER_MESSAGE_RENDERED / GENERATION_AFTER_COMMANDS may fire in one send flow.\n    if (now - this._lastUserSignalAt < 800) {\n      log(`(${source})`);\n      return;\n    }\n\n    this._lastUserSignalAt = now;\n    this._handleTriggerCount('user');\n  },\n\n  _handleTriggerCount(source: TriggerSource): void {\n    if (!this._shouldCountBySource(source)) return;\n    this.messageCount++;\n    log(`(${source}): ${this.messageCount}`);\n    this._checkAutoTrigger();\n  },\n\n  _checkAutoTrigger(): void {\n    if (!this._config.autoTrigger || !this._onTrigger) return;\n    if (this.messageCount < this._config.triggerInterval) return;\n\n    const roll = Math.random() * 100;\n    if (roll > this._config.triggerProbability) {\n      log(`(${roll.toFixed(1)} > ${this._config.triggerProbability})`);\n      return;\n    }\n\n    this.messageCount = 0;\n    log('');\n    this._onTrigger();\n  },\n\n  manualTrigger(): void {\n    if (!this._onTrigger) return;\n    log('');\n    this._onTrigger();\n  },\n\n  resetState(): void {\n    this.messageCount = 0;\n    this.ignoreNextCount = 0;\n    this._lastUserSignalAt = 0;\n    log('');\n  },\n\n  markSelfGeneration(): void {\n    this.ignoreNextCount++;\n  },\n\n  destroy(): void {\n    for (const s of this._stops) {\n      s.stop();\n    }\n    this._stops = [];\n    this._onTrigger = null;\n    this.messageCount = 0;\n    this.ignoreNextCount = 0;\n    this._lastUserSignalAt = 0;\n  },\n};\n","import { EMOTION_TAGS, type CommentStyle } from '../core/constants';\n\n/**  */\ninterface StyleTemplate {\n  systemPrompt: string;\n  responseFormat: string;\n}\n\n/**  */\nexport const PROMPT_TEMPLATES: Record<Exclude<CommentStyle, ''>, StyleTemplate> = {\n  : {\n    systemPrompt: `\n\n`,\n    responseFormat: '1-250\"\"\"\"',\n  },\n\n  : {\n    systemPrompt: `\n`,\n    responseFormat: '1-250()(><)(  )',\n  },\n\n  : {\n    systemPrompt: `\n`,\n    responseFormat: '1-250',\n  },\n\n  : {\n    systemPrompt: `\n\"\"\"\"`,\n    responseFormat: '1-250',\n  },\n};\n\nfunction resolvePromptTemplate(\n  style: CommentStyle,\n  customPrompt: string,\n): { systemPrompt: string; responseFormat: string } {\n  if (style === '' && customPrompt) {\n    return {\n      systemPrompt: customPrompt,\n      responseFormat: '1-250',\n    };\n  }\n\n  const template =\n    PROMPT_TEMPLATES[style as Exclude<CommentStyle, ''>] ?? PROMPT_TEMPLATES[''];\n\n  return {\n    systemPrompt: template.systemPrompt,\n    responseFormat: template.responseFormat,\n  };\n}\n\nfunction getChatResponseFormat(style: CommentStyle): string {\n  switch (style) {\n    case '':\n      return '1-380()(><)(  )';\n    case '':\n      return '1-380';\n    case '':\n      return '1-380';\n    case '':\n      return '1-380';\n    case '':\n    default:\n      return '1-380';\n  }\n}\n\nfunction appendEmotionCotFormat(responseFormat: string): string {\n  const tags = EMOTION_TAGS.join('');\n  return (\n    `${responseFormat}\\n\\n` +\n    `COT\\n` +\n    `- [|]: \\n` +\n    `-  1 ${tags}\\n` +\n    `- \\n` +\n    `-  Markdown//`\n  );\n}\n\nfunction buildContextLines(chatContext: Array<{ role: string; name: string; message: string }>): string {\n  return chatContext\n    .map((msg) => `${msg.name}(${msg.role}): ${String(msg.message ?? '')}`)\n    .join('\\n');\n}\n\n/**\n *  LLM \n */\nexport function buildPrompt(\n  style: CommentStyle,\n  customPrompt: string,\n  chatContext: Array<{ role: string; name: string; message: string }>,\n  emotionCotEnabled = false,\n): { system: string; user: string } {\n  const { systemPrompt, responseFormat } = resolvePromptTemplate(style, customPrompt);\n  const finalFormat = emotionCotEnabled ? appendEmotionCotFormat(responseFormat) : responseFormat;\n\n  // \n  const contextLines = buildContextLines(chatContext);\n\n  const system = `${systemPrompt}\\n\\n${finalFormat}`;\n  const user = `\\n\\n${contextLines}`;\n\n  return { system, user };\n}\n\n/**\n * \n */\nexport function buildChatPrompt(\n  style: CommentStyle,\n  customPrompt: string,\n  chatContext: Array<{ role: string; name: string; message: string }>,\n  userMessage: string,\n  emotionCotEnabled = false,\n): { system: string; user: string } {\n  const { systemPrompt } = resolvePromptTemplate(style, customPrompt);\n  const responseFormat = getChatResponseFormat(style);\n  const finalFormat = emotionCotEnabled ? appendEmotionCotFormat(responseFormat) : responseFormat;\n\n  const contextLines = buildContextLines(chatContext);\n  const safeUserMessage = String(userMessage || '').trim();\n\n  const system = `${systemPrompt}\\n\\n${finalFormat}\\n\\n`;\n\n  const user =\n    `\\n\\n` +\n    `${contextLines || '()'}\\n\\n` +\n    `\\n${safeUserMessage}\\n\\n` +\n    ``;\n\n  return { system, user };\n}\n","import { useSettingsStore } from '../core/settings';\nimport { error, log, warn } from '../utils/dom';\nimport { ChatMonitor } from './monitor';\nimport { buildChatPrompt, buildPrompt } from './prompt-templates';\n\ntype CommentCallback = (text: string, isDone: boolean) => void;\n\n/**\n * \n *  LLM / UI\n */\nexport const Commentator = {\n  isGenerating: false,\n\n  _onComment: null as CommentCallback | null,\n  _streamStop: null as { stop: () => void } | null,\n  _latestStreamText: '',\n\n  setCallback(cb: CommentCallback): void {\n    this._onComment = cb;\n  },\n\n  async generate(): Promise<void> {\n    if (this.isGenerating) {\n      log('');\n      return;\n    }\n\n    this.isGenerating = true;\n    log('');\n    let emittedDone = false;\n\n    try {\n      this._onComment?.('', false);\n\n      const store = useSettingsStore();\n      const s = store.settings;\n\n      let chatMessages = this._getChatContext(s.maxChatContext);\n      if (s.useTamakoTodaySpecial) {\n        const todaySpecial = this._getTamakoTodaySpecialContent();\n        if (todaySpecial) {\n          chatMessages = [\n            ...chatMessages,\n            {\n              role: 'system',\n              name: '',\n              message: todaySpecial,\n            },\n          ];\n          log(`${todaySpecial.length} `);\n        } else {\n          log('');\n        }\n      }\n\n      if (chatMessages.length === 0) {\n        log('');\n        return;\n      }\n\n      const { system, user } = buildPrompt(s.commentStyle, s.customPrompt, chatMessages, !!s.emotionCotEnabled);\n\n      this._latestStreamText = '';\n      let result: string;\n\n      if (s.apiMode === 'custom' && s.apiConfig.url) {\n        result = await this._generateCustom(system, user, s.apiConfig);\n      } else {\n        ChatMonitor.markSelfGeneration();\n        result = await this._generateTavern(\n          system,\n          user,\n          s.apiConfig.max_tokens,\n          s.apiConfig.temperature,\n          !!s.apiConfig.sendWorldInfo,\n        );\n      }\n\n      const finalText = String(result || '').trim() || String(this._latestStreamText || '').trim();\n      if (finalText) {\n        this._onComment?.(finalText, true);\n        emittedDone = true;\n      } else {\n        warn('');\n      }\n    } catch (e) {\n      error(':', e);\n    } finally {\n      if (!emittedDone) {\n        this._onComment?.('', true);\n      }\n      this.isGenerating = false;\n    }\n  },\n\n  /**\n   * \n   * - \n   * -  API  API /  API\n   */\n  async chat(userMessage: string): Promise<void> {\n    const input = String(userMessage || '').trim();\n    if (!input) return;\n\n    if (this.isGenerating) {\n      log('');\n      return;\n    }\n\n    this.isGenerating = true;\n    log('');\n    let emittedDone = false;\n\n    try {\n      this._onComment?.('', false);\n\n      const store = useSettingsStore();\n      const s = store.settings;\n\n      const chatMessages = this._getChatContext(s.maxChatContext);\n      const { system, user } = buildChatPrompt(\n        s.commentStyle,\n        s.customPrompt,\n        chatMessages,\n        input,\n        !!s.emotionCotEnabled,\n      );\n\n      this._latestStreamText = '';\n      let result: string;\n\n      if (s.apiMode === 'custom' && s.apiConfig.url) {\n        result = await this._generateCustom(system, user, s.apiConfig);\n      } else {\n        ChatMonitor.markSelfGeneration();\n        result = await this._generateTavern(\n          system,\n          user,\n          s.apiConfig.max_tokens,\n          s.apiConfig.temperature,\n          !!s.apiConfig.sendWorldInfo,\n        );\n      }\n\n      const finalText = String(result || '').trim() || String(this._latestStreamText || '').trim();\n      if (finalText) {\n        this._onComment?.(finalText, true);\n        emittedDone = true;\n      } else {\n        warn('');\n      }\n    } catch (e) {\n      error(':', e);\n    } finally {\n      if (!emittedDone) {\n        this._onComment?.('', true);\n      }\n      this.isGenerating = false;\n    }\n  },\n\n  async _generateTavern(\n    system: string,\n    user: string,\n    maxTokens: number,\n    temperature: number,\n    sendWorldInfo: boolean,\n  ): Promise<string> {\n    this._setupStreamListener();\n    const orderedPrompts: Array<\n      'world_info_before' | 'world_info_after' | { role: 'system' | 'assistant' | 'user'; content: string }\n    > = sendWorldInfo\n      ? ['world_info_before', { role: 'system', content: system }, 'world_info_after', { role: 'user', content: user }]\n      : [\n          { role: 'system', content: system },\n          { role: 'user', content: user },\n        ];\n\n    try {\n      return await generateRaw({\n        should_silence: true,\n        should_stream: true,\n        ordered_prompts: orderedPrompts,\n        custom_api: undefined,\n      });\n    } finally {\n      this._cleanupStreamListener();\n    }\n  },\n\n  async _generateCustom(\n    system: string,\n    user: string,\n    apiConfig: {\n      url: string;\n      apiKey: string;\n      model: string;\n      source: string;\n      max_tokens: number;\n      temperature: number;\n      frequency_penalty: number;\n      presence_penalty: number;\n      top_p: number;\n      top_k: number;\n      usePresetSampling: boolean;\n      sendWorldInfo?: boolean;\n    },\n  ): Promise<string> {\n    const apiUrl = String(apiConfig.url || '').trim();\n    const apiKey = String(apiConfig.apiKey || '').trim();\n    const model = String(apiConfig.model || '')\n      .trim()\n      .replace(/^models\\//, '');\n\n    if (!apiUrl) {\n      throw new Error(' API URL ');\n    }\n    if (!model) {\n      throw new Error(' API ');\n    }\n\n    const usePreset = !!apiConfig.usePresetSampling;\n    const sendWorldInfo = !!apiConfig.sendWorldInfo;\n    const requestUrl = '/api/backends/chat-completions/generate';\n    const orderedPrompts = [\n      { role: 'system', content: system },\n      { role: 'user', content: user },\n    ];\n\n    const buildAttemptBody = (attempt: 'full' | 'safe' | 'minimal') => {\n      const body: Record<string, unknown> = {\n        messages: orderedPrompts,\n        model,\n        stream: false,\n        chat_completion_source: 'custom',\n        custom_prompt_post_processing: sendWorldInfo ? 'strict' : 'none',\n        reverse_proxy: apiUrl,\n        custom_url: apiUrl,\n        custom_include_headers: apiKey ? `Authorization: Bearer ${apiKey}` : '',\n      };\n\n      //  OpenAI \n      if (!usePreset && attempt !== 'minimal') {\n        body.max_tokens = apiConfig.max_tokens;\n        body.temperature = apiConfig.temperature;\n        body.top_p = apiConfig.top_p;\n      }\n\n      if (!usePreset && attempt === 'full') {\n        body.frequency_penalty = apiConfig.frequency_penalty;\n        body.presence_penalty = apiConfig.presence_penalty;\n        body.top_k = apiConfig.top_k;\n      }\n\n      return body;\n    };\n\n    const requestWithAttempt = async (attempt: 'full' | 'safe' | 'minimal'): Promise<string> => {\n      const response = await fetch(requestUrl, {\n        method: 'POST',\n        headers: {\n          ...SillyTavern.getRequestHeaders(),\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(buildAttemptBody(attempt)),\n      });\n\n      if (!response.ok) {\n        const errTxt = await response.text();\n        const err = new Error(`API: ${response.status} ${errTxt || response.statusText}`);\n        (err as Error & { status?: number }).status = response.status;\n        throw err;\n      }\n\n      const data = (await response.json()) as any;\n      if (data?.choices?.[0]?.message?.content) {\n        return String(data.choices[0].message.content).trim();\n      }\n      if (typeof data?.content === 'string') {\n        return data.content.trim();\n      }\n      if (typeof data?.text === 'string') {\n        return data.text.trim();\n      }\n\n      const details = typeof data === 'object' ? JSON.stringify(data) : String(data);\n      throw new Error(`API: ${details}`);\n    };\n\n    const attempts: Array<'full' | 'safe' | 'minimal'> = ['full', 'safe', 'minimal'];\n    let lastError: unknown = null;\n\n    for (let i = 0; i < attempts.length; i++) {\n      const attempt = attempts[i];\n      try {\n        if (i > 0) {\n          warn(` API ${attempt}`);\n        }\n        return await requestWithAttempt(attempt);\n      } catch (e) {\n        lastError = e;\n        const status = (e as { status?: number } | null)?.status;\n        const msg = e instanceof Error ? e.message : String(e);\n        const is422 = status === 422 || /\\b422\\b/.test(msg);\n        const canRetry = is422 && i < attempts.length - 1;\n        if (!canRetry) throw e;\n        warn(` API  422${attempt} -> ${attempts[i + 1]}`);\n      }\n    }\n\n    throw lastError instanceof Error ? lastError : new Error(String(lastError));\n  },\n\n  _setupStreamListener(): void {\n    this._cleanupStreamListener();\n    this._streamStop = eventOn(\n      iframe_events.STREAM_TOKEN_RECEIVED_FULLY,\n      (fullText: string) => {\n        this._latestStreamText = String(fullText || '');\n        this._onComment?.(fullText, false);\n      },\n    );\n  },\n\n  _cleanupStreamListener(): void {\n    if (this._streamStop) {\n      this._streamStop.stop();\n      this._streamStop = null;\n    }\n  },\n\n  _getChatContext(maxCount: number): Array<{ role: string; name: string; message: string }> {\n    try {\n      const messages = getChatMessages(`0-{{lastMessageId}}`, {\n        role: 'all',\n        hide_state: 'unhidden',\n      });\n\n      const list = Array.isArray(messages) ? messages : [];\n      const safeMaxCount = Number.isFinite(maxCount) && maxCount > 0 ? Math.floor(maxCount) : 20;\n      const recent = list.slice(-safeMaxCount);\n\n      return recent.map((msg) => ({\n        role: msg.role,\n        name: msg.name,\n        message: msg.message,\n      }));\n    } catch (e) {\n      warn(':', e);\n      return [];\n    }\n  },\n\n  _getTamakoTodaySpecialContent(): string {\n    try {\n      const topWindow = window.parent ?? window;\n      const topDocument = topWindow.document ?? document;\n      const currentSelector = '#tamako-market-window .tamako-content[data-content=\"current\"]';\n\n      const emptyMessage = topDocument.querySelector(`${currentSelector} .tamako-empty .message`);\n      if (emptyMessage) {\n        return '';\n      }\n\n      const plotContent = topDocument.querySelector(`${currentSelector} .tamako-plot-content`) as HTMLElement | null;\n      const directText = this._sanitizeTamakoText(plotContent?.innerText || plotContent?.textContent || '');\n      if (directText) {\n        return directText;\n      }\n\n      const beautifierFrame = topDocument.querySelector(\n        `${currentSelector} iframe.tamako-beautifier-frame`,\n      ) as HTMLIFrameElement | null;\n      const payload = this._readTamakoPayloadFromIframe(beautifierFrame);\n      const payloadText = this._extractTamakoTextFromPayload(payload);\n      if (payloadText) {\n        return payloadText;\n      }\n\n      const currentContent = topDocument.querySelector(currentSelector) as HTMLElement | null;\n      return this._sanitizeTamakoText(currentContent?.innerText || currentContent?.textContent || '');\n    } catch (e) {\n      warn(':', e);\n      return '';\n    }\n  },\n\n  _readTamakoPayloadFromIframe(iframe: HTMLIFrameElement | null): any | null {\n    if (!iframe) {\n      return null;\n    }\n    const name = String(iframe.name || '').trim();\n    if (!name.startsWith('TAMAKO_DATA:')) {\n      return null;\n    }\n    try {\n      return JSON.parse(name.slice('TAMAKO_DATA:'.length));\n    } catch (e) {\n      warn(' payload :', e);\n      return null;\n    }\n  },\n\n  _extractTamakoTextFromPayload(payload: any): string {\n    if (!payload || typeof payload !== 'object') {\n      return '';\n    }\n\n    const captureTags = this._getTamakoCaptureTags();\n    const tags = payload.tags && typeof payload.tags === 'object' ? payload.tags : {};\n    const valuesFromTags: string[] = [];\n    for (const tag of captureTags) {\n      const value = this._sanitizeTamakoText(tags[tag]);\n      if (value) {\n        valuesFromTags.push(value);\n      }\n    }\n    if (valuesFromTags.length > 0) {\n      return valuesFromTags.join('\\n\\n');\n    }\n\n    const raw = String(payload.raw || '');\n    if (!raw) {\n      return '';\n    }\n    return this._extractTamakoTagText(raw, captureTags);\n  },\n\n  _getTamakoCaptureTags(): string[] {\n    try {\n      const context = SillyTavern?.getContext?.() as any;\n      const tags = context?.extensionSettings?.TamakoMarket?.captureTags;\n      if (Array.isArray(tags)) {\n        const normalized = tags\n          .map((tag) => String(tag || '').trim())\n          .filter((tag) => !!tag);\n        if (normalized.length > 0) {\n          return normalized;\n        }\n      }\n    } catch {\n      // ignore\n    }\n    return ['recall', 'scene_direction'];\n  },\n\n  _extractTamakoTagText(raw: string, tags: string[]): string {\n    const values: string[] = [];\n    for (const tag of tags) {\n      const safeTag = String(tag || '').trim();\n      if (!safeTag) {\n        continue;\n      }\n      const escapedTag = safeTag.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      const regex = new RegExp(`<${escapedTag}(?:\\\\s[^>]*)?>([\\\\s\\\\S]*?)<\\\\/${escapedTag}>`, 'gi');\n      let match: RegExpExecArray | null;\n      while ((match = regex.exec(raw)) !== null) {\n        const value = this._sanitizeTamakoText(match[1] || '');\n        if (value) {\n          values.push(value);\n        }\n      }\n    }\n    return values.join('\\n\\n');\n  },\n\n  _sanitizeTamakoText(value: unknown): string {\n    const text = String(value ?? '')\n      .replace(/\\u00a0/g, ' ')\n      .replace(/\\r\\n/g, '\\n')\n      .replace(/\\n{3,}/g, '\\n\\n')\n      .trim();\n    if (!text) {\n      return '';\n    }\n    if (/^(~|\\.\\.\\.||\\.\\.\\.|\\.\\.\\.|\\.\\.\\.)$/.test(text)) {\n      return '';\n    }\n    return text;\n  },\n\n  destroy(): void {\n    this._cleanupStreamListener();\n    this._onComment = null;\n    this._latestStreamText = '';\n    this.isGenerating = false;\n  },\n};\n","import type { EmotionTag } from '../core/constants';\nimport { resolveEmotionTag, type EmotionConfig } from '../core/emotion';\n\nconst RE_THINK_CLOSED = /<(think|thinking)>[\\s\\S]*?<\\/\\1>/gi;\nconst RE_THINK_UNCLOSED = /<(think|thinking)>[\\s\\S]*$/gi;\n\nexport type EmotionCotParseResult = {\n  cleanText: string;\n  rawTag: string | null;\n  normalizedTag: EmotionTag | null;\n  context: string | null;\n};\n\nexport function stripThinkBlocks(input: unknown): string {\n  const text = String(input || '');\n  return text.replace(RE_THINK_CLOSED, '').replace(RE_THINK_UNCLOSED, '');\n}\n\nfunction parseBracketContent(bracketContent: string): { rawTag: string; context: string | null } {\n  const content = String(bracketContent || '').trim();\n  if (!content) return { rawTag: '', context: null };\n\n  const pipeParts = content.split('|');\n  const exprVoicePart = (pipeParts[0] || '').trim();\n  const context = (pipeParts[1] || '').trim();\n\n  const expression = (exprVoicePart.split(',')[0] || '').trim();\n  return { rawTag: expression, context: context || null };\n}\n\nfunction isPendingPrefix(text: string): boolean {\n  const t = String(text || '').trimStart();\n  if (!t) return false;\n\n  if (t.startsWith('[')) {\n    const close = t.indexOf(']');\n    if (close === -1) return true;\n    const body = t.slice(close + 1);\n    return !body.trim();\n  }\n\n  const open = t.indexOf('[');\n  if (open > 0 && open < 30) {\n    const close = t.indexOf(']', open + 1);\n    if (close === -1) return true;\n    const after = t.slice(close + 1);\n    if (!/^\\s*[:]/.test(after)) return true;\n    const body = after.replace(/^\\s*[:]\\s*/, '');\n    return !body.trim();\n  }\n\n  return false;\n}\n\nexport function parseEmotionCotText(\n  input: unknown,\n  options: {\n    enabled: boolean;\n    stripFromText: boolean;\n    configs: EmotionConfig[];\n  },\n): EmotionCotParseResult {\n  const rawText = stripThinkBlocks(input);\n\n  if (!options.enabled) {\n    return {\n      cleanText: rawText,\n      rawTag: null,\n      normalizedTag: null,\n      context: null,\n    };\n  }\n\n  if (isPendingPrefix(rawText)) {\n    return {\n      cleanText: '',\n      rawTag: null,\n      normalizedTag: null,\n      context: null,\n    };\n  }\n\n  // Speaker : [|]: \n  const speakerMatch = rawText.match(/^\\s*([^\\[\\]\\n\\r]{1,40})\\s*\\[([^\\]]+)\\]\\s*[:]\\s*([\\s\\S]*)$/);\n  if (speakerMatch) {\n    const bracketContent = speakerMatch[2] || '';\n    const body = speakerMatch[3] || '';\n    const { rawTag, context } = parseBracketContent(bracketContent);\n    const normalizedTag = resolveEmotionTag(rawTag, options.configs);\n\n    return {\n      cleanText: normalizedTag && options.stripFromText ? body.trimStart() : rawText,\n      rawTag: rawTag || null,\n      normalizedTag,\n      context,\n    };\n  }\n\n  // : [|] \n  const prefixMatch = rawText.match(/^\\s*\\[([^\\]]+)\\]\\s*([\\s\\S]*)$/);\n  if (prefixMatch) {\n    const bracketContent = prefixMatch[1] || '';\n    const body = prefixMatch[2] || '';\n    const { rawTag, context } = parseBracketContent(bracketContent);\n    const normalizedTag = resolveEmotionTag(rawTag, options.configs);\n\n    return {\n      cleanText: normalizedTag && options.stripFromText ? body.trimStart() : rawText,\n      rawTag: rawTag || null,\n      normalizedTag,\n      context,\n    };\n  }\n\n  return {\n    cleanText: rawText,\n    rawTag: null,\n    normalizedTag: null,\n    context: null,\n  };\n}\n","import { defineStore } from 'pinia';\nimport { ref } from 'vue';\n\n/**\n *  UI \n */\nexport const useUiStore = defineStore('desktop-pet-ui', () => {\n  const showSettings = ref(false);\n\n  function openSettings(): void {\n    showSettings.value = true;\n  }\n\n  function closeSettings(): void {\n    showSettings.value = false;\n  }\n\n  return { showSettings, openSettings, closeSettings };\n});\n\n","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"bubble-content\" };\nconst _hoisted_2 = { class: \"bubble-text\" };\nconst _hoisted_3 = {\n    key: 1,\n    class: \"cursor\"\n};\nimport { onUnmounted, ref, watch } from 'vue';\nimport { Live2DManager } from '../live2d/manager';\nconst HEAD_ANCHOR_RATIO = 0.2;\nconst BUBBLE_GAP = 12;\nconst MIN_BUBBLE_TOP = 8;\nconst EDGE_PADDING = 8;\nconst LOADING_INTERVAL_MS = 340;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ChatBubble',\n    props: {\n        text: {},\n        isDone: { type: Boolean }\n    },\n    emits: [\"hidden\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const visible = ref(false);\n        const displayText = ref('');\n        const bubbleStyle = ref({});\n        const LOADING_FRAMES = ['', '', '', ''];\n        let positionTimer = null;\n        let loadingTimer = null;\n        let loadingFrameIndex = 0;\n        function getTopWindow() {\n            try {\n                return window.parent ?? window;\n            }\n            catch {\n                return window;\n            }\n        }\n        function getFiniteNumber(value) {\n            const n = typeof value === 'number' ? value : Number(value);\n            return Number.isFinite(n) ? n : null;\n        }\n        function getModelHeadAnchor(rect) {\n            const model = Live2DManager.model;\n            if (!model || typeof model.getBounds !== 'function')\n                return null;\n            try {\n                const bounds = model.getBounds?.();\n                const x = getFiniteNumber(bounds?.x);\n                const y = getFiniteNumber(bounds?.y);\n                const width = getFiniteNumber(bounds?.width);\n                const height = getFiniteNumber(bounds?.height);\n                if (x === null || y === null || width === null || height === null || width <= 0 || height <= 0) {\n                    return null;\n                }\n                return {\n                    x: rect.left + x + width / 2,\n                    y: rect.top + y + height * HEAD_ANCHOR_RATIO,\n                };\n            }\n            catch {\n                return null;\n            }\n        }\n        function updateBubblePosition() {\n            try {\n                const top = getTopWindow();\n                const stage = top.document.getElementById('desktop-pet-stage');\n                const rect = stage?.getBoundingClientRect?.();\n                const vw = top.innerWidth || top.document.documentElement.clientWidth || 0;\n                const vh = top.innerHeight || top.document.documentElement.clientHeight || 0;\n                if (rect && rect.width > 0 && rect.height > 0) {\n                    const anchor = getModelHeadAnchor(rect);\n                    const fallbackX = rect.left + rect.width / 2;\n                    const fallbackY = rect.top + rect.height * 0.22;\n                    const rawLeft = anchor?.x ?? fallbackX;\n                    const rawTop = (anchor?.y ?? fallbackY) - BUBBLE_GAP;\n                    const safeLeft = Math.max(EDGE_PADDING, Math.min(rawLeft, Math.max(EDGE_PADDING, vw - EDGE_PADDING)));\n                    const safeTop = Math.max(MIN_BUBBLE_TOP, Math.min(rawTop, Math.max(MIN_BUBBLE_TOP, vh - EDGE_PADDING)));\n                    bubbleStyle.value = {\n                        left: `${Math.round(safeLeft)}px`,\n                        top: `${Math.round(safeTop)}px`,\n                    };\n                    return;\n                }\n                bubbleStyle.value = {\n                    left: `${Math.round(vw * 0.5)}px`,\n                    top: `${Math.round(Math.max(8, vh * 0.2))}px`,\n                };\n            }\n            catch {\n                bubbleStyle.value = {\n                    left: '50vw',\n                    top: '20vh',\n                };\n            }\n        }\n        function startPositionSync() {\n            stopPositionSync();\n            updateBubblePosition();\n            positionTimer = setInterval(updateBubblePosition, 100);\n        }\n        function stopPositionSync() {\n            if (!positionTimer)\n                return;\n            clearInterval(positionTimer);\n            positionTimer = null;\n        }\n        function startLoadingAnimation() {\n            if (loadingTimer)\n                return;\n            loadingFrameIndex = 0;\n            displayText.value = LOADING_FRAMES[loadingFrameIndex];\n            loadingTimer = setInterval(() => {\n                loadingFrameIndex = (loadingFrameIndex + 1) % LOADING_FRAMES.length;\n                displayText.value = LOADING_FRAMES[loadingFrameIndex];\n            }, LOADING_INTERVAL_MS);\n        }\n        function stopLoadingAnimation() {\n            if (!loadingTimer)\n                return;\n            clearInterval(loadingTimer);\n            loadingTimer = null;\n        }\n        function syncBubbleState() {\n            const text = String(props.text || '');\n            if (text) {\n                visible.value = true;\n                displayText.value = text;\n                stopLoadingAnimation();\n                startPositionSync();\n                return;\n            }\n            if (!props.isDone) {\n                visible.value = true;\n                startLoadingAnimation();\n                startPositionSync();\n                return;\n            }\n            visible.value = false;\n            displayText.value = '';\n            stopLoadingAnimation();\n            stopPositionSync();\n        }\n        watch([() => props.text, () => props.isDone], syncBubbleState, { immediate: true });\n        function closeBubble() {\n            visible.value = false;\n            displayText.value = '';\n            stopLoadingAnimation();\n            stopPositionSync();\n            emit('hidden');\n        }\n        onUnmounted(() => {\n            stopLoadingAnimation();\n            stopPositionSync();\n        });\n        return (_ctx, _cache) => {\n            return (visible.value)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"chat-bubble\",\n                    style: _normalizeStyle(bubbleStyle.value)\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        (__props.isDone)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                type: \"button\",\n                                class: \"bubble-close\",\n                                \"aria-label\": \"\",\n                                onClick: closeBubble\n                            }, \"  \"))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"span\", _hoisted_2, _toDisplayString(displayText.value), 1 /* TEXT */),\n                        (!__props.isDone)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, \"|\"))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"bubble-arrow\" }, null, -1 /* CACHED */))\n                ], 4 /* STYLE */))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ChatBubble.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatBubble.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatBubble.vue?vue&type=style&index=0&id=0f511089&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0f511089\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"menu-panel\" };\nconst _hoisted_2 = { class: \"command-sub\" };\nconst _hoisted_3 = { class: \"command-sub\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"chat-drawer\"\n};\nconst _hoisted_5 = { class: \"drawer-head\" };\nconst _hoisted_6 = { class: \"drawer-actions\" };\nconst _hoisted_7 = [\"disabled\"];\nimport { computed, nextTick, onUnmounted, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'FunctionMenu',\n    props: {\n        visible: { type: Boolean },\n        x: {},\n        y: {},\n        placement: {},\n        motionLoopEnabled: { type: Boolean },\n        commentStyle: {}\n    },\n    emits: [\"close\", \"send-chat\", \"toggle-motion-loop\", \"switch-model\", \"switch-persona\", \"close-model\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const menuEl = ref(null);\n        const inputEl = ref(null);\n        const input = ref('');\n        const chatOpen = ref(false);\n        const posX = ref(0);\n        const posY = ref(0);\n        function getTopWindow() {\n            try {\n                return window.parent ?? window;\n            }\n            catch {\n                return window;\n            }\n        }\n        const panelTransform = computed(() => (props.placement === 'left'\n            ? 'translate(-100%, -50%)'\n            : 'translate(0, -50%)'));\n        const panelStyle = computed(() => ({\n            left: `${posX.value}px`,\n            top: `${posY.value}px`,\n            transform: panelTransform.value,\n        }));\n        function clampIntoViewport() {\n            const el = menuEl.value;\n            if (!el)\n                return;\n            const top = getTopWindow();\n            const vw = top.innerWidth || top.document.documentElement.clientWidth || 0;\n            const vh = top.innerHeight || top.document.documentElement.clientHeight || 0;\n            const margin = 8;\n            const rect = el.getBoundingClientRect();\n            if (vw > 0) {\n                if (rect.left < margin) {\n                    posX.value += margin - rect.left;\n                }\n                else if (rect.right > vw - margin) {\n                    posX.value -= rect.right - (vw - margin);\n                }\n            }\n            if (vh > 0) {\n                if (rect.top < margin) {\n                    posY.value += margin - rect.top;\n                }\n                else if (rect.bottom > vh - margin) {\n                    posY.value -= rect.bottom - (vh - margin);\n                }\n            }\n        }\n        function close() {\n            chatOpen.value = false;\n            emit('close');\n        }\n        function send() {\n            const message = input.value.trim();\n            if (!message)\n                return;\n            emit('send-chat', message);\n            input.value = '';\n        }\n        function openChat() {\n            chatOpen.value = true;\n            void nextTick(() => {\n                clampIntoViewport();\n                inputEl.value?.focus();\n                inputEl.value?.select();\n            });\n        }\n        function onInputKeydown(e) {\n            if (e.key === 'Escape') {\n                e.preventDefault();\n                close();\n                return;\n            }\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                send();\n            }\n        }\n        const onGlobalKeydown = (e) => {\n            if (!props.visible)\n                return;\n            if (e.key === 'Escape') {\n                e.preventDefault();\n                close();\n            }\n        };\n        watch(() => props.visible, async (visible) => {\n            if (!visible) {\n                chatOpen.value = false;\n                return;\n            }\n            posX.value = Number.isFinite(props.x) ? props.x : 0;\n            posY.value = Number.isFinite(props.y) ? props.y : 0;\n            chatOpen.value = false;\n            await nextTick();\n            clampIntoViewport();\n        }, { immediate: true });\n        watch(() => [props.x, props.y, props.placement, chatOpen.value], async () => {\n            if (!props.visible)\n                return;\n            posX.value = Number.isFinite(props.x) ? props.x : 0;\n            posY.value = Number.isFinite(props.y) ? props.y : 0;\n            await nextTick();\n            clampIntoViewport();\n        });\n        try {\n            getTopWindow().addEventListener('keydown', onGlobalKeydown);\n        }\n        catch {\n            // ignore\n        }\n        onUnmounted(() => {\n            try {\n                getTopWindow().removeEventListener('keydown', onGlobalKeydown);\n            }\n            catch {\n                // ignore\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"menu-overlay\",\n                    onClick: _withModifiers(close, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"menuEl\",\n                        ref: menuEl,\n                        class: _normalizeClass([\"menu-cluster\", [`is-${__props.placement}`, { 'chat-open': chatOpen.value }]]),\n                        style: _normalizeStyle(panelStyle.value),\n                        onClick: _cache[6] || (_cache[6] = _withModifiers(() => { }, [\"stop\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"div\", { class: \"panel-top\" }, [\n                                _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"panel-title\" }, \"TACTICAL\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"icon-btn\",\n                                    type: \"button\",\n                                    onClick: close\n                                }, \"\")\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"command-btn\", { active: chatOpen.value }]),\n                                type: \"button\",\n                                onClick: openChat\n                            }, [...(_cache[8] || (_cache[8] = [\n                                    _createElementVNode(\"span\", { class: \"command-index\" }, \"01\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"command-main\" }, \"CHAT\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"command-sub\" }, \"MESSAGE LINK\", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */),\n                            _createElementVNode(\"button\", {\n                                class: \"command-btn\",\n                                type: \"button\",\n                                onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('toggle-motion-loop')))\n                            }, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"span\", { class: \"command-index\" }, \"02\", -1 /* CACHED */)),\n                                _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"command-main\" }, \"MOTION\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.motionLoopEnabled ? 'ON' : 'OFF'), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"command-btn\",\n                                type: \"button\",\n                                onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('switch-model')))\n                            }, [...(_cache[11] || (_cache[11] = [\n                                    _createElementVNode(\"span\", { class: \"command-index\" }, \"03\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"command-main\" }, \"MODEL\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"command-sub\" }, \"SWITCH\", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"command-btn\",\n                                type: \"button\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('switch-persona')))\n                            }, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"command-index\" }, \"04\", -1 /* CACHED */)),\n                                _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"command-main\" }, \"PERSONA\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_3, _toDisplayString(__props.commentStyle), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"command-btn danger\",\n                                type: \"button\",\n                                onClick: _cache[3] || (_cache[3] = ($event) => (_ctx.$emit('close-model')))\n                            }, [...(_cache[14] || (_cache[14] = [\n                                    _createElementVNode(\"span\", { class: \"command-index\" }, \"05\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"command-main\" }, \"CLOSE\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"command-sub\" }, \"MODEL OFF\", -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createVNode(_Transition, { name: \"drawer\" }, {\n                            default: _withCtx(() => [\n                                (chatOpen.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"drawer-title\" }, \"MESSAGE LINK\", -1 /* CACHED */)),\n                                            _createElementVNode(\"button\", {\n                                                class: \"drawer-close\",\n                                                type: \"button\",\n                                                onClick: _cache[4] || (_cache[4] = ($event) => (chatOpen.value = false))\n                                            }, \"\")\n                                        ]),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            ref_key: \"inputEl\",\n                                            ref: inputEl,\n                                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((input).value = $event)),\n                                            class: \"chat-input\",\n                                            rows: \"4\",\n                                            placeholder: \"... (Enter  / Shift+Enter )\",\n                                            onKeydown: onInputKeydown\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, input.value]\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_6, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"send-btn\",\n                                                type: \"button\",\n                                                disabled: !input.value.trim(),\n                                                onClick: send\n                                            }, \" SEND \", 8 /* PROPS */, _hoisted_7)\n                                        ]),\n                                        _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"drawer-hint\" }, \"\", -1 /* CACHED */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _: 1 /* STABLE */\n                        })\n                    ], 6 /* CLASS, STYLE */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./FunctionMenu.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FunctionMenu.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FunctionMenu.vue?vue&type=style&index=0&id=ff4f8948&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ff4f8948\"]])\n\nexport default __exports__","import { EIKANYA_API_BASE, EIKANYA_CDN_BASE, EIKANYA_RAW_BASE } from '../core/constants';\nimport { Live2DManager } from './manager';\n\n/**  */\nexport interface RepoEntry {\n  name: string;\n  path: string;\n  type: 'file' | 'dir';\n  isModel: boolean;\n}\n\n/**  */\nconst cache = new Map<string, RepoEntry[]>();\n\n/**  Live2D  JSON */\nexport function isModelFile(name: string): boolean {\n  const lower = name.toLowerCase();\n  return (\n    lower === 'model.json' ||\n    lower === 'model3.json' ||\n    lower.endsWith('.model.json') ||\n    lower.endsWith('.model3.json')\n  );\n}\n\n/**  */\nconst FILTERED_EXTENSIONS = ['.zip', '.rar', '.7z', '.md', '.txt', '.png', '.jpg', '.jpeg', '.gif', '.bmp', '.psd', '.webp', '.mp3', '.wav', '.ogg', '.mp4', '.mtn'];\n\nfunction shouldShow(entry: { name: string; type: string }): boolean {\n  if (entry.type === 'dir') return true;\n  if (isModelFile(entry.name)) return true;\n  // \n  const lower = entry.name.toLowerCase();\n  for (const ext of FILTERED_EXTENSIONS) {\n    if (lower.endsWith(ext)) return false;\n  }\n  //  JSON \n  return isModelFile(entry.name);\n}\n\n/**  GitHub API  */\nexport async function fetchDirectory(path: string): Promise<RepoEntry[]> {\n  // \n  const cached = cache.get(path);\n  if (cached) return cached;\n\n  const apiUrl = `${EIKANYA_API_BASE}${path}`;\n\n  let data: any[];\n  try {\n    //  GitHub API CORS\n    const resp = await fetch(apiUrl, {\n      headers: { Accept: 'application/vnd.github.v3+json' },\n    });\n\n    if (resp.status === 403) {\n      const remaining = resp.headers.get('X-RateLimit-Remaining');\n      const resetTime = resp.headers.get('X-RateLimit-Reset');\n      const resetDate = resetTime ? new Date(parseInt(resetTime) * 1000) : null;\n      throw new RateLimitError(remaining, resetDate);\n    }\n\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    data = await resp.json();\n  } catch (e) {\n    if (e instanceof RateLimitError) throw e;\n    //  CORS \n    const proxiedUrl = Live2DManager._getProxiedUrl(apiUrl);\n    const resp = await fetch(proxiedUrl, {\n      headers: { Accept: 'application/vnd.github.v3+json' },\n    });\n\n    if (resp.status === 403) {\n      throw new RateLimitError(null, null);\n    }\n    if (!resp.ok) throw new Error(`: HTTP ${resp.status}`);\n    data = await resp.json();\n  }\n\n  if (!Array.isArray(data)) {\n    throw new Error('GitHub API ');\n  }\n\n  const entries: RepoEntry[] = data\n    .map((item: any) => ({\n      name: item.name as string,\n      path: item.path as string,\n      type: (item.type === 'dir' ? 'dir' : 'file') as 'file' | 'dir',\n      isModel: item.type === 'file' && isModelFile(item.name),\n    }))\n    .filter(shouldShow)\n    .sort((a, b) => {\n      // \n      if (a.type !== b.type) return a.type === 'dir' ? -1 : 1;\n      return a.name.localeCompare(b.name);\n    });\n\n  cache.set(path, entries);\n  return entries;\n}\n\n/**  GitHub  CDN  raw URL ASCII  */\nexport function buildCdnUrl(path: string, useCdn: boolean = true): string {\n  const encodedPath = path.split('/').map(s => encodeURIComponent(s)).join('/');\n  const base = useCdn ? EIKANYA_CDN_BASE : EIKANYA_RAW_BASE;\n  return `${base}${encodedPath}`;\n}\n\n/**  */\nexport function clearCache(): void {\n  cache.clear();\n}\n\n/** API  */\nexport class RateLimitError extends Error {\n  remaining: string | null;\n  resetDate: Date | null;\n\n  constructor(remaining: string | null, resetDate: Date | null) {\n    const resetStr = resetDate ? resetDate.toLocaleTimeString() : '';\n    super(`GitHub API  ${resetStr} `);\n    this.name = 'RateLimitError';\n    this.remaining = remaining;\n    this.resetDate = resetDate;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, Fragment as _Fragment, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, renderList as _renderList, resolveComponent as _resolveComponent, createBlock as _createBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"tree-node\" };\nconst _hoisted_2 = {\n    key: 1,\n    class: \"expand-icon placeholder\"\n};\nconst _hoisted_3 = { class: \"node-icon\" };\nconst _hoisted_4 = [\"title\"];\nconst _hoisted_5 = {\n    key: 2,\n    class: \"node-spinner\"\n};\nimport { ref, computed } from 'vue';\nimport { fetchDirectory, RateLimitError } from '../live2d/model-browser';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TreeNode',\n    props: {\n        entry: {},\n        depth: {},\n        searchQuery: {}\n    },\n    emits: [\"select-model\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const expanded = ref(false);\n        const children = ref([]);\n        const loading = ref(false);\n        const loadedOnce = ref(false);\n        const childError = ref('');\n        const isSelected = ref(false);\n        const filteredChildren = computed(() => {\n            if (!props.searchQuery.trim())\n                return children.value;\n            const q = props.searchQuery.toLowerCase();\n            return children.value.filter(c => c.name.toLowerCase().includes(q) || c.type === 'dir');\n        });\n        async function loadChildren() {\n            loading.value = true;\n            childError.value = '';\n            try {\n                children.value = await fetchDirectory(props.entry.path);\n                loadedOnce.value = true;\n            }\n            catch (e) {\n                if (e instanceof RateLimitError) {\n                    childError.value = e.message;\n                }\n                else {\n                    childError.value = `: ${e.message || ''}`;\n                }\n            }\n            finally {\n                loading.value = false;\n            }\n        }\n        function handleClick() {\n            if (props.entry.type === 'dir') {\n                expanded.value = !expanded.value;\n                if (expanded.value && !loadedOnce.value) {\n                    loadChildren();\n                }\n            }\n            else if (props.entry.isModel) {\n                isSelected.value = true;\n                emit('select-model', props.entry.path);\n            }\n        }\n        return (_ctx, _cache) => {\n            const _component_TreeNode = _resolveComponent(\"TreeNode\", true);\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"node-row\", { 'is-model': __props.entry.isModel, 'is-selected': isSelected.value }]),\n                    style: _normalizeStyle({ paddingLeft: __props.depth * 16 + 'px' }),\n                    onClick: handleClick\n                }, [\n                    _createCommentVNode(\" / \"),\n                    (__props.entry.type === 'dir')\n                        ? (_openBlock(), _createElementBlock(\"span\", {\n                            key: 0,\n                            class: _normalizeClass([\"expand-icon\", { expanded: expanded.value }])\n                        }, \"  \", 2 /* CLASS */))\n                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_2)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"span\", _hoisted_3, [\n                        (__props.entry.type === 'dir')\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                _createTextVNode(\"\")\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : (__props.entry.isModel)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createTextVNode(\"\")\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createTextVNode(\"\")\n                                ], 64 /* STABLE_FRAGMENT */))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"span\", {\n                        class: \"node-name\",\n                        title: __props.entry.path\n                    }, _toDisplayString(__props.entry.name), 9 /* TEXT, PROPS */, _hoisted_4),\n                    _createCommentVNode(\"  \"),\n                    (loading.value)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 6 /* CLASS, STYLE */),\n                _createCommentVNode(\"  \"),\n                (expanded.value && children.value.length > 0)\n                    ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(filteredChildren.value, (child) => {\n                        return (_openBlock(), _createBlock(_component_TreeNode, {\n                            key: child.path,\n                            entry: child,\n                            depth: __props.depth + 1,\n                            \"search-query\": __props.searchQuery,\n                            onSelectModel: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('select-model', $event)))\n                        }, null, 8 /* PROPS */, [\"entry\", \"depth\", \"search-query\"]));\n                    }), 128 /* KEYED_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (expanded.value && !loading.value && children.value.length === 0 && loadedOnce.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: \"empty-hint\",\n                        style: _normalizeStyle({ paddingLeft: (__props.depth + 1) * 16 + 8 + 'px' })\n                    }, \"  \", 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (expanded.value && childError.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"child-error\",\n                        style: _normalizeStyle({ paddingLeft: (__props.depth + 1) * 16 + 8 + 'px' })\n                    }, [\n                        _createTextVNode(_toDisplayString(childError.value) + \" \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"retry-link\",\n                            onClick: _withModifiers(loadChildren, [\"stop\"])\n                        }, \"\")\n                    ], 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TreeNode.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TreeNode.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TreeNode.vue?vue&type=style&index=0&id=3a6a95ba&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3a6a95ba\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"model-browser\" };\nconst _hoisted_2 = { class: \"search-box\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"error-bar\"\n};\nconst _hoisted_4 = { class: \"tree-container\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"loading-state\"\n};\nconst _hoisted_6 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_7 = { class: \"browser-footer\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"selected-info\"\n};\nconst _hoisted_9 = { class: \"selected-path\" };\nconst _hoisted_10 = {\n    key: 1,\n    class: \"selected-info\"\n};\nconst _hoisted_11 = { class: \"footer-actions\" };\nconst _hoisted_12 = [\"disabled\"];\nimport { ref, computed } from 'vue';\nimport { fetchDirectory, buildCdnUrl, RateLimitError } from '../live2d/model-browser';\nimport TreeNode from './TreeNode.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ModelBrowser',\n    props: {\n        useCdn: { type: Boolean }\n    },\n    emits: [\"cancel\", \"load-model\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const rootEntries = ref([]);\n        const rootLoading = ref(false);\n        const errorMsg = ref('');\n        const searchQuery = ref('');\n        const selectedPath = ref('');\n        const selectedName = computed(() => {\n            if (!selectedPath.value)\n                return '';\n            const parts = selectedPath.value.split('/');\n            return parts[parts.length - 1];\n        });\n        const filteredRootEntries = computed(() => {\n            if (!searchQuery.value.trim())\n                return rootEntries.value;\n            const q = searchQuery.value.toLowerCase();\n            return rootEntries.value.filter(e => e.name.toLowerCase().includes(q));\n        });\n        function onSelectModel(path) {\n            selectedPath.value = path;\n        }\n        function confirmLoad() {\n            if (!selectedPath.value)\n                return;\n            const cdnUrl = buildCdnUrl(selectedPath.value, props.useCdn);\n            emit('load-model', cdnUrl);\n        }\n        async function loadRoot() {\n            rootLoading.value = true;\n            errorMsg.value = '';\n            try {\n                rootEntries.value = await fetchDirectory('');\n            }\n            catch (e) {\n                if (e instanceof RateLimitError) {\n                    errorMsg.value = e.message;\n                }\n                else {\n                    errorMsg.value = `: ${e.message || ''}`;\n                }\n            }\n            finally {\n                rootLoading.value = false;\n            }\n        }\n        // \n        loadRoot();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"browser-header\" }, [\n                    _createElementVNode(\"span\", { class: \"browser-title\" }, \"\"),\n                    _createElementVNode(\"span\", { class: \"browser-hint\" }, \"Eikanya/Live2d-model\")\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                        type: \"text\",\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchQuery).value = $event)),\n                        placeholder: \"...\"\n                    }, null, 512 /* NEED_PATCH */), [\n                        [_vModelText, searchQuery.value]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (errorMsg.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                        _createElementVNode(\"span\", null, _toDisplayString(errorMsg.value), 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"retry-btn\",\n                            onClick: loadRoot\n                        }, \"\")\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (rootLoading.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"span\", { class: \"spinner\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" ... \", -1 /* CACHED */)\n                            ]))]))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredRootEntries.value, (entry) => {\n                                return (_openBlock(), _createBlock(TreeNode, {\n                                    key: entry.path,\n                                    entry: entry,\n                                    depth: 0,\n                                    \"search-query\": searchQuery.value,\n                                    onSelectModel: onSelectModel\n                                }, null, 8 /* PROPS */, [\"entry\", \"search-query\"]));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            (rootEntries.value.length === 0 && !rootLoading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"  \"))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 64 /* STABLE_FRAGMENT */))\n                ]),\n                _createCommentVNode(\"  &  \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    (selectedPath.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                            _cache[3] || (_cache[3] = _createTextVNode(\" : \", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_9, _toDisplayString(selectedName.value), 1 /* TEXT */)\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"span\", { class: \"no-selection\" }, \"\", -1 /* CACHED */)\n                            ]))])),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"button\", {\n                            class: \"btn btn-secondary\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('cancel')))\n                        }, \"\"),\n                        _createElementVNode(\"button\", {\n                            class: \"btn btn-primary\",\n                            disabled: !selectedPath.value,\n                            onClick: confirmLoad\n                        }, \"  \", 8 /* PROPS */, _hoisted_12)\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ModelBrowser.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelBrowser.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelBrowser.vue?vue&type=style&index=0&id=7ee23a0a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7ee23a0a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, unref as _unref, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode, vShow as _vShow, withKeys as _withKeys, withModifiers as _withModifiers, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"panel-main\" };\nconst _hoisted_2 = { class: \"panel-nav\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"nav-index\" };\nconst _hoisted_5 = { class: \"nav-label\" };\nconst _hoisted_6 = { class: \"nav-sub\" };\nconst _hoisted_7 = { class: \"panel-body\" };\nconst _hoisted_8 = { class: \"setting-section\" };\nconst _hoisted_9 = { class: \"form-group\" };\nconst _hoisted_10 = { class: \"form-group\" };\nconst _hoisted_11 = [\"value\"];\nconst _hoisted_12 = { class: \"form-group\" };\nconst _hoisted_13 = { class: \"form-group\" };\nconst _hoisted_14 = { class: \"form-group\" };\nconst _hoisted_15 = { class: \"input-with-btn\" };\nconst _hoisted_16 = [\"value\"];\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = {\n    key: 0,\n    class: \"hint hint-error\"\n};\nconst _hoisted_19 = { class: \"form-group\" };\nconst _hoisted_20 = [\"disabled\"];\nconst _hoisted_21 = {\n    key: 0,\n    class: \"status-badge status-success\"\n};\nconst _hoisted_22 = {\n    key: 1,\n    class: \"status-badge status-fail\"\n};\nconst _hoisted_23 = { class: \"form-group\" };\nconst _hoisted_24 = { class: \"form-group\" };\nconst _hoisted_25 = { class: \"form-row\" };\nconst _hoisted_26 = { class: \"form-group half\" };\nconst _hoisted_27 = { class: \"form-group half\" };\nconst _hoisted_28 = { class: \"toggle-icon\" };\nconst _hoisted_29 = {\n    key: 0,\n    class: \"advanced-params\"\n};\nconst _hoisted_30 = { class: \"form-row\" };\nconst _hoisted_31 = { class: \"form-group half\" };\nconst _hoisted_32 = { class: \"form-group half\" };\nconst _hoisted_33 = { class: \"form-row\" };\nconst _hoisted_34 = { class: \"form-group half\" };\nconst _hoisted_35 = { class: \"form-group half\" };\nconst _hoisted_36 = { class: \"setting-section\" };\nconst _hoisted_37 = { class: \"form-group\" };\nconst _hoisted_38 = { class: \"input-with-btn\" };\nconst _hoisted_39 = [\"disabled\"];\nconst _hoisted_40 = { class: \"form-group\" };\nconst _hoisted_41 = { class: \"model-list\" };\nconst _hoisted_42 = [\"onClick\"];\nconst _hoisted_43 = { class: \"form-group\" };\nconst _hoisted_44 = { class: \"form-group\" };\nconst _hoisted_45 = { class: \"setting-section\" };\nconst _hoisted_46 = { class: \"form-group\" };\nconst _hoisted_47 = [\"value\"];\nconst _hoisted_48 = {\n    key: 0,\n    class: \"form-group\"\n};\nconst _hoisted_49 = { class: \"form-group\" };\nconst _hoisted_50 = { class: \"form-group\" };\nconst _hoisted_51 = [\"value\"];\nconst _hoisted_52 = { class: \"form-row\" };\nconst _hoisted_53 = { class: \"form-group half\" };\nconst _hoisted_54 = { class: \"form-group half\" };\nconst _hoisted_55 = { class: \"form-group\" };\nconst _hoisted_56 = { class: \"form-group\" };\nconst _hoisted_57 = { class: \"setting-section\" };\nconst _hoisted_58 = { class: \"emotion-layout\" };\nconst _hoisted_59 = { class: \"emotion-configs\" };\nconst _hoisted_60 = { class: \"form-group\" };\nconst _hoisted_61 = { class: \"hint\" };\nconst _hoisted_62 = {\n    key: 0,\n    class: \"form-group\"\n};\nconst _hoisted_63 = { class: \"form-row\" };\nconst _hoisted_64 = { class: \"form-group half\" };\nconst _hoisted_65 = [\"disabled\"];\nconst _hoisted_66 = { class: \"form-row\" };\nconst _hoisted_67 = { class: \"form-group half\" };\nconst _hoisted_68 = { class: \"form-group half\" };\nconst _hoisted_69 = { class: \"form-group\" };\nconst _hoisted_70 = { class: \"hint\" };\nconst _hoisted_71 = { class: \"form-group\" };\nconst _hoisted_72 = { class: \"toggle-icon\" };\nconst _hoisted_73 = { class: \"emotion-map-table\" };\nconst _hoisted_74 = { class: \"emotion-map-tag\" };\nconst _hoisted_75 = [\"onUpdate:modelValue\"];\nconst _hoisted_76 = [\"value\"];\nconst _hoisted_77 = [\"value\"];\nconst _hoisted_78 = [\"onUpdate:modelValue\", \"disabled\"];\nconst _hoisted_79 = [\"value\"];\nconst _hoisted_80 = [\"value\"];\nconst _hoisted_81 = [\"onClick\"];\nconst _hoisted_82 = {\n    key: 1,\n    class: \"emotion-advanced-list\"\n};\nconst _hoisted_83 = { class: \"emotion-advanced-title\" };\nconst _hoisted_84 = { class: \"form-row\" };\nconst _hoisted_85 = { class: \"form-group half\" };\nconst _hoisted_86 = [\"value\", \"onBlur\"];\nconst _hoisted_87 = { class: \"form-group half\" };\nconst _hoisted_88 = [\"onUpdate:modelValue\"];\nconst _hoisted_89 = { class: \"form-group\" };\nconst _hoisted_90 = [\"onUpdate:modelValue\"];\nconst _hoisted_91 = { class: \"emotion-preview-panel\" };\nconst _hoisted_92 = { class: \"emotion-preview-header\" };\nconst _hoisted_93 = { class: \"emotion-preview-tag\" };\nconst _hoisted_94 = {\n    key: 0,\n    class: \"emotion-preview-empty\"\n};\nconst _hoisted_95 = { class: \"emotion-preview-controls\" };\nconst _hoisted_96 = { class: \"emotion-zoom-row\" };\nconst _hoisted_97 = { class: \"zoom-value\" };\nconst _hoisted_98 = { class: \"hint\" };\nconst _hoisted_99 = { class: \"setting-section\" };\nconst _hoisted_100 = { class: \"form-group\" };\nconst _hoisted_101 = { class: \"form-group\" };\nconst _hoisted_102 = [\"value\"];\nconst _hoisted_103 = [\"value\"];\nconst _hoisted_104 = { class: \"form-group\" };\nconst _hoisted_105 = { class: \"form-group\" };\nconst _hoisted_106 = { class: \"input-with-btn\" };\nconst _hoisted_107 = [\"value\"];\nconst _hoisted_108 = [\"disabled\"];\nconst _hoisted_109 = { class: \"hint\" };\nconst _hoisted_110 = { class: \"toggle-icon\" };\nconst _hoisted_111 = {\n    key: 0,\n    class: \"advanced-params\"\n};\nconst _hoisted_112 = { class: \"form-group\" };\nconst _hoisted_113 = { class: \"form-group\" };\nconst _hoisted_114 = {\n    key: 1,\n    class: \"advanced-params\"\n};\nconst _hoisted_115 = { class: \"form-group\" };\nconst _hoisted_116 = { class: \"form-group\" };\nconst _hoisted_117 = { class: \"form-row\" };\nconst _hoisted_118 = { class: \"form-group half\" };\nconst _hoisted_119 = { class: \"form-group half\" };\nconst _hoisted_120 = { class: \"form-row\" };\nconst _hoisted_121 = { class: \"form-group half\" };\nconst _hoisted_122 = { class: \"form-group half\" };\nconst _hoisted_123 = { class: \"form-group\" };\nconst _hoisted_124 = { class: \"form-group\" };\nconst _hoisted_125 = { class: \"form-row\" };\nconst _hoisted_126 = { class: \"form-group half\" };\nconst _hoisted_127 = [\"disabled\"];\nconst _hoisted_128 = {\n    key: 2,\n    class: \"form-group\"\n};\nconst _hoisted_129 = [\"disabled\"];\nconst _hoisted_130 = { class: \"setting-section\" };\nconst _hoisted_131 = { class: \"browser-dialog-header\" };\nconst _hoisted_132 = { class: \"browser-dialog-body\" };\nimport { storeToRefs } from 'pinia';\nimport { computed, nextTick, onBeforeUnmount, ref, watch } from 'vue';\nimport { TTSManager } from '../audio/tts-manager';\nimport { TTS_PROVIDER, getGptSoVitsVoiceList, getTTSEnabled, getTTSVoiceListAsync, normalizeGptSoVitsVoicesForStore, pickFirstUsableGptSoVitsVoice, setTTSEnabled, } from '../audio/tts-config';\nimport { API_SOURCES, COMMENT_STYLES, COMMENT_TRIGGER_MODE_OPTIONS, EMOTION_TAGS, RECOMMENDED_MODELS, SCRIPT_NAME, } from '../core/constants';\nimport { createDefaultEmotionConfigs, parseAliasesText } from '../core/emotion';\nimport { useSettingsStore } from '../core/settings';\nimport { matchLive2DExpression, matchLive2DMotion } from '../live2d/expression-motion';\nimport { Live2DManager } from '../live2d/manager';\nimport { Live2DStage } from '../live2d/stage';\nimport ModelBrowser from './ModelBrowser.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsPanel',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"close\", \"model-change\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const sectionTabs = [\n            { key: 'api', index: '01', label: 'API ', en: 'API CONTROL' },\n            { key: 'live2d', index: '02', label: 'Live2D', en: 'MODEL CONTROL' },\n            { key: 'comment', index: '03', label: '', en: 'COMMENT SYSTEM' },\n            { key: 'expression', index: '04', label: '', en: 'EMOTION COT' },\n            { key: 'tts', index: '05', label: 'TTS', en: 'VOICE CONTROL' },\n            { key: 'about', index: '06', label: '', en: 'ABOUT & LICENSE' },\n        ];\n        const activeSection = ref('api');\n        const store = useSettingsStore();\n        const { settings } = storeToRefs(store);\n        const recommendedModels = RECOMMENDED_MODELS;\n        const commentStyles = COMMENT_STYLES;\n        const commentTriggerModeOptions = COMMENT_TRIGGER_MODE_OPTIONS;\n        const apiSources = API_SOURCES;\n        const showBrowser = ref(false);\n        const customModelUrl = ref(settings.value.modelPath || '');\n        const ttsEnabled = ref(getTTSEnabled());\n        const ttsVoiceList = ref([]);\n        const refreshingTtsVoices = ref(false);\n        const gptSoVitsVoicesJson = ref('');\n        const ttsTestText = ref(' TTS ');\n        const ttsVoiceHint = computed(() => {\n            const providerHint = settings.value.ttsProvider === TTS_PROVIDER.GPT_SOVITS_V2\n                ? 'GPT-SoVITS name '\n                : 'LittleWhiteBox/';\n            const emptyHint = ttsVoiceList.value.length === 0 ? '' : '';\n            return `${providerHint}${emptyHint}`;\n        });\n        const emotionTags = EMOTION_TAGS;\n        const live2dExpressions = ref([]);\n        const live2dMotionGroups = ref([]);\n        const live2dMotions = ref([]);\n        const refreshingLive2dLists = ref(false);\n        const live2dExpressionOptions = computed(() => {\n            const dedup = new Set();\n            const list = [];\n            for (const item of live2dExpressions.value) {\n                const value = String(item ?? '').trim();\n                if (!value)\n                    continue;\n                if (dedup.has(value))\n                    continue;\n                dedup.add(value);\n                list.push(value);\n            }\n            return list.sort((a, b) => a.localeCompare(b));\n        });\n        const live2dExpressionOptionSet = computed(() => {\n            return new Set(live2dExpressionOptions.value);\n        });\n        const live2dMotionSelectOptions = computed(() => {\n            const seen = new Set();\n            const options = [];\n            for (const motion of live2dMotions.value) {\n                const value = String(motion?.name ?? '').trim();\n                if (!value)\n                    continue;\n                const dedupKey = value.toLowerCase();\n                if (seen.has(dedupKey))\n                    continue;\n                seen.add(dedupKey);\n                const groupLabel = motion.group ? `${motion.group}#${motion.index}` : `#${motion.index}`;\n                options.push({\n                    key: `motion_${dedupKey}_${groupLabel}`,\n                    value,\n                    label: `${value} ${groupLabel}`,\n                });\n            }\n            for (const group of live2dMotionGroups.value) {\n                const value = String(group?.name ?? '').trim();\n                if (!value)\n                    continue;\n                const dedupKey = value.toLowerCase();\n                if (seen.has(dedupKey))\n                    continue;\n                seen.add(dedupKey);\n                options.push({\n                    key: `group_${dedupKey}_${group.count}`,\n                    value,\n                    label: `${value} ${group.count}`,\n                });\n            }\n            return options.sort((a, b) => a.value.localeCompare(b.value));\n        });\n        const live2dMotionOptionSet = computed(() => {\n            return new Set(live2dMotionSelectOptions.value.map(option => option.value));\n        });\n        const live2dListSummary = computed(() => {\n            const exprCount = live2dExpressions.value.length;\n            const motionCount = live2dMotions.value.length;\n            const groupCount = live2dMotionGroups.value.length;\n            if (!Live2DManager.model)\n                return ' Live2D ';\n            const exprHint = exprCount === 0 ? ' Expressions' : '';\n            const motionHint = motionCount === 0 ? ' motions' : '';\n            return ` ${exprCount} ${exprHint} ${motionCount} ${motionHint} ${groupCount} `;\n        });\n        const live2dPreviewMountEl = ref(null);\n        const live2dPreviewInteractEl = ref(null);\n        const previewMounted = ref(false);\n        const previewTag = ref('');\n        const previewStatus = ref('');\n        const previewZoomFactor = ref(1.8);\n        let previewPanOffsetX = 0;\n        let previewPanOffsetY = 0;\n        let previewBasePose = { x: 0, y: 0, scale: 1 };\n        let previewIsDragging = false;\n        let previewDragStart = { x: 0, y: 0 };\n        let previewDragOrigin = { x: 0, y: 0 };\n        let previewMountPromise = null;\n        let previewResizeObserver = null;\n        function clamp(value, min, max) {\n            return Math.max(min, Math.min(max, value));\n        }\n        function getPreviewCanvasSize() {\n            const el = live2dPreviewMountEl.value;\n            const rect = el?.getBoundingClientRect?.();\n            const width = Math.max(1, Math.floor(rect?.width || el?.clientWidth || 320));\n            const height = Math.max(1, Math.floor(rect?.height || el?.clientHeight || 260));\n            return { width, height };\n        }\n        function capturePreviewBasePose() {\n            const model = Live2DManager.model;\n            if (!model)\n                return;\n            const baseScale = Number(model.scale?.x);\n            previewBasePose = {\n                x: Number(model.x) || 0,\n                y: Number(model.y) || 0,\n                scale: Number.isFinite(baseScale) && baseScale > 0 ? baseScale : 1,\n            };\n        }\n        function applyPreviewViewport() {\n            if (!previewMounted.value)\n                return;\n            const model = Live2DManager.model;\n            if (!model)\n                return;\n            const { width, height } = getPreviewCanvasSize();\n            const maxOffsetX = Math.max(60, width * 0.45);\n            const maxOffsetY = Math.max(60, height * 0.45);\n            previewPanOffsetX = clamp(previewPanOffsetX, -maxOffsetX, maxOffsetX);\n            previewPanOffsetY = clamp(previewPanOffsetY, -maxOffsetY, maxOffsetY);\n            previewZoomFactor.value = clamp(previewZoomFactor.value, 0.5, 4);\n            const finalScale = previewBasePose.scale * previewZoomFactor.value;\n            if (model.scale?.set) {\n                model.scale.set(finalScale);\n            }\n            model.x = previewBasePose.x + previewPanOffsetX;\n            model.y = previewBasePose.y + previewPanOffsetY;\n            try {\n                const app = Live2DStage.app;\n                if (app?.renderer && app?.stage) {\n                    app.renderer.render(app.stage);\n                }\n            }\n            catch {\n                // ignore\n            }\n        }\n        function resetPreviewViewport() {\n            previewZoomFactor.value = 1.8;\n            previewPanOffsetX = 0;\n            previewPanOffsetY = 0;\n            applyPreviewViewport();\n        }\n        function getPreviewDragPoint(event) {\n            const ev = event?.originalEvent || event;\n            if (ev?.touches?.length)\n                return { x: ev.touches[0].clientX, y: ev.touches[0].clientY };\n            if (ev?.changedTouches?.length)\n                return { x: ev.changedTouches[0].clientX, y: ev.changedTouches[0].clientY };\n            if (Number.isFinite(ev?.clientX) && Number.isFinite(ev?.clientY))\n                return { x: ev.clientX, y: ev.clientY };\n            return null;\n        }\n        function unbindPreviewViewportEvents() {\n            const interactEl = live2dPreviewInteractEl.value;\n            if (!interactEl)\n                return;\n            const top = window.parent ?? window;\n            const doc = top.document;\n            const handlers = interactEl.__dpPreviewHandlers;\n            if (!handlers)\n                return;\n            try {\n                interactEl.removeEventListener('mousedown', handlers.onDown);\n                interactEl.removeEventListener('touchstart', handlers.onDown);\n                interactEl.removeEventListener('wheel', handlers.onWheel);\n                doc.removeEventListener('mousemove', handlers.onMove);\n                doc.removeEventListener('touchmove', handlers.onMove);\n                doc.removeEventListener('mouseup', handlers.onUp);\n                doc.removeEventListener('touchend', handlers.onUp);\n                doc.removeEventListener('touchcancel', handlers.onUp);\n            }\n            catch {\n                // ignore\n            }\n            interactEl.__dpPreviewHandlers = null;\n        }\n        function bindPreviewViewportEvents() {\n            const interactEl = live2dPreviewInteractEl.value;\n            if (!interactEl)\n                return;\n            if (interactEl.__dpPreviewHandlers)\n                return;\n            const top = window.parent ?? window;\n            const doc = top.document;\n            const onDown = (event) => {\n                if (!previewMounted.value)\n                    return;\n                const point = getPreviewDragPoint(event);\n                if (!point)\n                    return;\n                previewIsDragging = true;\n                previewDragStart = point;\n                previewDragOrigin = { x: previewPanOffsetX, y: previewPanOffsetY };\n                interactEl.style.cursor = 'grabbing';\n                if (typeof event.preventDefault === 'function')\n                    event.preventDefault();\n            };\n            const onMove = (event) => {\n                if (!previewIsDragging)\n                    return;\n                const point = getPreviewDragPoint(event);\n                if (!point)\n                    return;\n                previewPanOffsetX = previewDragOrigin.x + (point.x - previewDragStart.x);\n                previewPanOffsetY = previewDragOrigin.y + (point.y - previewDragStart.y);\n                applyPreviewViewport();\n                if (typeof event.preventDefault === 'function')\n                    event.preventDefault();\n            };\n            const onUp = () => {\n                if (!previewIsDragging)\n                    return;\n                previewIsDragging = false;\n                interactEl.style.cursor = 'grab';\n            };\n            const onWheel = (event) => {\n                if (!previewMounted.value)\n                    return;\n                event.preventDefault();\n                const delta = event.deltaY > 0 ? -0.1 : 0.1;\n                previewZoomFactor.value = clamp(previewZoomFactor.value + delta, 0.5, 4);\n                applyPreviewViewport();\n            };\n            interactEl.style.cursor = 'grab';\n            interactEl.addEventListener('mousedown', onDown);\n            interactEl.addEventListener('touchstart', onDown, { passive: false });\n            interactEl.addEventListener('wheel', onWheel, { passive: false });\n            doc.addEventListener('mousemove', onMove);\n            doc.addEventListener('touchmove', onMove, { passive: false });\n            doc.addEventListener('mouseup', onUp);\n            doc.addEventListener('touchend', onUp);\n            doc.addEventListener('touchcancel', onUp);\n            interactEl.__dpPreviewHandlers = { onDown, onMove, onUp, onWheel };\n        }\n        function disconnectPreviewResizeObserver() {\n            try {\n                previewResizeObserver?.disconnect();\n            }\n            catch {\n                // ignore\n            }\n            finally {\n                previewResizeObserver = null;\n            }\n        }\n        function bindPreviewResizeObserver() {\n            const mountEl = live2dPreviewMountEl.value;\n            if (!mountEl)\n                return;\n            disconnectPreviewResizeObserver();\n            if (typeof ResizeObserver === 'undefined')\n                return;\n            try {\n                previewResizeObserver = new ResizeObserver(() => {\n                    if (!previewMounted.value)\n                        return;\n                    const { width, height } = getPreviewCanvasSize();\n                    Live2DStage.resizePreview(width, height);\n                    applyPreviewViewport();\n                });\n                previewResizeObserver.observe(mountEl);\n            }\n            catch {\n                previewResizeObserver = null;\n            }\n        }\n        async function ensurePreviewMounted() {\n            if (previewMounted.value)\n                return true;\n            if (previewMountPromise)\n                return previewMountPromise;\n            previewMountPromise = (async () => {\n                await nextTick();\n                const mountEl = live2dPreviewMountEl.value;\n                if (!mountEl)\n                    return false;\n                if (!Live2DManager.model) {\n                    previewStatus.value = ' Live2D ';\n                    return false;\n                }\n                if (!Live2DStage.container) {\n                    previewStatus.value = 'Live2D ';\n                    return false;\n                }\n                previewStatus.value = '...';\n                const attached = Live2DStage.pushMount(mountEl);\n                if (!attached) {\n                    previewStatus.value = '';\n                    return false;\n                }\n                previewMounted.value = true;\n                bindPreviewViewportEvents();\n                bindPreviewResizeObserver();\n                const { width, height } = getPreviewCanvasSize();\n                Live2DStage.resizePreview(width, height);\n                Live2DManager.mountToStage(width, height, 1);\n                capturePreviewBasePose();\n                resetPreviewViewport();\n                // \n                refreshLive2DLists();\n                previewStatus.value = '/';\n                return true;\n            })().finally(() => {\n                previewMountPromise = null;\n            });\n            return previewMountPromise;\n        }\n        function cleanupPreviewMount() {\n            disconnectPreviewResizeObserver();\n            unbindPreviewViewportEvents();\n            previewIsDragging = false;\n            if (!previewMounted.value)\n                return;\n            previewMounted.value = false;\n            const restored = Live2DStage.popMount();\n            if (restored && Live2DManager.model) {\n                Live2DManager.mountToStage(restored.width, restored.height, 1);\n            }\n            previewStatus.value = '';\n        }\n        function replayPreview() {\n            void previewEmotion(previewTag.value);\n        }\n        watch(() => ({ visible: props.visible, section: activeSection.value }), ({ visible, section }) => {\n            if (visible && section === 'expression') {\n                void (async () => {\n                    const mounted = await ensurePreviewMounted();\n                    if (mounted) {\n                        void previewEmotion(previewTag.value);\n                    }\n                })();\n                return;\n            }\n            cleanupPreviewMount();\n        }, { immediate: true });\n        onBeforeUnmount(() => {\n            cleanupPreviewMount();\n        });\n        const modelList = ref([]);\n        const fetchingModels = ref(false);\n        const modelFetchError = ref('');\n        const testingConnection = ref(false);\n        const connectionStatus = ref('idle');\n        const connectionError = ref('');\n        const showAdvanced = ref(false);\n        const showEmotionAdvanced = ref(false);\n        const showLipSyncAdvanced = ref(false);\n        const lipSyncManualParamsText = ref('');\n        const overlayFallbackStyle = {\n            position: 'fixed',\n            inset: '0',\n            width: '100vw',\n            height: '100vh',\n            minHeight: '100vh',\n            zIndex: '10001',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        };\n        const panelFallbackStyle = {\n            position: 'relative',\n            display: 'flex',\n            flexDirection: 'column',\n            width: 'min(1080px, calc(100vw - 24px))',\n            maxHeight: 'calc(100vh - 24px)',\n            minHeight: '280px',\n        };\n        function normalizeModelList(list) {\n            if (!Array.isArray(list))\n                return [];\n            const out = [];\n            for (const item of list) {\n                if (typeof item === 'string') {\n                    const trimmed = item.trim();\n                    if (trimmed)\n                        out.push(trimmed);\n                    continue;\n                }\n                if (item && typeof item === 'object') {\n                    const maybeId = item.id;\n                    const maybeModel = item.model;\n                    const maybeName = item.name;\n                    const picked = typeof maybeId === 'string'\n                        ? maybeId\n                        : typeof maybeModel === 'string'\n                            ? maybeModel\n                            : typeof maybeName === 'string'\n                                ? maybeName\n                                : '';\n                    const trimmed = picked.trim();\n                    if (trimmed)\n                        out.push(trimmed);\n                }\n            }\n            return [...new Set(out)];\n        }\n        async function getModelListByHttp(customApi) {\n            const base = String(customApi.apiurl || '').trim().replace(/\\/+$/, '');\n            if (!base)\n                throw new Error('API URL ');\n            const headers = { Accept: 'application/json' };\n            if (customApi.key)\n                headers.Authorization = `Bearer ${customApi.key}`;\n            const request = async (path) => fetch(`${base}${path}`, {\n                method: 'GET',\n                headers,\n                cache: 'no-cache',\n            });\n            let response = await request('/v1/models');\n            if (!response.ok && (response.status === 404 || response.status === 405)) {\n                response = await request('/models');\n            }\n            if (!response.ok) {\n                throw new Error(` (HTTP ${response.status})`);\n            }\n            const payload = (await response.json());\n            return normalizeModelList(payload.data ?? payload.models ?? payload);\n        }\n        async function getModelListSafe(customApi) {\n            const helperGetModelList = window?.TavernHelper?.getModelList;\n            if (typeof helperGetModelList === 'function') {\n                try {\n                    const models = await helperGetModelList(customApi);\n                    const normalized = normalizeModelList(models);\n                    if (normalized.length > 0)\n                        return normalized;\n                }\n                catch (e) {\n                    console.warn(`[${SCRIPT_NAME}] TavernHelper.getModelList  HTTP `, e);\n                }\n            }\n            if (typeof getModelList === 'function') {\n                try {\n                    const models = await getModelList(customApi);\n                    const normalized = normalizeModelList(models);\n                    if (normalized.length > 0)\n                        return normalized;\n                }\n                catch (e) {\n                    console.warn(`[${SCRIPT_NAME}] getModelList  HTTP `, e);\n                }\n            }\n            return getModelListByHttp(customApi);\n        }\n        async function fetchModels() {\n            const url = settings.value.apiConfig.url;\n            if (!url)\n                return;\n            fetchingModels.value = true;\n            modelFetchError.value = '';\n            modelList.value = [];\n            try {\n                const models = await getModelListSafe({\n                    apiurl: url,\n                    key: settings.value.apiConfig.apiKey || undefined,\n                });\n                modelList.value = models;\n                if (models.length > 0 && !models.includes(settings.value.apiConfig.model)) {\n                    settings.value.apiConfig.model = models[0];\n                }\n            }\n            catch (e) {\n                modelFetchError.value = `: ${e instanceof Error ? e.message : String(e)}`;\n            }\n            finally {\n                fetchingModels.value = false;\n            }\n        }\n        async function testConnection() {\n            const url = settings.value.apiConfig.url;\n            if (!url)\n                return;\n            testingConnection.value = true;\n            connectionStatus.value = 'idle';\n            connectionError.value = '';\n            try {\n                const models = await getModelListSafe({\n                    apiurl: url,\n                    key: settings.value.apiConfig.apiKey || undefined,\n                });\n                if (models && models.length >= 0) {\n                    connectionStatus.value = 'success';\n                }\n                else {\n                    connectionStatus.value = 'fail';\n                    connectionError.value = '';\n                }\n            }\n            catch (e) {\n                connectionStatus.value = 'fail';\n                connectionError.value = e instanceof Error ? e.message : String(e);\n            }\n            finally {\n                testingConnection.value = false;\n            }\n        }\n        function selectModel(path) {\n            settings.value.modelPath = path;\n            customModelUrl.value = path;\n            emit('model-change', path);\n        }\n        function onBrowserLoad(url) {\n            settings.value.modelPath = url;\n            customModelUrl.value = url;\n            showBrowser.value = false;\n            emit('model-change', url);\n        }\n        function loadCustomUrl() {\n            let url = customModelUrl.value.trim();\n            if (!url)\n                return;\n            const blobMatch = url.match(/^https?:\\/\\/github\\.com\\/([^/]+\\/[^/]+)\\/blob\\/(.+)$/);\n            if (blobMatch) {\n                url = `https://raw.githubusercontent.com/${blobMatch[1]}/${blobMatch[2]}`;\n                customModelUrl.value = url;\n            }\n            settings.value.modelPath = url;\n            emit('model-change', url);\n        }\n        function resetSettings() {\n            store.resetSettings();\n        }\n        function resetEmotionConfigs() {\n            settings.value.emotionConfigs = createDefaultEmotionConfigs();\n            try {\n                toastr.success('');\n            }\n            catch {\n                // ignore\n            }\n        }\n        function onAliasesBlur(cfg, ev) {\n            const input = ev.target;\n            if (!input)\n                return;\n            cfg.aliases = parseAliasesText(input.value);\n        }\n        function refreshLive2DLists() {\n            refreshingLive2dLists.value = true;\n            try {\n                live2dExpressions.value = Live2DManager.getExpressions();\n                live2dMotions.value = Live2DManager.getMotions()\n                    .map((m) => ({ name: m.name, group: m.group, index: m.index }))\n                    .sort((a, b) => a.name.localeCompare(b.name));\n                const groups = Live2DManager.getMotionGroups();\n                live2dMotionGroups.value = Object.entries(groups)\n                    .map(([name, count]) => ({ name, count }))\n                    .sort((a, b) => a.name.localeCompare(b.name));\n                try {\n                    toastr.info('/');\n                }\n                catch {\n                    // ignore\n                }\n            }\n            catch (e) {\n                console.warn(`[${SCRIPT_NAME}] /:`, e);\n                live2dExpressions.value = [];\n                live2dMotions.value = [];\n                live2dMotionGroups.value = [];\n                try {\n                    toastr.error('');\n                }\n                catch {\n                    // ignore\n                }\n            }\n            finally {\n                refreshingLive2dLists.value = false;\n            }\n        }\n        function autoMatchLive2DOverrides(overwrite = false) {\n            const model = Live2DManager.model;\n            if (!model) {\n                try {\n                    toastr.warning('');\n                }\n                catch {\n                    // ignore\n                }\n                return;\n            }\n            let filled = 0;\n            for (const cfg of settings.value.emotionConfigs) {\n                const exprOverride = String(cfg.live2dExpression || '').trim();\n                if (overwrite || !exprOverride) {\n                    const matched = matchLive2DExpression(model, cfg.tag);\n                    if (matched) {\n                        cfg.live2dExpression = matched;\n                        filled += 1;\n                    }\n                }\n                const motionEnabled = cfg.live2dMotion?.enabled !== false;\n                const motionGroupOverride = String(cfg.live2dMotion?.group || '').trim();\n                if (motionEnabled && (overwrite || !motionGroupOverride)) {\n                    const matchedMotion = matchLive2DMotion(model, cfg.tag);\n                    if (matchedMotion) {\n                        cfg.live2dMotion.group = matchedMotion.name || matchedMotion.group;\n                        cfg.live2dMotion.index = matchedMotion.index || 0;\n                        filled += 1;\n                    }\n                }\n            }\n            try {\n                if (overwrite) {\n                    toastr.success(filled > 0 ? ` ${filled} ` : '');\n                }\n                else {\n                    toastr.success(filled > 0 ? ` ${filled} ` : '');\n                }\n            }\n            catch {\n                // ignore\n            }\n        }\n        function clearLive2DOverrides() {\n            let cleared = 0;\n            for (const cfg of settings.value.emotionConfigs) {\n                const hadExpr = !!String(cfg.live2dExpression || '').trim();\n                const hadGroup = !!String(cfg.live2dMotion?.group || '').trim();\n                if (hadExpr) {\n                    cfg.live2dExpression = '';\n                    cleared += 1;\n                }\n                if (hadGroup) {\n                    cfg.live2dMotion.group = '';\n                    cfg.live2dMotion.index = 0;\n                    cleared += 1;\n                }\n            }\n            try {\n                toastr.info(cleared > 0 ? ` ${cleared}  Live2D ` : ' Live2D ');\n            }\n            catch {\n                // ignore\n            }\n        }\n        async function previewEmotion(tag) {\n            previewTag.value = tag;\n            const mounted = await ensurePreviewMounted();\n            if (!mounted)\n                return;\n            const model = Live2DManager.model;\n            if (!model) {\n                previewStatus.value = '';\n                return;\n            }\n            applyPreviewViewport();\n            const cfg = settings.value.emotionConfigs.find((c) => c.tag === tag);\n            const expr = matchLive2DExpression(model, tag, cfg?.live2dExpression);\n            if (expr) {\n                Live2DManager.playExpression(expr);\n            }\n            const motion = matchLive2DMotion(model, tag, cfg?.live2dMotion);\n            if (motion) {\n                Live2DManager.playMotion(motion.group, motion.index);\n            }\n            const exprText = expr ? `: ${expr}` : ': ()';\n            const motionText = motion\n                ? motion.name\n                    ? `: ${motion.name} (${motion.group || '()'}#${motion.index})`\n                    : `: ${motion.group || '()'}`\n                : ': ()';\n            previewStatus.value = `${tag} | ${exprText} | ${motionText}`;\n            if (!expr && !motion) {\n                try {\n                    toastr.info('/');\n                }\n                catch {\n                    // ignore\n                }\n            }\n        }\n        function onToggleTtsEnabled() {\n            setTTSEnabled(ttsEnabled.value);\n            if (!ttsEnabled.value) {\n                try {\n                    TTSManager.stop();\n                }\n                catch {\n                    // ignore\n                }\n            }\n        }\n        async function refreshTtsVoices() {\n            refreshingTtsVoices.value = true;\n            try {\n                ttsVoiceList.value = await getTTSVoiceListAsync();\n            }\n            catch (e) {\n                console.warn(`[${SCRIPT_NAME}]  TTS :`, e);\n                ttsVoiceList.value = [];\n            }\n            finally {\n                refreshingTtsVoices.value = false;\n            }\n        }\n        function saveGptSoVitsVoices() {\n            let parsed = null;\n            try {\n                parsed = JSON.parse(gptSoVitsVoicesJson.value || '[]');\n            }\n            catch {\n                toastr.error(' JSON ');\n                return;\n            }\n            if (!Array.isArray(parsed)) {\n                toastr.error('');\n                return;\n            }\n            const normalized = normalizeGptSoVitsVoicesForStore(parsed);\n            settings.value.gptSoVits.voices = normalized.voices;\n            const firstUsable = pickFirstUsableGptSoVitsVoice(getGptSoVitsVoiceList());\n            if (!settings.value.ttsDefaultSpeaker && firstUsable?.name) {\n                settings.value.ttsDefaultSpeaker = firstUsable.name;\n            }\n            void refreshTtsVoices();\n            let msg = `GPT-SoVITS ${normalized.voices.length} `;\n            if (normalized.ignoredCount > 0)\n                msg += ` ${normalized.ignoredCount} `;\n            if (normalized.missingRefCount > 0)\n                msg += `${normalized.missingRefCount}  refAudioPath`;\n            toastr.success(msg);\n        }\n        function getCurrentCharacterId() {\n            try {\n                const ctx = SillyTavern?.getContext?.();\n                if (ctx?.characterId !== undefined && ctx?.characterId !== null) {\n                    return String(ctx.characterId);\n                }\n            }\n            catch {\n                // ignore\n            }\n            return 'default';\n        }\n        async function testTts() {\n            if (!ttsEnabled.value)\n                return;\n            const text = String(ttsTestText.value || '').trim() || ' TTS ';\n            const speaker = getCurrentCharacterId();\n            let voiceName = String(settings.value.ttsDefaultSpeaker || '').trim();\n            if (settings.value.ttsProvider === TTS_PROVIDER.GPT_SOVITS_V2) {\n                const voices = getGptSoVitsVoiceList();\n                const selected = voices.find(v => v.name === voiceName) || null;\n                const selectedUsable = !!String(selected?.gptSoVits?.refAudioPath || '').trim();\n                const fallback = pickFirstUsableGptSoVitsVoice(voices);\n                const target = selectedUsable ? selected : fallback;\n                const targetName = String(target?.name || '').trim();\n                if (!targetName) {\n                    toastr.error('refAudioPath ');\n                    return;\n                }\n                if (voiceName !== targetName) {\n                    settings.value.ttsDefaultSpeaker = targetName;\n                    voiceName = targetName;\n                    toastr.info(`${targetName}`);\n                }\n            }\n            try {\n                TTSManager.stop();\n                await TTSManager.speak({ type: 'dialogue', speaker, text, tts: voiceName ? { speaker: voiceName } : undefined }, `desktop_pet_tts_test_${Date.now()}`);\n            }\n            catch (e) {\n                console.warn(`[${SCRIPT_NAME}] TTS :`, e);\n            }\n        }\n        function stopTts() {\n            try {\n                TTSManager.stop();\n            }\n            catch {\n                // ignore\n            }\n        }\n        function applyLipSyncManualParams() {\n            const raw = String(lipSyncManualParamsText.value || '');\n            const parts = raw\n                .split(/[\\n,]/)\n                .map(item => String(item || '').trim())\n                .filter(Boolean);\n            const dedup = Array.from(new Set(parts));\n            settings.value.lipSyncManualParamIds = dedup;\n            lipSyncManualParamsText.value = dedup.join('\\n');\n        }\n        function close() {\n            applyLipSyncManualParams();\n            emit('close');\n        }\n        watch(() => props.visible, (visible) => {\n            if (!visible)\n                return;\n            activeSection.value = 'api';\n            showEmotionAdvanced.value = false;\n            ttsEnabled.value = getTTSEnabled();\n            lipSyncManualParamsText.value = Array.isArray(settings.value.lipSyncManualParamIds)\n                ? settings.value.lipSyncManualParamIds.join('\\n')\n                : '';\n            try {\n                gptSoVitsVoicesJson.value = JSON.stringify(settings.value.gptSoVits?.voices || [], null, 2);\n            }\n            catch {\n                gptSoVitsVoicesJson.value = '[]';\n            }\n            void refreshTtsVoices();\n        }, { immediate: true });\n        watch(() => settings.value.ttsProvider, () => {\n            try {\n                TTSManager._refreshProviderState();\n            }\n            catch {\n                // ignore\n            }\n            void refreshTtsVoices();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", null, [\n                (__props.visible)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"settings-overlay dp-settings-overlay\",\n                        style: overlayFallbackStyle,\n                        onClick: _withModifiers(close, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"settings-panel dp-settings-panel\",\n                            style: panelFallbackStyle\n                        }, [\n                            _createElementVNode(\"div\", { class: \"panel-header\" }, [\n                                _cache[52] || (_cache[52] = _createElementVNode(\"div\", { class: \"header-title\" }, [\n                                    _createElementVNode(\"h3\", null, \"\"),\n                                    _createElementVNode(\"p\", null, \"SYSTEM // SETTINGS\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"close-btn\",\n                                    type: \"button\",\n                                    onClick: close\n                                }, \"CLOSE\")\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"aside\", _hoisted_2, [\n                                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(sectionTabs, (item) => {\n                                        return _createElementVNode(\"button\", {\n                                            key: item.key,\n                                            class: _normalizeClass([\"nav-btn\", { active: activeSection.value === item.key }]),\n                                            type: \"button\",\n                                            onClick: ($event) => (activeSection.value = item.key)\n                                        }, [\n                                            _createElementVNode(\"span\", _hoisted_4, _toDisplayString(item.index), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(item.label), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", _hoisted_6, _toDisplayString(item.en), 1 /* TEXT */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_3);\n                                    }), 64 /* STABLE_FRAGMENT */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_7, [\n                                    _withDirectives(_createElementVNode(\"section\", _hoisted_8, [\n                                        _cache[66] || (_cache[66] = _createElementVNode(\"h4\", null, [\n                                            _createElementVNode(\"span\", { class: \"section-index\" }, \"01\"),\n                                            _createElementVNode(\"span\", { class: \"section-label\" }, \"API \"),\n                                            _createElementVNode(\"span\", { class: \"section-sub\" }, \"API CONTROL\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            _cache[54] || (_cache[54] = _createElementVNode(\"label\", null, \"API \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(settings).apiMode) = $event))\n                                            }, [...(_cache[53] || (_cache[53] = [\n                                                    _createElementVNode(\"option\", { value: \"tavern\" }, \" API\", -1 /* CACHED */),\n                                                    _createElementVNode(\"option\", { value: \"custom\" }, \" API\", -1 /* CACHED */)\n                                                ]))], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, _unref(settings).apiMode]\n                                            ])\n                                        ]),\n                                        (_unref(settings).apiMode === 'custom')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                _createElementVNode(\"div\", _hoisted_10, [\n                                                    _cache[55] || (_cache[55] = _createElementVNode(\"label\", null, \"API Source\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"select\", {\n                                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(settings).apiConfig.source) = $event))\n                                                    }, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(apiSources), (src) => {\n                                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                                key: src.value,\n                                                                value: src.value\n                                                            }, _toDisplayString(src.label), 9 /* TEXT, PROPS */, _hoisted_11));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ], 512 /* NEED_PATCH */), [\n                                                        [_vModelSelect, _unref(settings).apiConfig.source]\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_12, [\n                                                    _cache[56] || (_cache[56] = _createElementVNode(\"label\", null, \"API URL\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        type: \"text\",\n                                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(settings).apiConfig.url) = $event)),\n                                                        placeholder: \"https://api.openai.com/v1\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, _unref(settings).apiConfig.url]\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_13, [\n                                                    _cache[57] || (_cache[57] = _createElementVNode(\"label\", null, \"API Key\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        type: \"password\",\n                                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).apiConfig.apiKey) = $event)),\n                                                        placeholder: \"sk-...\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, _unref(settings).apiConfig.apiKey]\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_14, [\n                                                    _cache[58] || (_cache[58] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_15, [\n                                                        (modelList.value.length === 0)\n                                                            ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n                                                                key: 0,\n                                                                type: \"text\",\n                                                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).apiConfig.model) = $event)),\n                                                                placeholder: \"gpt-4o-mini\"\n                                                            }, null, 512 /* NEED_PATCH */)), [\n                                                                [_vModelText, _unref(settings).apiConfig.model]\n                                                            ])\n                                                            : _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                                                                key: 1,\n                                                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).apiConfig.model) = $event))\n                                                            }, [\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(modelList.value, (m) => {\n                                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: m,\n                                                                        value: m\n                                                                    }, _toDisplayString(m), 9 /* TEXT, PROPS */, _hoisted_16));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ], 512 /* NEED_PATCH */)), [\n                                                                [_vModelSelect, _unref(settings).apiConfig.model]\n                                                            ]),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"input-btn\",\n                                                            type: \"button\",\n                                                            onClick: fetchModels,\n                                                            disabled: !_unref(settings).apiConfig.url || fetchingModels.value\n                                                        }, _toDisplayString(fetchingModels.value ? '...' : ''), 9 /* TEXT, PROPS */, _hoisted_17)\n                                                    ]),\n                                                    (modelFetchError.value)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _toDisplayString(modelFetchError.value), 1 /* TEXT */))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_19, [\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"btn btn-test\",\n                                                        type: \"button\",\n                                                        onClick: testConnection,\n                                                        disabled: !_unref(settings).apiConfig.url || testingConnection.value\n                                                    }, _toDisplayString(testingConnection.value ? '...' : ''), 9 /* TEXT, PROPS */, _hoisted_20),\n                                                    (connectionStatus.value === 'success')\n                                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_21, \"\"))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    (connectionStatus.value === 'fail')\n                                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22, _toDisplayString(connectionError.value), 1 /* TEXT */))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ])\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_23, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).apiConfig.usePresetSampling) = $event))\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, _unref(settings).apiConfig.usePresetSampling]\n                                                ]),\n                                                _cache[59] || (_cache[59] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                            ]),\n                                            _cache[60] || (_cache[60] = _createElementVNode(\"div\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_24, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(settings).apiConfig.sendWorldInfo) = $event))\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, _unref(settings).apiConfig.sendWorldInfo]\n                                                ]),\n                                                _cache[61] || (_cache[61] = _createTextVNode(\" World Info \", -1 /* CACHED */))\n                                            ]),\n                                            _cache[62] || (_cache[62] = _createElementVNode(\"div\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                        ]),\n                                        (!_unref(settings).apiConfig.usePresetSampling)\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createElementVNode(\"div\", _hoisted_25, [\n                                                    _createElementVNode(\"div\", _hoisted_26, [\n                                                        _cache[63] || (_cache[63] = _createElementVNode(\"label\", null, \"Max Tokens\", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"number\",\n                                                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(settings).apiConfig.max_tokens) = $event)),\n                                                            min: \"1\",\n                                                            max: \"4096\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                _unref(settings).apiConfig.max_tokens,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_27, [\n                                                        _createElementVNode(\"label\", null, \"Temperature (\" + _toDisplayString(_unref(settings).apiConfig.temperature.toFixed(1)) + \")\", 1 /* TEXT */),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"range\",\n                                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(settings).apiConfig.temperature) = $event)),\n                                                            min: \"0\",\n                                                            max: \"2\",\n                                                            step: \"0.1\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                _unref(settings).apiConfig.temperature,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", {\n                                                    class: \"advanced-toggle\",\n                                                    onClick: _cache[10] || (_cache[10] = ($event) => (showAdvanced.value = !showAdvanced.value))\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_28, _toDisplayString(showAdvanced.value ? '' : ''), 1 /* TEXT */),\n                                                    _cache[64] || (_cache[64] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                                ]),\n                                                (showAdvanced.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [\n                                                        _createElementVNode(\"div\", _hoisted_30, [\n                                                            _createElementVNode(\"div\", _hoisted_31, [\n                                                                _createElementVNode(\"label\", null, \"Frequency Penalty (\" + _toDisplayString(_unref(settings).apiConfig.frequency_penalty.toFixed(1)) + \")\", 1 /* TEXT */),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    type: \"range\",\n                                                                    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(settings).apiConfig.frequency_penalty) = $event)),\n                                                                    min: \"-2\",\n                                                                    max: \"2\",\n                                                                    step: \"0.1\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [\n                                                                        _vModelText,\n                                                                        _unref(settings).apiConfig.frequency_penalty,\n                                                                        void 0,\n                                                                        { number: true }\n                                                                    ]\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_32, [\n                                                                _createElementVNode(\"label\", null, \"Presence Penalty (\" + _toDisplayString(_unref(settings).apiConfig.presence_penalty.toFixed(1)) + \")\", 1 /* TEXT */),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    type: \"range\",\n                                                                    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((_unref(settings).apiConfig.presence_penalty) = $event)),\n                                                                    min: \"-2\",\n                                                                    max: \"2\",\n                                                                    step: \"0.1\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [\n                                                                        _vModelText,\n                                                                        _unref(settings).apiConfig.presence_penalty,\n                                                                        void 0,\n                                                                        { number: true }\n                                                                    ]\n                                                                ])\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_33, [\n                                                            _createElementVNode(\"div\", _hoisted_34, [\n                                                                _createElementVNode(\"label\", null, \"Top P (\" + _toDisplayString(_unref(settings).apiConfig.top_p.toFixed(2)) + \")\", 1 /* TEXT */),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    type: \"range\",\n                                                                    \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => ((_unref(settings).apiConfig.top_p) = $event)),\n                                                                    min: \"0\",\n                                                                    max: \"1\",\n                                                                    step: \"0.01\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [\n                                                                        _vModelText,\n                                                                        _unref(settings).apiConfig.top_p,\n                                                                        void 0,\n                                                                        { number: true }\n                                                                    ]\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_35, [\n                                                                _cache[65] || (_cache[65] = _createElementVNode(\"label\", null, \"Top K\", -1 /* CACHED */)),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    type: \"number\",\n                                                                    \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((_unref(settings).apiConfig.top_k) = $event)),\n                                                                    min: \"0\",\n                                                                    max: \"500\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [\n                                                                        _vModelText,\n                                                                        _unref(settings).apiConfig.top_k,\n                                                                        void 0,\n                                                                        { number: true }\n                                                                    ]\n                                                                ])\n                                                            ])\n                                                        ])\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, activeSection.value === 'api']\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"section\", _hoisted_36, [\n                                        _cache[71] || (_cache[71] = _createElementVNode(\"h4\", null, [\n                                            _createElementVNode(\"span\", { class: \"section-index\" }, \"02\"),\n                                            _createElementVNode(\"span\", { class: \"section-label\" }, \"Live2D \"),\n                                            _createElementVNode(\"span\", { class: \"section-sub\" }, \"MODEL CONTROL\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _cache[67] || (_cache[67] = _createElementVNode(\"label\", null, \" /  URL\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_38, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"text\",\n                                                    \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event) => ((customModelUrl).value = $event)),\n                                                    placeholder: \" .model.json  .model3.json  URL\",\n                                                    onKeydown: _withKeys(loadCustomUrl, [\"enter\"])\n                                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                    [_vModelText, customModelUrl.value]\n                                                ]),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"input-btn\",\n                                                    type: \"button\",\n                                                    onClick: loadCustomUrl,\n                                                    disabled: !customModelUrl.value.trim()\n                                                }, \"  \", 8 /* PROPS */, _hoisted_39)\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_40, [\n                                            _cache[68] || (_cache[68] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_41, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(recommendedModels), (m) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: m.path,\n                                                        class: _normalizeClass([\"model-btn\", { active: _unref(settings).modelPath === m.path }]),\n                                                        type: \"button\",\n                                                        onClick: ($event) => (selectModel(m.path))\n                                                    }, _toDisplayString(m.name), 11 /* TEXT, CLASS, PROPS */, _hoisted_42));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"model-btn browse-btn\",\n                                                    type: \"button\",\n                                                    onClick: _cache[16] || (_cache[16] = ($event) => (showBrowser.value = true))\n                                                }, \"  \")\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_43, [\n                                            _createElementVNode(\"label\", null, \" (\" + _toDisplayString(_unref(settings).petScale.toFixed(2)) + \")\", 1 /* TEXT */),\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                type: \"range\",\n                                                \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((_unref(settings).petScale) = $event)),\n                                                min: \"0.1\",\n                                                max: \"3\",\n                                                step: \"0.05\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(settings).petScale,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_44, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event) => ((_unref(settings).useCdn) = $event))\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, _unref(settings).useCdn]\n                                                ]),\n                                                _cache[69] || (_cache[69] = _createTextVNode(\"  CDN jsDelivr \", -1 /* CACHED */))\n                                            ]),\n                                            _cache[70] || (_cache[70] = _createElementVNode(\"div\", { class: \"hint\" }, \" GitHub  CDN \", -1 /* CACHED */))\n                                        ])\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, activeSection.value === 'live2d']\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"section\", _hoisted_45, [\n                                        _cache[80] || (_cache[80] = _createElementVNode(\"h4\", null, [\n                                            _createElementVNode(\"span\", { class: \"section-index\" }, \"03\"),\n                                            _createElementVNode(\"span\", { class: \"section-label\" }, \"\"),\n                                            _createElementVNode(\"span\", { class: \"section-sub\" }, \"COMMENT SYSTEM\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_46, [\n                                            _cache[72] || (_cache[72] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((_unref(settings).commentStyle) = $event))\n                                            }, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(commentStyles), (style) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: style,\n                                                        value: style\n                                                    }, _toDisplayString(style), 9 /* TEXT, PROPS */, _hoisted_47));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, _unref(settings).commentStyle]\n                                            ])\n                                        ]),\n                                        (_unref(settings).commentStyle === '')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_48, [\n                                                _cache[73] || (_cache[73] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                _withDirectives(_createElementVNode(\"textarea\", {\n                                                    \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event) => ((_unref(settings).customPrompt) = $event)),\n                                                    rows: \"4\",\n                                                    placeholder: \"...\"\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelText, _unref(settings).customPrompt]\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_49, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event) => ((_unref(settings).autoTrigger) = $event))\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, _unref(settings).autoTrigger]\n                                                ]),\n                                                _cache[74] || (_cache[74] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                            ])\n                                        ]),\n                                        (_unref(settings).autoTrigger)\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createElementVNode(\"div\", _hoisted_50, [\n                                                    _cache[75] || (_cache[75] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"select\", {\n                                                        \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event) => ((_unref(settings).commentTriggerMode) = $event))\n                                                    }, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(commentTriggerModeOptions), (option) => {\n                                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                                key: option.value,\n                                                                value: option.value\n                                                            }, _toDisplayString(option.label), 9 /* TEXT, PROPS */, _hoisted_51));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ], 512 /* NEED_PATCH */), [\n                                                        [_vModelSelect, _unref(settings).commentTriggerMode]\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_52, [\n                                                    _createElementVNode(\"div\", _hoisted_53, [\n                                                        _cache[76] || (_cache[76] = _createElementVNode(\"label\", null, \" N \", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"number\",\n                                                            \"onUpdate:modelValue\": _cache[23] || (_cache[23] = ($event) => ((_unref(settings).triggerInterval) = $event)),\n                                                            min: \"1\",\n                                                            max: \"100\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                _unref(settings).triggerInterval,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_54, [\n                                                        _createElementVNode(\"label\", null, \" (\" + _toDisplayString(_unref(settings).triggerProbability) + \"%)\", 1 /* TEXT */),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"range\",\n                                                            \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event) => ((_unref(settings).triggerProbability) = $event)),\n                                                            min: \"0\",\n                                                            max: \"100\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                _unref(settings).triggerProbability,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_55, [\n                                            _cache[77] || (_cache[77] = _createElementVNode(\"label\", null, \" LLM \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                type: \"number\",\n                                                \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event) => ((_unref(settings).maxChatContext) = $event)),\n                                                min: \"1\",\n                                                max: \"50\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(settings).maxChatContext,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_56, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event) => ((_unref(settings).useTamakoTodaySpecial) = $event))\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, _unref(settings).useTamakoTodaySpecial]\n                                                ]),\n                                                _cache[78] || (_cache[78] = _createTextVNode(\"  Tamako Market \", -1 /* CACHED */))\n                                            ]),\n                                            _cache[79] || (_cache[79] = _createElementVNode(\"div\", { class: \"hint\" }, \"  Tamako Market \", -1 /* CACHED */))\n                                        ])\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, activeSection.value === 'comment']\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"section\", _hoisted_57, [\n                                        _cache[99] || (_cache[99] = _createElementVNode(\"h4\", null, [\n                                            _createElementVNode(\"span\", { class: \"section-index\" }, \"04\"),\n                                            _createElementVNode(\"span\", { class: \"section-label\" }, \"\"),\n                                            _createElementVNode(\"span\", { class: \"section-sub\" }, \"EMOTION COT\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_58, [\n                                            _createElementVNode(\"div\", _hoisted_59, [\n                                                _createElementVNode(\"div\", _hoisted_60, [\n                                                    _createElementVNode(\"label\", null, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"checkbox\",\n                                                            \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => ((_unref(settings).emotionCotEnabled) = $event))\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelCheckbox, _unref(settings).emotionCotEnabled]\n                                                        ]),\n                                                        _cache[81] || (_cache[81] = _createTextVNode(\"  COT  \", -1 /* CACHED */))\n                                                    ]),\n                                                    _cache[82] || (_cache[82] = _createElementVNode(\"div\", { class: \"hint\" }, [\n                                                        _createTextVNode(\" LLM  \"),\n                                                        _createElementVNode(\"code\", null, \"[|]: \"),\n                                                        _createTextVNode(\" /TTS  Live2D / \")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_61, \"\" + _toDisplayString(_unref(emotionTags).join('')), 1 /* TEXT */)\n                                                ]),\n                                                (_unref(settings).emotionCotEnabled)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_62, [\n                                                        _createElementVNode(\"label\", null, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                type: \"checkbox\",\n                                                                \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event) => ((_unref(settings).emotionCotStripFromText) = $event))\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [_vModelCheckbox, _unref(settings).emotionCotStripFromText]\n                                                            ]),\n                                                            _cache[83] || (_cache[83] = _createTextVNode(\" /TTS  \", -1 /* CACHED */))\n                                                        ]),\n                                                        _cache[84] || (_cache[84] = _createElementVNode(\"div\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createElementVNode(\"div\", _hoisted_63, [\n                                                    _createElementVNode(\"div\", { class: \"form-group half\" }, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"btn btn-secondary\",\n                                                            type: \"button\",\n                                                            onClick: resetEmotionConfigs\n                                                        }, \"  \")\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_64, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"btn btn-test\",\n                                                            type: \"button\",\n                                                            onClick: refreshLive2DLists,\n                                                            disabled: refreshingLive2dLists.value\n                                                        }, _toDisplayString(refreshingLive2dLists.value ? '...' : '/'), 9 /* TEXT, PROPS */, _hoisted_65)\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_66, [\n                                                    _createElementVNode(\"div\", _hoisted_67, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"btn btn-test\",\n                                                            type: \"button\",\n                                                            onClick: _cache[29] || (_cache[29] = ($event) => (autoMatchLive2DOverrides(false)))\n                                                        }, \"  \")\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_68, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"btn btn-secondary\",\n                                                            type: \"button\",\n                                                            onClick: _cache[30] || (_cache[30] = ($event) => (autoMatchLive2DOverrides(true)))\n                                                        }, \"  \")\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_69, [\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"btn btn-secondary\",\n                                                        type: \"button\",\n                                                        onClick: clearLive2DOverrides\n                                                    }, \"  Live2D  \"),\n                                                    _createElementVNode(\"div\", _hoisted_70, _toDisplayString(live2dListSummary.value), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_71, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"advanced-toggle\",\n                                                        onClick: _cache[31] || (_cache[31] = ($event) => (showEmotionAdvanced.value = !showEmotionAdvanced.value))\n                                                    }, [\n                                                        _createElementVNode(\"span\", _hoisted_72, _toDisplayString(showEmotionAdvanced.value ? '' : ''), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", null, _toDisplayString(showEmotionAdvanced.value ? '' : ''), 1 /* TEXT */)\n                                                    ]),\n                                                    _cache[85] || (_cache[85] = _createElementVNode(\"div\", { class: \"hint\" }, \"TTS \", -1 /* CACHED */))\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_73, [\n                                                    _cache[89] || (_cache[89] = _createElementVNode(\"div\", { class: \"emotion-map-head\" }, [\n                                                        _createElementVNode(\"div\", null, \"\"),\n                                                        _createElementVNode(\"div\", null, \"\"),\n                                                        _createElementVNode(\"div\", null, \"Live2D Expression\"),\n                                                        _createElementVNode(\"div\", null, \"Live2D Motion\"),\n                                                        _createElementVNode(\"div\", null, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(settings).emotionConfigs, (cfg) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: cfg.tag,\n                                                            class: \"emotion-map-row\"\n                                                        }, [\n                                                            _createElementVNode(\"div\", _hoisted_74, _toDisplayString(cfg.tag), 1 /* TEXT */),\n                                                            _cache[88] || (_cache[88] = _createElementVNode(\"div\", { class: \"emotion-map-arrow\" }, \"\", -1 /* CACHED */)),\n                                                            _withDirectives(_createElementVNode(\"select\", {\n                                                                \"onUpdate:modelValue\": ($event) => ((cfg.live2dExpression) = $event)\n                                                            }, [\n                                                                _cache[86] || (_cache[86] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                                                (cfg.live2dExpression && !live2dExpressionOptionSet.value.has(cfg.live2dExpression))\n                                                                    ? (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: 0,\n                                                                        value: cfg.live2dExpression\n                                                                    }, _toDisplayString(cfg.live2dExpression) + \" \", 9 /* TEXT, PROPS */, _hoisted_76))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(live2dExpressionOptions.value, (expr) => {\n                                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: expr,\n                                                                        value: expr\n                                                                    }, _toDisplayString(expr), 9 /* TEXT, PROPS */, _hoisted_77));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ], 8 /* PROPS */, _hoisted_75), [\n                                                                [_vModelSelect, cfg.live2dExpression]\n                                                            ]),\n                                                            _withDirectives(_createElementVNode(\"select\", {\n                                                                \"onUpdate:modelValue\": ($event) => ((cfg.live2dMotion.group) = $event),\n                                                                disabled: !cfg.live2dMotion.enabled\n                                                            }, [\n                                                                _cache[87] || (_cache[87] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                                                (cfg.live2dMotion.group && !live2dMotionOptionSet.value.has(cfg.live2dMotion.group))\n                                                                    ? (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: 0,\n                                                                        value: cfg.live2dMotion.group\n                                                                    }, _toDisplayString(cfg.live2dMotion.group) + \" \", 9 /* TEXT, PROPS */, _hoisted_79))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(live2dMotionSelectOptions.value, (opt) => {\n                                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: opt.key,\n                                                                        value: opt.value\n                                                                    }, _toDisplayString(opt.label), 9 /* TEXT, PROPS */, _hoisted_80));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ], 8 /* PROPS */, _hoisted_78), [\n                                                                [_vModelSelect, cfg.live2dMotion.group]\n                                                            ]),\n                                                            _createElementVNode(\"button\", {\n                                                                class: \"btn btn-secondary emotion-map-preview-btn\",\n                                                                type: \"button\",\n                                                                onClick: ($event) => (previewEmotion(cfg.tag))\n                                                            }, \"  \", 8 /* PROPS */, _hoisted_81)\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]),\n                                                _cache[95] || (_cache[95] = _createElementVNode(\"div\", { class: \"hint\" }, \"  Expressions Motions \", -1 /* CACHED */)),\n                                                (showEmotionAdvanced.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_82, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(settings).emotionConfigs, (cfg) => {\n                                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                                key: `advanced_${cfg.tag}`,\n                                                                class: \"emotion-advanced-item\"\n                                                            }, [\n                                                                _createElementVNode(\"div\", _hoisted_83, _toDisplayString(cfg.tag) + \"  \", 1 /* TEXT */),\n                                                                _createElementVNode(\"div\", _hoisted_84, [\n                                                                    _createElementVNode(\"div\", _hoisted_85, [\n                                                                        _cache[90] || (_cache[90] = _createElementVNode(\"label\", null, \"raw tag  \", -1 /* CACHED */)),\n                                                                        _createElementVNode(\"input\", {\n                                                                            type: \"text\",\n                                                                            value: (cfg.aliases || []).join(', '),\n                                                                            onBlur: ($event) => (onAliasesBlur(cfg, $event)),\n                                                                            placeholder: \", smile\"\n                                                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_86),\n                                                                        _cache[91] || (_cache[91] = _createElementVNode(\"div\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_87, [\n                                                                        _cache[92] || (_cache[92] = _createElementVNode(\"label\", null, \"TTS \", -1 /* CACHED */)),\n                                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                                            type: \"text\",\n                                                                            \"onUpdate:modelValue\": ($event) => ((cfg.ttsContext) = $event),\n                                                                            placeholder: \"\"\n                                                                        }, null, 8 /* PROPS */, _hoisted_88), [\n                                                                            [_vModelText, cfg.ttsContext]\n                                                                        ]),\n                                                                        _cache[93] || (_cache[93] = _createElementVNode(\"div\", { class: \"hint\" }, \" |  contextTexts  TTS\", -1 /* CACHED */))\n                                                                    ])\n                                                                ]),\n                                                                _createElementVNode(\"div\", _hoisted_89, [\n                                                                    _createElementVNode(\"label\", null, [\n                                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                                            type: \"checkbox\",\n                                                                            \"onUpdate:modelValue\": ($event) => ((cfg.live2dMotion.enabled) = $event)\n                                                                        }, null, 8 /* PROPS */, _hoisted_90), [\n                                                                            [_vModelCheckbox, cfg.live2dMotion.enabled]\n                                                                        ]),\n                                                                        _cache[94] || (_cache[94] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                                                    ])\n                                                                ])\n                                                            ]));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_91, [\n                                                _createElementVNode(\"div\", _hoisted_92, [\n                                                    _cache[96] || (_cache[96] = _createElementVNode(\"span\", { class: \"emotion-preview-title\" }, \"\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_93, \": \" + _toDisplayString(previewTag.value), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", {\n                                                    class: \"emotion-preview-canvas\",\n                                                    ref_key: \"live2dPreviewMountEl\",\n                                                    ref: live2dPreviewMountEl\n                                                }, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"emotion-preview-interact\",\n                                                        ref_key: \"live2dPreviewInteractEl\",\n                                                        ref: live2dPreviewInteractEl\n                                                    }, null, 512 /* NEED_PATCH */),\n                                                    (!_unref(Live2DManager).model)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_94, \"\"))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ], 512 /* NEED_PATCH */),\n                                                _createElementVNode(\"div\", _hoisted_95, [\n                                                    _createElementVNode(\"div\", _hoisted_96, [\n                                                        _cache[97] || (_cache[97] = _createElementVNode(\"span\", { class: \"zoom-label\" }, \"\", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            class: \"zoom-slider\",\n                                                            type: \"range\",\n                                                            min: \"0.5\",\n                                                            max: \"4\",\n                                                            step: \"0.05\",\n                                                            \"onUpdate:modelValue\": _cache[32] || (_cache[32] = ($event) => ((previewZoomFactor).value = $event)),\n                                                            onInput: applyPreviewViewport\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                previewZoomFactor.value,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ]),\n                                                        _createElementVNode(\"span\", _hoisted_97, _toDisplayString(Math.round(previewZoomFactor.value * 100)) + \"%\", 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", { class: \"emotion-preview-actions\" }, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"btn btn-secondary\",\n                                                            type: \"button\",\n                                                            onClick: resetPreviewViewport\n                                                        }, \"  \"),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"btn btn-secondary\",\n                                                            type: \"button\",\n                                                            onClick: replayPreview\n                                                        }, \"  \")\n                                                    ]),\n                                                    _cache[98] || (_cache[98] = _createElementVNode(\"div\", { class: \"hint\" }, \"\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_98, _toDisplayString(previewStatus.value), 1 /* TEXT */)\n                                                ])\n                                            ])\n                                        ])\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, activeSection.value === 'expression']\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"section\", _hoisted_99, [\n                                        _cache[120] || (_cache[120] = _createElementVNode(\"h4\", null, [\n                                            _createElementVNode(\"span\", { class: \"section-index\" }, \"05\"),\n                                            _createElementVNode(\"span\", { class: \"section-label\" }, \"TTS \"),\n                                            _createElementVNode(\"span\", { class: \"section-sub\" }, \"VOICE CONTROL\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_100, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[33] || (_cache[33] = ($event) => ((ttsEnabled).value = $event)),\n                                                    onChange: onToggleTtsEnabled\n                                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                    [_vModelCheckbox, ttsEnabled.value]\n                                                ]),\n                                                _cache[100] || (_cache[100] = _createTextVNode(\"  TTS  \", -1 /* CACHED */))\n                                            ]),\n                                            _cache[101] || (_cache[101] = _createElementVNode(\"div\", { class: \"hint\" }, \"/\", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_101, [\n                                            _cache[102] || (_cache[102] = _createElementVNode(\"label\", null, \"TTS \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((_unref(settings).ttsProvider) = $event))\n                                            }, [\n                                                _createElementVNode(\"option\", {\n                                                    value: _unref(TTS_PROVIDER).LITTLEWHITEBOX\n                                                }, \"X\", 8 /* PROPS */, _hoisted_102),\n                                                _createElementVNode(\"option\", {\n                                                    value: _unref(TTS_PROVIDER).GPT_SOVITS_V2\n                                                }, \"GPT-SoVITS v2ProPlus\", 8 /* PROPS */, _hoisted_103)\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, _unref(settings).ttsProvider]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_104, [\n                                            _createElementVNode(\"label\", null, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    \"onUpdate:modelValue\": _cache[35] || (_cache[35] = ($event) => ((_unref(settings).ttsAutoPlay) = $event))\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, _unref(settings).ttsAutoPlay]\n                                                ]),\n                                                _cache[103] || (_cache[103] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_105, [\n                                            _cache[105] || (_cache[105] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_106, [\n                                                _withDirectives(_createElementVNode(\"select\", {\n                                                    \"onUpdate:modelValue\": _cache[36] || (_cache[36] = ($event) => ((_unref(settings).ttsDefaultSpeaker) = $event))\n                                                }, [\n                                                    _cache[104] || (_cache[104] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ttsVoiceList.value, (v) => {\n                                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                                            key: v.name,\n                                                            value: v.name\n                                                        }, _toDisplayString(v.name) + _toDisplayString(v.desc ? ' (' + v.desc + ')' : ''), 9 /* TEXT, PROPS */, _hoisted_107));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ], 512 /* NEED_PATCH */), [\n                                                    [_vModelSelect, _unref(settings).ttsDefaultSpeaker]\n                                                ]),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"input-btn\",\n                                                    type: \"button\",\n                                                    onClick: refreshTtsVoices,\n                                                    disabled: refreshingTtsVoices.value\n                                                }, _toDisplayString(refreshingTtsVoices.value ? '...' : ''), 9 /* TEXT, PROPS */, _hoisted_108)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_109, _toDisplayString(ttsVoiceHint.value), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", {\n                                            class: \"advanced-toggle\",\n                                            onClick: _cache[37] || (_cache[37] = ($event) => (showLipSyncAdvanced.value = !showLipSyncAdvanced.value))\n                                        }, [\n                                            _createElementVNode(\"span\", _hoisted_110, _toDisplayString(showLipSyncAdvanced.value ? '' : ''), 1 /* TEXT */),\n                                            _cache[106] || (_cache[106] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                        ]),\n                                        (showLipSyncAdvanced.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_111, [\n                                                _createElementVNode(\"div\", _hoisted_112, [\n                                                    _createElementVNode(\"label\", null, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"checkbox\",\n                                                            \"onUpdate:modelValue\": _cache[38] || (_cache[38] = ($event) => ((_unref(settings).lipSyncManualParamsEnabled) = $event))\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelCheckbox, _unref(settings).lipSyncManualParamsEnabled]\n                                                        ]),\n                                                        _cache[107] || (_cache[107] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                                    ]),\n                                                    _cache[108] || (_cache[108] = _createElementVNode(\"div\", { class: \"hint\" }, \" Param58 / Param61\", -1 /* CACHED */))\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_113, [\n                                                    _cache[109] || (_cache[109] = _createElementVNode(\"label\", null, \" ID\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                                        \"onUpdate:modelValue\": _cache[39] || (_cache[39] = ($event) => ((lipSyncManualParamsText).value = $event)),\n                                                        rows: \"3\",\n                                                        placeholder: \"ParamMouthOpenY\\nParam58\",\n                                                        onBlur: applyLipSyncManualParams\n                                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                        [_vModelText, lipSyncManualParamsText.value]\n                                                    ]),\n                                                    _cache[110] || (_cache[110] = _createElementVNode(\"div\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        (_unref(settings).ttsProvider === _unref(TTS_PROVIDER).GPT_SOVITS_V2)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_114, [\n                                                _createElementVNode(\"div\", _hoisted_115, [\n                                                    _cache[111] || (_cache[111] = _createElementVNode(\"label\", null, \"GPT-SoVITSapi_v2.pyAPI \", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        type: \"text\",\n                                                        \"onUpdate:modelValue\": _cache[40] || (_cache[40] = ($event) => ((_unref(settings).gptSoVits.apiUrl) = $event)),\n                                                        placeholder: \"http://127.0.0.1:9880\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, _unref(settings).gptSoVits.apiUrl]\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_116, [\n                                                    _createElementVNode(\"label\", null, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"checkbox\",\n                                                            \"onUpdate:modelValue\": _cache[41] || (_cache[41] = ($event) => ((_unref(settings).gptSoVits.useCorsProxy) = $event))\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelCheckbox, _unref(settings).gptSoVits.useCorsProxy]\n                                                        ]),\n                                                        _cache[112] || (_cache[112] = _createTextVNode(\" /proxy \", -1 /* CACHED */))\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_117, [\n                                                    _createElementVNode(\"div\", _hoisted_118, [\n                                                        _cache[113] || (_cache[113] = _createElementVNode(\"label\", null, \"text_lang\", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"text\",\n                                                            \"onUpdate:modelValue\": _cache[42] || (_cache[42] = ($event) => ((_unref(settings).gptSoVits.textLang) = $event)),\n                                                            placeholder: \"auto/zh/en/ja...\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelText, _unref(settings).gptSoVits.textLang]\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_119, [\n                                                        _cache[114] || (_cache[114] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            type: \"text\",\n                                                            \"onUpdate:modelValue\": _cache[43] || (_cache[43] = ($event) => ((_unref(settings).gptSoVits.textSplitMethod) = $event)),\n                                                            placeholder: \"cut5\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelText, _unref(settings).gptSoVits.textSplitMethod]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_120, [\n                                                    _createElementVNode(\"div\", _hoisted_121, [\n                                                        _cache[116] || (_cache[116] = _createElementVNode(\"label\", null, \"media_type\", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"select\", {\n                                                            \"onUpdate:modelValue\": _cache[44] || (_cache[44] = ($event) => ((_unref(settings).gptSoVits.mediaType) = $event))\n                                                        }, [...(_cache[115] || (_cache[115] = [\n                                                                _createElementVNode(\"option\", { value: \"wav\" }, \"wav\", -1 /* CACHED */),\n                                                                _createElementVNode(\"option\", { value: \"ogg\" }, \"ogg\", -1 /* CACHED */),\n                                                                _createElementVNode(\"option\", { value: \"raw\" }, \"raw\", -1 /* CACHED */)\n                                                            ]))], 512 /* NEED_PATCH */), [\n                                                            [_vModelSelect, _unref(settings).gptSoVits.mediaType]\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_122, [\n                                                        _createElementVNode(\"label\", null, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                type: \"checkbox\",\n                                                                \"onUpdate:modelValue\": _cache[45] || (_cache[45] = ($event) => ((_unref(settings).gptSoVits.streamingMode) = $event))\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [_vModelCheckbox, _unref(settings).gptSoVits.streamingMode]\n                                                            ]),\n                                                            _cache[117] || (_cache[117] = _createTextVNode(\" streaming_mode \", -1 /* CACHED */))\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_123, [\n                                                    _cache[118] || (_cache[118] = _createElementVNode(\"label\", null, \"speed_factor\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        type: \"number\",\n                                                        \"onUpdate:modelValue\": _cache[46] || (_cache[46] = ($event) => ((_unref(settings).gptSoVits.speedFactor) = $event)),\n                                                        min: \"0.5\",\n                                                        max: \"2\",\n                                                        step: \"0.05\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            _unref(settings).gptSoVits.speedFactor,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_124, [\n                                                    _cache[119] || (_cache[119] = _createElementVNode(\"label\", null, \"JSON\", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                                        \"onUpdate:modelValue\": _cache[47] || (_cache[47] = ($event) => ((gptSoVitsVoicesJson).value = $event)),\n                                                        rows: \"6\",\n                                                        placeholder: \"[{\\\"name\\\":\\\"\\\",\\\"refAudioPath\\\":\\\"wavs/xxx.wav\\\",\\\"promptText\\\":\\\"\\\",\\\"promptLang\\\":\\\"zh\\\"}]\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, gptSoVitsVoicesJson.value]\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_125, [\n                                                        _createElementVNode(\"div\", { class: \"form-group half\" }, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: \"btn btn-secondary\",\n                                                                type: \"button\",\n                                                                onClick: saveGptSoVitsVoices\n                                                            }, \"  \")\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_126, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: \"btn btn-test\",\n                                                                type: \"button\",\n                                                                onClick: testTts,\n                                                                disabled: !ttsEnabled.value\n                                                            }, \"  \", 8 /* PROPS */, _hoisted_127)\n                                                        ])\n                                                    ]),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        type: \"text\",\n                                                        \"onUpdate:modelValue\": _cache[48] || (_cache[48] = ($event) => ((ttsTestText).value = $event)),\n                                                        placeholder: \"\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, ttsTestText.value]\n                                                    ])\n                                                ])\n                                            ]))\n                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_128, [\n                                                _createElementVNode(\"button\", {\n                                                    class: \"btn btn-test\",\n                                                    type: \"button\",\n                                                    onClick: testTts,\n                                                    disabled: !ttsEnabled.value\n                                                }, \"  \", 8 /* PROPS */, _hoisted_129)\n                                            ])),\n                                        _createElementVNode(\"div\", { class: \"form-group\" }, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"btn btn-secondary\",\n                                                type: \"button\",\n                                                onClick: stopTts\n                                            }, \"  \")\n                                        ])\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, activeSection.value === 'tts']\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"section\", _hoisted_130, [...(_cache[121] || (_cache[121] = [\n                                            _createStaticVNode(\"<h4 data-v-2d2cd0e0><span class=\\\"section-index\\\" data-v-2d2cd0e0>06</span><span class=\\\"section-label\\\" data-v-2d2cd0e0></span><span class=\\\"section-sub\\\" data-v-2d2cd0e0>ABOUT &amp; LICENSE</span></h4><div class=\\\"about-card\\\" data-v-2d2cd0e0><div class=\\\"about-title\\\" data-v-2d2cd0e0></div><a class=\\\"about-link\\\" href=\\\"https://discord.com/channels/1134557553011998840/1472242483806077061\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" data-v-2d2cd0e0> https://discord.com/channels/1134557553011998840/1472242483806077061 </a></div><div class=\\\"about-card\\\" data-v-2d2cd0e0><div class=\\\"about-title\\\" data-v-2d2cd0e0></div><ul class=\\\"about-list\\\" data-v-2d2cd0e0><li data-v-2d2cd0e0>  Live2D  </li><li data-v-2d2cd0e0> Live2D  </li><li data-v-2d2cd0e0>  <a class=\\\"about-link\\\" href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" data-v-2d2cd0e0> CC BY-NC-SA 4.0 </a> -- </li><li data-v-2d2cd0e0>  </li></ul></div>\", 3)\n                                        ]))], 512 /* NEED_PATCH */), [\n                                        [_vShow, activeSection.value === 'about']\n                                    ])\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", { class: \"panel-footer\" }, [\n                                _createElementVNode(\"button\", {\n                                    class: \"btn btn-secondary\",\n                                    type: \"button\",\n                                    onClick: resetSettings\n                                }, \"\"),\n                                _createElementVNode(\"button\", {\n                                    class: \"btn btn-primary\",\n                                    type: \"button\",\n                                    onClick: close\n                                }, \"\")\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                (showBrowser.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: \"browser-overlay dp-browser-overlay\",\n                        style: overlayFallbackStyle,\n                        onClick: _cache[51] || (_cache[51] = _withModifiers(($event) => (showBrowser.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"browser-dialog dp-browser-dialog\",\n                            style: panelFallbackStyle\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_131, [\n                                _cache[122] || (_cache[122] = _createElementVNode(\"h3\", null, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"close-btn\",\n                                    type: \"button\",\n                                    onClick: _cache[49] || (_cache[49] = ($event) => (showBrowser.value = false))\n                                }, \"\")\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_132, [\n                                _createVNode(ModelBrowser, {\n                                    \"use-cdn\": _unref(settings).useCdn,\n                                    onCancel: _cache[50] || (_cache[50] = ($event) => (showBrowser.value = false)),\n                                    onLoadModel: onBrowserLoad\n                                }, null, 8 /* PROPS */, [\"use-cdn\"])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsPanel.vue?vue&type=style&index=0&id=2d2cd0e0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2d2cd0e0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = { class: \"browser-dialog\" };\nconst _hoisted_2 = { class: \"browser-dialog-header\" };\nconst _hoisted_3 = { class: \"browser-dialog-body\" };\nimport { storeToRefs } from 'pinia';\nimport { onMounted, onUnmounted, ref, watch } from 'vue';\nimport { getTTSEnabled } from '../audio/tts-config';\nimport { TTSManager } from '../audio/tts-manager';\nimport { Commentator } from '../chat/commentator';\nimport { parseEmotionCotText } from '../chat/emotion-cot';\nimport { ChatMonitor } from '../chat/monitor';\nimport { getEmotionConfigByTag } from '../core/emotion';\nimport { useSettingsStore } from '../core/settings';\nimport { useUiStore } from '../core/ui';\nimport { Live2DManager } from '../live2d/manager';\nimport { matchLive2DExpression, matchLive2DMotion } from '../live2d/expression-motion';\nimport { LipSyncManager, setLipSyncRefs } from '../live2d/lip-sync';\nimport { Live2DStage } from '../live2d/stage';\nimport { error as logError, log } from '../utils/dom';\nimport ChatBubble from './ChatBubble.vue';\nimport FunctionMenu from './FunctionMenu.vue';\nimport ModelBrowser from './ModelBrowser.vue';\nimport SettingsPanel from './SettingsPanel.vue';\nconst BASE_STAGE_WIDTH = 280;\nconst BASE_STAGE_HEIGHT = 360;\nconst OPEN_SETTINGS_FN_KEY = '__desktopPetOpenSettings_v2';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PetContainer',\n    setup(__props) {\n        const store = useSettingsStore();\n        const { settings } = storeToRefs(store);\n        const uiStore = useUiStore();\n        const { showSettings } = storeToRefs(uiStore);\n        const bubbleText = ref('');\n        const bubbleDone = ref(true);\n        let globalOpenSettingsFn = null;\n        let modelLoadTaskId = 0;\n        let modelLoadingHideTimer = null;\n        let statusCheckTimer = null;\n        let viewportResizeSyncTimer = null;\n        let boundWindowResizeHandler = null;\n        let boundVisualViewportResizeHandler = null;\n        const showMenu = ref(false);\n        const menuAnchor = ref({ x: 0, y: 0 });\n        const menuPlacement = ref('left');\n        const showModelBrowser = ref(false);\n        function getTopWindow() {\n            try {\n                return window.parent ?? window;\n            }\n            catch {\n                return window;\n            }\n        }\n        function openSettingsPanel() {\n            uiStore.openSettings();\n            log('');\n        }\n        function getCurrentCharacterId() {\n            try {\n                const ctx = SillyTavern?.getContext?.();\n                if (ctx?.characterId !== undefined && ctx?.characterId !== null) {\n                    return String(ctx.characterId);\n                }\n            }\n            catch {\n                // ignore\n            }\n            return 'default';\n        }\n        function applyEmotionToLive2D(tag) {\n            try {\n                const model = Live2DManager.model;\n                if (!model)\n                    return false;\n                let applied = false;\n                const cfg = getEmotionConfigByTag(tag, settings.value.emotionConfigs);\n                const expression = matchLive2DExpression(model, tag, cfg?.live2dExpression);\n                if (expression) {\n                    Live2DManager.playExpression(expression);\n                    applied = true;\n                }\n                const motion = matchLive2DMotion(model, tag, cfg?.live2dMotion);\n                if (motion) {\n                    Live2DManager.playMotion(motion.group, motion.index);\n                    applied = true;\n                }\n                return applied;\n            }\n            catch (e) {\n                logError('', e);\n                return false;\n            }\n        }\n        watch(showSettings, (visible) => {\n            log(visible ? '' : '');\n        });\n        function registerGlobalOpenSettings() {\n            try {\n                const top = window.parent ?? window;\n                const fn = () => {\n                    uiStore.openSettings();\n                    log('');\n                };\n                top[OPEN_SETTINGS_FN_KEY] = fn;\n                globalOpenSettingsFn = fn;\n            }\n            catch (e) {\n                notifyInitError('', e);\n            }\n        }\n        function unregisterGlobalOpenSettings() {\n            try {\n                const top = window.parent ?? window;\n                if (globalOpenSettingsFn && top[OPEN_SETTINGS_FN_KEY] === globalOpenSettingsFn) {\n                    delete top[OPEN_SETTINGS_FN_KEY];\n                }\n            }\n            catch {\n                // ignore\n            }\n            finally {\n                globalOpenSettingsFn = null;\n            }\n        }\n        registerGlobalOpenSettings();\n        function openFunctionMenu(e) {\n            try {\n                if (navigator.vibrate) {\n                    navigator.vibrate(50);\n                }\n            }\n            catch {\n                // ignore\n            }\n            const top = getTopWindow();\n            let placement = 'right';\n            let x = e.clientX;\n            let y = e.clientY;\n            try {\n                const stageEl = top.document.getElementById('desktop-pet-stage');\n                const rect = stageEl?.getBoundingClientRect?.();\n                const vw = top.innerWidth || top.document.documentElement.clientWidth || 0;\n                if (rect && vw > 0) {\n                    placement = rect.left > vw / 2 ? 'left' : 'right';\n                    x = placement === 'left' ? rect.left - 10 : rect.right + 10;\n                    y = rect.top + rect.height * 0.5;\n                }\n                else if (vw > 0) {\n                    placement = e.clientX > vw / 2 ? 'left' : 'right';\n                }\n            }\n            catch {\n                // ignore\n            }\n            menuPlacement.value = placement;\n            menuAnchor.value = { x, y };\n            showMenu.value = true;\n        }\n        function toggleMotionLoop() {\n            const next = !settings.value.autoMotionLoop;\n            settings.value.autoMotionLoop = next;\n            Live2DManager.setAutoMotionLoopEnabled(next);\n        }\n        function cyclePersona() {\n            const personas = ['', '', '', ''];\n            const current = settings.value.commentStyle;\n            const idx = personas.indexOf(current);\n            const next = personas[(idx >= 0 ? idx + 1 : 0) % personas.length];\n            settings.value.commentStyle = next;\n            try {\n                toastr.info(`${next}`);\n            }\n            catch {\n                // ignore\n            }\n        }\n        function openModelBrowser() {\n            showMenu.value = false;\n            showModelBrowser.value = true;\n        }\n        function onModelBrowserLoad(url) {\n            settings.value.modelPath = url;\n            showModelBrowser.value = false;\n            void onModelChange(url);\n        }\n        function onManualChat(message) {\n            void Commentator.chat(message);\n        }\n        function closePet() {\n            showMenu.value = false;\n            showModelBrowser.value = false;\n            uiStore.closeSettings();\n            onBubbleHidden();\n            ChatMonitor.destroy();\n            Commentator.destroy();\n            Live2DManager.destroyModel();\n            Live2DStage.destroy();\n            try {\n                toastr.info('');\n            }\n            catch {\n                // ignore\n            }\n        }\n        function getStageSize(scale) {\n            const safeScale = Math.max(0.1, Math.min(3, scale || 1));\n            return {\n                width: Math.max(1, Math.round(BASE_STAGE_WIDTH * safeScale)),\n                height: Math.max(1, Math.round(BASE_STAGE_HEIGHT * safeScale)),\n            };\n        }\n        function clearModelLoadingHideTimer() {\n            if (modelLoadingHideTimer === null)\n                return;\n            window.clearTimeout(modelLoadingHideTimer);\n            modelLoadingHideTimer = null;\n        }\n        function clearStatusCheckTimer() {\n            if (statusCheckTimer === null)\n                return;\n            window.clearTimeout(statusCheckTimer);\n            statusCheckTimer = null;\n        }\n        function clearViewportResizeSyncTimer() {\n            if (viewportResizeSyncTimer === null)\n                return;\n            window.clearTimeout(viewportResizeSyncTimer);\n            viewportResizeSyncTimer = null;\n        }\n        function syncStageAfterViewportResize(reason) {\n            if (Live2DStage.isPreviewMounted())\n                return;\n            const stageSize = getStageSize(settings.value.petScale);\n            const recoverOnce = (label) => {\n                Live2DStage.resizeFloating(stageSize.width, stageSize.height);\n                const top = getTopWindow();\n                const stageEl = top.document.getElementById('desktop-pet-stage');\n                if (stageEl) {\n                    stageEl.style.display = 'block';\n                    stageEl.style.visibility = 'visible';\n                    stageEl.style.opacity = '1';\n                    stageEl.style.zIndex = '10000';\n                }\n                const stage = Live2DStage.getStage();\n                const hasModelOnStage = !!stage && stage.children.length > 0;\n                if (hasModelOnStage) {\n                    Live2DManager.updateScale(stageSize.width, stageSize.height, 1);\n                    log(`Viewport resize recovery synced model (${label})`);\n                    return;\n                }\n                Live2DManager.mountToStage(stageSize.width, stageSize.height, 1);\n                log(`Viewport resize recovery remounted model (${label})`);\n            };\n            recoverOnce(`${reason}-pass1`);\n            window.setTimeout(() => {\n                if (Live2DStage.isPreviewMounted())\n                    return;\n                recoverOnce(`${reason}-pass2`);\n            }, 220);\n            scheduleStatusCheck(`${reason}-recover`);\n        }\n        function scheduleViewportResizeSync(reason) {\n            clearViewportResizeSyncTimer();\n            viewportResizeSyncTimer = window.setTimeout(() => {\n                viewportResizeSyncTimer = null;\n                syncStageAfterViewportResize(reason);\n            }, 160);\n        }\n        function bindViewportResizeRecovery() {\n            const top = getTopWindow();\n            boundWindowResizeHandler = () => {\n                scheduleViewportResizeSync('window-resize');\n            };\n            try {\n                top.addEventListener('resize', boundWindowResizeHandler, { passive: true });\n            }\n            catch (e) {\n                logError('Failed to bind window.resize listener', e);\n                boundWindowResizeHandler = null;\n            }\n            const viewport = top.visualViewport;\n            if (!viewport)\n                return;\n            boundVisualViewportResizeHandler = () => {\n                scheduleViewportResizeSync('visual-viewport-resize');\n            };\n            try {\n                viewport.addEventListener('resize', boundVisualViewportResizeHandler, { passive: true });\n            }\n            catch (e) {\n                logError('Failed to bind visualViewport.resize listener', e);\n                boundVisualViewportResizeHandler = null;\n            }\n        }\n        function unbindViewportResizeRecovery() {\n            const top = getTopWindow();\n            if (boundWindowResizeHandler) {\n                try {\n                    top.removeEventListener('resize', boundWindowResizeHandler);\n                }\n                catch {\n                    // ignore\n                }\n                boundWindowResizeHandler = null;\n            }\n            const viewport = top.visualViewport;\n            if (viewport && boundVisualViewportResizeHandler) {\n                try {\n                    viewport.removeEventListener('resize', boundVisualViewportResizeHandler);\n                }\n                catch {\n                    // ignore\n                }\n                boundVisualViewportResizeHandler = null;\n            }\n        }\n        function renderModelLoadProgress(progress) {\n            const percent = Math.max(0, Math.min(100, Math.round(progress.percent)));\n            Live2DStage.showLoadingProgress(percent, progress.message);\n        }\n        function notifyInitError(message, err) {\n            logError(message, err);\n            try {\n                toastr.error(message);\n            }\n            catch {\n                // ignore\n            }\n        }\n        async function loadModelWithProgress(path) {\n            const taskId = ++modelLoadTaskId;\n            clearModelLoadingHideTimer();\n            renderModelLoadProgress({ percent: 0, message: '' });\n            const loaded = await Live2DManager.loadModel(path, (progress) => {\n                if (taskId !== modelLoadTaskId)\n                    return;\n                renderModelLoadProgress(progress);\n            });\n            if (taskId !== modelLoadTaskId) {\n                return loaded;\n            }\n            renderModelLoadProgress({\n                percent: 100,\n                message: loaded ? '' : '',\n            });\n            modelLoadingHideTimer = window.setTimeout(() => {\n                if (taskId !== modelLoadTaskId)\n                    return;\n                Live2DStage.hideLoadingProgress();\n                modelLoadingHideTimer = null;\n            }, loaded ? 400 : 15000);\n            return loaded;\n        }\n        function scheduleStatusCheck(reason) {\n            clearStatusCheckTimer();\n            statusCheckTimer = window.setTimeout(() => {\n                try {\n                    const top = window.parent ?? window;\n                    const stageEl = top.document.getElementById('desktop-pet-stage');\n                    const rect = stageEl?.getBoundingClientRect?.();\n                    const rectSummary = rect\n                        ? `${Math.round(rect.left)},${Math.round(rect.top)} ${Math.round(rect.width)}x${Math.round(rect.height)}`\n                        : 'none';\n                    const pixiVersion = String(top.PIXI?.VERSION || '').trim() || 'none';\n                    const hasLive2d = !!top.PIXI?.live2d?.Live2DModel;\n                    const hasModel = !!Live2DManager.model;\n                    const stageChildren = (Live2DStage.getStage()?.children?.length ?? 0);\n                    const stageVisible = !!rect &&\n                        rect.width > 10 &&\n                        rect.height > 10 &&\n                        rect.bottom > 0 &&\n                        rect.right > 0 &&\n                        rect.top < (top.innerHeight || 0) &&\n                        rect.left < (top.innerWidth || 0);\n                    if (stageVisible && hasLive2d && hasModel && stageChildren > 0) {\n                        statusCheckTimer = null;\n                        return;\n                    }\n                    if (stageEl) {\n                        const prevOutline = stageEl.style.outline;\n                        const prevBackground = stageEl.style.background;\n                        const prevZIndex = stageEl.style.zIndex;\n                        stageEl.style.outline = '2px dashed rgba(245, 158, 11, 0.95)';\n                        stageEl.style.background = 'rgba(245, 158, 11, 0.08)';\n                        stageEl.style.zIndex = '2147483647';\n                        window.setTimeout(() => {\n                            if (!stageEl?.ownerDocument?.documentElement?.contains(stageEl))\n                                return;\n                            stageEl.style.outline = prevOutline;\n                            stageEl.style.background = prevBackground;\n                            stageEl.style.zIndex = prevZIndex;\n                        }, 10000);\n                    }\n                    const message = `(${reason}) ` +\n                        `stage=${!!stageEl} rect=${rectSummary} visible=${stageVisible} ` +\n                        `pixi=${pixiVersion} live2d=${hasLive2d} model=${hasModel} children=${stageChildren}`;\n                    try {\n                        toastr.warning(message);\n                    }\n                    catch {\n                        // ignore\n                    }\n                }\n                catch (e) {\n                    notifyInitError('', e);\n                }\n                finally {\n                    statusCheckTimer = null;\n                }\n            }, 2500);\n        }\n        async function initPet() {\n            try {\n                log('');\n                const s = settings.value;\n                try {\n                    setLipSyncRefs({\n                        getProxiedAudioUrl: (url) => TTSManager._getProxiedAudioUrl(url),\n                    });\n                    TTSManager.init();\n                }\n                catch (e) {\n                    logError('TTS ', e);\n                }\n                try {\n                    if (typeof appendInexistentScriptButtons === 'function') {\n                        appendInexistentScriptButtons([{ name: '', visible: true }]);\n                    }\n                    if (typeof eventOn === 'function' && typeof getButtonEvent === 'function') {\n                        eventOn(getButtonEvent(''), () => {\n                            openSettingsPanel();\n                        });\n                    }\n                }\n                catch (e) {\n                    notifyInitError('', e);\n                }\n                Commentator.setCallback((text, isDone) => {\n                    const parsed = parseEmotionCotText(text, {\n                        enabled: !!settings.value.emotionCotEnabled,\n                        stripFromText: settings.value.emotionCotStripFromText !== false,\n                        configs: settings.value.emotionConfigs,\n                    });\n                    bubbleText.value = parsed.cleanText;\n                    bubbleDone.value = isDone;\n                    if (!isDone)\n                        return;\n                    const finalText = String(parsed.cleanText || '').trim();\n                    if (!finalText)\n                        return;\n                    if (parsed.normalizedTag) {\n                        const applied = applyEmotionToLive2D(parsed.normalizedTag);\n                        if (!applied) {\n                            Live2DManager.playRandomAnimation();\n                        }\n                    }\n                    else {\n                        Live2DManager.playRandomAnimation();\n                    }\n                    const ttsEnabled = getTTSEnabled();\n                    const autoPlay = !!settings.value.ttsAutoPlay;\n                    const tagLabel = parsed.normalizedTag || '(none)';\n                    log(`TTS: enabled=${ttsEnabled}, autoPlay=${autoPlay}, tag=${tagLabel}, textLen=${finalText.length}`);\n                    if (!ttsEnabled)\n                        return;\n                    if (!autoPlay)\n                        return;\n                    const speaker = getCurrentCharacterId();\n                    const voiceName = String(settings.value.ttsDefaultSpeaker || '').trim();\n                    let context = String(parsed.context || '').trim();\n                    if (!context && parsed.normalizedTag) {\n                        const cfg = getEmotionConfigByTag(parsed.normalizedTag, settings.value.emotionConfigs);\n                        context = String(cfg?.ttsContext || '').trim();\n                    }\n                    log(`: speaker=${speaker}, voice=${voiceName || ''}, context=${context || ''}`);\n                    void (async () => {\n                        try {\n                            TTSManager.stop();\n                            const ttsOverrides = {};\n                            if (voiceName)\n                                ttsOverrides.speaker = voiceName;\n                            if (context)\n                                ttsOverrides.context = context;\n                            await TTSManager.speak({\n                                type: 'dialogue',\n                                speaker,\n                                text: finalText,\n                                tts: Object.keys(ttsOverrides).length > 0 ? ttsOverrides : undefined,\n                            }, `desktop_pet_comment_${Date.now()}`);\n                        }\n                        catch (e) {\n                            logError('', e);\n                        }\n                    })();\n                });\n                const ready = await Live2DManager.init();\n                if (!ready) {\n                    notifyInitError('Live2D SDK  CDN ');\n                    return;\n                }\n                log('Live2D SDK ');\n                Live2DManager.setAutoMotionLoopEnabled(s.autoMotionLoop);\n                const stageSize = getStageSize(s.petScale);\n                const created = Live2DStage.create({\n                    width: stageSize.width,\n                    height: stageSize.height,\n                    position: { x: s.petPosition.x, y: s.petPosition.y },\n                    scale: s.petScale,\n                    onPositionChange: (x, y) => {\n                        settings.value.petPosition = { x, y };\n                    },\n                    onScaleChange: (scale) => {\n                        settings.value.petScale = scale;\n                    },\n                    onTap: (_e) => {\n                        log(' ->  LLM');\n                        Live2DManager.playRandomAnimation();\n                    },\n                    onDoubleTap: (_e) => {\n                        log(' -> ');\n                        ChatMonitor.manualTrigger();\n                    },\n                    onLongPress: (_e) => {\n                        log(' -> ');\n                        openFunctionMenu(_e);\n                    },\n                });\n                if (!created) {\n                    notifyInitError('Live2D  WebGL ');\n                    return;\n                }\n                log('Live2D ');\n                const loaded = await loadModelWithProgress(s.modelPath);\n                if (loaded) {\n                    Live2DManager.mountToStage(stageSize.width, stageSize.height, 1);\n                    log('Live2D ');\n                }\n                else {\n                    notifyInitError('Live2D  CDN');\n                }\n                ChatMonitor.init({\n                    autoTrigger: s.autoTrigger,\n                    triggerInterval: s.triggerInterval,\n                    triggerProbability: s.triggerProbability,\n                    commentTriggerMode: s.commentTriggerMode,\n                }, () => {\n                    void Commentator.generate();\n                });\n                log('');\n                scheduleStatusCheck('init');\n            }\n            catch (e) {\n                notifyInitError('', e);\n            }\n        }\n        async function onModelChange(path) {\n            const loaded = await loadModelWithProgress(path);\n            if (loaded) {\n                const stageSize = getStageSize(settings.value.petScale);\n                Live2DManager.mountToStage(stageSize.width, stageSize.height, 1);\n            }\n            scheduleStatusCheck('model-change');\n        }\n        function onBubbleHidden() {\n            bubbleText.value = '';\n            bubbleDone.value = true;\n        }\n        watch(() => ({\n            autoTrigger: settings.value.autoTrigger,\n            triggerInterval: settings.value.triggerInterval,\n            triggerProbability: settings.value.triggerProbability,\n            commentTriggerMode: settings.value.commentTriggerMode,\n        }), (config) => {\n            ChatMonitor.updateConfig(config);\n        });\n        watch(() => settings.value.autoMotionLoop, (enabled) => {\n            Live2DManager.setAutoMotionLoopEnabled(enabled);\n        });\n        watch(() => settings.value.petScale, (scale) => {\n            const stageSize = getStageSize(scale);\n            Live2DStage.resizeFloating(stageSize.width, stageSize.height);\n            if (!Live2DStage.isPreviewMounted()) {\n                Live2DManager.updateScale(stageSize.width, stageSize.height, 1);\n            }\n        });\n        onMounted(() => {\n            bindViewportResizeRecovery();\n            initPet();\n        });\n        onUnmounted(() => {\n            unbindViewportResizeRecovery();\n            unregisterGlobalOpenSettings();\n            modelLoadTaskId++;\n            clearModelLoadingHideTimer();\n            clearStatusCheckTimer();\n            clearViewportResizeSyncTimer();\n            Live2DStage.hideLoadingProgress();\n            ChatMonitor.destroy();\n            Commentator.destroy();\n            try {\n                TTSManager.stop();\n                LipSyncManager.cleanup();\n            }\n            catch {\n                // ignore\n            }\n            Live2DManager.destroyModel();\n            Live2DStage.destroy();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", null, [\n                _createVNode(ChatBubble, {\n                    text: bubbleText.value,\n                    \"is-done\": bubbleDone.value,\n                    onHidden: onBubbleHidden\n                }, null, 8 /* PROPS */, [\"text\", \"is-done\"]),\n                _createVNode(SettingsPanel, {\n                    visible: _unref(showSettings),\n                    onClose: _cache[0] || (_cache[0] = ($event) => (_unref(uiStore).closeSettings())),\n                    onModelChange: onModelChange\n                }, null, 8 /* PROPS */, [\"visible\"]),\n                _createVNode(FunctionMenu, {\n                    visible: showMenu.value,\n                    x: menuAnchor.value.x,\n                    y: menuAnchor.value.y,\n                    placement: menuPlacement.value,\n                    \"motion-loop-enabled\": _unref(settings).autoMotionLoop,\n                    \"comment-style\": _unref(settings).commentStyle,\n                    onClose: _cache[1] || (_cache[1] = ($event) => (showMenu.value = false)),\n                    onSendChat: onManualChat,\n                    onToggleMotionLoop: toggleMotionLoop,\n                    onSwitchModel: openModelBrowser,\n                    onSwitchPersona: cyclePersona,\n                    onCloseModel: closePet\n                }, null, 8 /* PROPS */, [\"visible\", \"x\", \"y\", \"placement\", \"motion-loop-enabled\", \"comment-style\"]),\n                (showModelBrowser.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"browser-overlay\",\n                        onClick: _cache[4] || (_cache[4] = _withModifiers(($event) => (showModelBrowser.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _cache[5] || (_cache[5] = _createElementVNode(\"h3\", null, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"close-btn\",\n                                    onClick: _cache[2] || (_cache[2] = ($event) => (showModelBrowser.value = false))\n                                }, \"\")\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createVNode(ModelBrowser, {\n                                    \"use-cdn\": _unref(settings).useCdn,\n                                    onCancel: _cache[3] || (_cache[3] = ($event) => (showModelBrowser.value = false)),\n                                    onLoadModel: onModelBrowserLoad\n                                }, null, 8 /* PROPS */, [\"use-cdn\"])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PetContainer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PetContainer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PetContainer.vue?vue&type=style&index=0&id=6401f5ba&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_044411237ecec1aa8d154f48631c8f18/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6401f5ba\"]])\n\nexport default __exports__","/**\n *  iframe  <head> \n *  jQuery  Vue  DOM \n */\nexport function teleport_style(): void {\n  // /\n  deteleport_style();\n  $(`<div>`)\n    .attr('script_id', getScriptId())\n    .append($(`head > style`, document).clone())\n    .appendTo('head');\n}\n\n/**\n * \n */\nexport function deteleport_style(): void {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport PetContainer from './ui/PetContainer.vue';\nimport { ChatMonitor } from './chat/monitor';\nimport { teleport_style, deteleport_style } from './utils/style-teleport';\nimport { error as logError, log, warn } from './utils/dom';\nimport { SCRIPT_NAME } from './core/constants';\nimport { useUiStore } from './core/ui';\n\nconst BUILD_TAG = '20260215.04';\nconst SETTINGS_LABEL = '';\nconst OPEN_SETTINGS_FN_KEY = '__desktopPetOpenSettings_v2';\n\n// Pinia  $(() => {}) \nconst pinia = createPinia();\nconst uiStore = useUiStore(pinia);\nconst EXTENSIONS_MENU_CONTAINER_ID = 'desktop-pet-settings-menu-container';\nconst EXTENSIONS_MENU_ITEM_ID = 'desktop-pet-settings-menu-item';\nconst EXTENSIONS_MENU_CLICK_NAMESPACE = '.desktopPetSettingsMenu';\n\nlet extensionsMenuRetryTimer: number | null = null;\n\nfunction getParentDocument(): Document {\n  try {\n    return window.parent?.document ?? document;\n  } catch {\n    return document;\n  }\n}\n\nfunction getTopWindow(): Window {\n  return window.parent ?? window;\n}\n\nfunction bindExtensionsMenuDelegation(parentDoc: Document): void {\n  const clickEvent = `click${EXTENSIONS_MENU_CLICK_NAMESPACE}`;\n  $(parentDoc).off(clickEvent, `#${EXTENSIONS_MENU_ITEM_ID}`);\n  $(parentDoc).on(clickEvent, `#${EXTENSIONS_MENU_ITEM_ID}`, (event) => {\n    void onExtensionsMenuItemClick(event as unknown as JQuery.ClickEvent);\n  });\n}\n\nfunction clearExtensionsMenuRetryTimer(): void {\n  if (extensionsMenuRetryTimer !== null) {\n    window.clearTimeout(extensionsMenuRetryTimer);\n    extensionsMenuRetryTimer = null;\n  }\n}\n\nfunction scheduleExtensionsMenuInjection(): void {\n  if (extensionsMenuRetryTimer !== null) {\n    return;\n  }\n\n  extensionsMenuRetryTimer = window.setTimeout(() => {\n    extensionsMenuRetryTimer = null;\n    injectExtensionsMenuItem();\n  }, 1000);\n}\n\nasync function onExtensionsMenuItemClick(event: JQuery.ClickEvent): Promise<void> {\n  event.stopPropagation();\n  log('');\n\n  const parentDoc = getParentDocument();\n  const $extensionsMenu = $('#extensionsMenu', parentDoc);\n  const $extensionsMenuButton = $('#extensionsMenuButton', parentDoc);\n\n  if ($extensionsMenuButton.length > 0 && $extensionsMenu.is(':visible')) {\n    $extensionsMenuButton.trigger('click');\n    await new Promise<void>((resolve) => {\n      window.setTimeout(resolve, 120);\n    });\n  }\n\n  const top = getTopWindow() as any;\n  const openSettings = top?.[OPEN_SETTINGS_FN_KEY];\n  if (typeof openSettings === 'function') {\n    openSettings();\n    log('');\n  } else {\n    uiStore.openSettings();\n    log(` Pinia  (showSettings=${String(uiStore.showSettings)})`);\n  }\n\n  window.setTimeout(() => {\n    try {\n      const overlay = parentDoc.querySelector('#desktop-pet-app .settings-overlay') as HTMLElement | null;\n      const rect = overlay?.getBoundingClientRect?.();\n      const summary = rect\n        ? `${Math.round(rect.left)},${Math.round(rect.top)} ${Math.round(rect.width)}x${Math.round(rect.height)}`\n        : 'none';\n      const style = overlay ? (window.getComputedStyle(overlay) as CSSStyleDeclaration) : null;\n      const styleSummary = style\n        ? `position=${style.position} display=${style.display} width=${style.width} height=${style.height}`\n        : 'style=none';\n      log(` DOM : overlay=${!!overlay} rect=${summary} ${styleSummary}`);\n    } catch (e) {\n      warn(' DOM ', e);\n    }\n  }, 0);\n}\n\nfunction injectExtensionsMenuItem(): void {\n  const parentDoc = getParentDocument();\n  const $extensionsMenu = $('#extensionsMenu', parentDoc);\n\n  if ($extensionsMenu.length === 0) {\n    scheduleExtensionsMenuInjection();\n    return;\n  }\n\n  bindExtensionsMenuDelegation(parentDoc);\n  const $existingItem = $(`#${EXTENSIONS_MENU_ITEM_ID}`, parentDoc);\n  if ($existingItem.length > 0) {\n    return;\n  }\n\n  const $container = $(\n    `<div class=\"extension_container interactable\" id=\"${EXTENSIONS_MENU_CONTAINER_ID}\" tabindex=\"0\"></div>`,\n  );\n\n  const $item = $(\n    `<div class=\"list-group-item flex-container flexGap5 interactable\" id=\"${EXTENSIONS_MENU_ITEM_ID}\" title=\"${SETTINGS_LABEL}\"><div class=\"fa-fw fa-solid fa-paw extensionsMenuExtensionButton\"></div><span>${SETTINGS_LABEL}</span></div>`,\n  );\n\n  $container.append($item);\n  $extensionsMenu.append($container);\n}\n\nfunction removeExtensionsMenuItem(): void {\n  clearExtensionsMenuRetryTimer();\n\n  const parentDoc = getParentDocument();\n  const clickEvent = `click${EXTENSIONS_MENU_CLICK_NAMESPACE}`;\n  $(parentDoc).off(clickEvent, `#${EXTENSIONS_MENU_ITEM_ID}`);\n  $(`#${EXTENSIONS_MENU_CONTAINER_ID}`, parentDoc).remove();\n}\n\n$(() => {\n  // \n  teleport_style();\n\n  try {\n    log(`(${BUILD_TAG})`);\n\n    // \n    try {\n      if (typeof eventOn === 'function' && typeof getButtonEvent === 'function') {\n        eventOn(getButtonEvent(''), () => {\n          uiStore.openSettings();\n        });\n      }\n    } catch (e) {\n      logError('', e);\n    }\n\n    //  Vue \n    try {\n      const parentDoc = getParentDocument();\n      $('#desktop-pet-app', parentDoc).remove();\n    } catch {\n      // ignore\n    }\n    const $app = $('<div id=\"desktop-pet-app\">').appendTo('body');\n    const app = createApp(PetContainer);\n    app.use(pinia);\n    app.config.errorHandler = (err, _instance, info) => {\n      logError(`Vue error: ${info}`, err);\n    };\n    app.config.warnHandler = (msg, _instance, trace) => {\n      warn(`Vue warn: ${msg}${trace ? `\\n${trace}` : ''}`);\n    };\n    app.mount($app[0]);\n    injectExtensionsMenuItem();\n\n    toastr.success(`${SCRIPT_NAME}(${BUILD_TAG})`);\n    log(`(${BUILD_TAG})`);\n\n    // \n    let chatId = SillyTavern.getCurrentChatId();\n    eventOn(tavern_events.CHAT_CHANGED, (newChatId: string) => {\n      if (chatId !== newChatId) {\n        chatId = newChatId;\n        ChatMonitor.resetState();\n      }\n    });\n  } catch (e) {\n    logError('', e);\n    toastr.error(`${SCRIPT_NAME}(${BUILD_TAG})`);\n    $('#desktop-pet-app').remove();\n  }\n});\n\n$(window).on('pagehide', () => {\n  removeExtensionsMenuItem();\n  deteleport_style();\n  $('#desktop-pet-app').remove();\n  $('#desktop-pet-stage').remove();\n});\n"],"names":["content","__esModule","default","module","id","locals","exports","add","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","push","___CSS_LOADER_EXPORT___","sfc","props","target","__vccOpts","key","val","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","cssMapping","base64","data","sourceMapping","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Vue","SDK_URLS","RECOMMENDED_MODELS","name","path","COMMENT_STYLES","COMMENT_TRIGGER_MODE_OPTIONS","label","EMOTION_TAGS","API_SOURCES","EIKANYA_CDN_BASE","EIKANYA_RAW_BASE","DEFAULTS","x","y","z","isRecord","Array","isArray","EMOTION_TAG_SET","Set","asEmotionTag","s","String","trim","has","DEFAULT_ALIASES","dedupAliases","aliases","out","seen","raw","trimmed","createDefaultEmotionConfigs","tag","ttsContext","live2dExpression","live2dMotion","enabled","group","normalizeEmotionConfigs","byTag","Map","live2dMotionRaw","indexRaw","Number","isFinite","Math","max","floor","cfg","v","set","defaults","def","getEmotionConfigByTag","configs","resolveEmotionTag","rawTag","direct","needle","alias","getTargetConsole","top","window","parent","console","log","args","warn","error","deleteAtPath","current","last","parseSettings","rawObject","first","SettingsSchema","safeParse","success","cleaned","issue","issues","second","parse","object","apiMode","enum","apiConfig","url","string","apiKey","model","source","max_tokens","number","min","temperature","frequency_penalty","presence_penalty","top_p","top_k","usePresetSampling","boolean","sendWorldInfo","modelPath","useCdn","petPosition","petScale","autoMotionLoop","commentStyle","commentTriggerMode","customPrompt","autoTrigger","triggerInterval","triggerProbability","maxChatContext","useTamakoTodaySpecial","emotionCotEnabled","emotionCotStripFromText","emotionConfigs","array","ttsProvider","ttsAutoPlay","ttsDefaultSpeaker","lipSyncManualParamsEnabled","lipSyncManualParamIds","gptSoVits","apiUrl","endpoint","useCorsProxy","mediaType","streamingMode","textLang","textSplitMethod","speedFactor","strictWeightSwitch","probeOnAudioError","modelSwitchMode","setModelEndpoint","importPathPrefix","voices","desc","refAudioPath","promptText","promptLang","gptWeightsPath","sovitsWeightsPath","useSettingsStore","parsed","getVariables","script_id","getScriptId","includes","settings","ref","watchEffect","replaceVariables","updateSettings","partial","resetSettings","next","TTS_PROVIDER","LITTLEWHITEBOX","GPT_SOVITS_V2","getTopWindow","getStoragePrefix","getTtsEnabledKey","getCharTtsVoiceKey","normalizeGptSoVitsSwitchMode","mode","normalizeSetModelEndpoint","startsWith","getTTSProvider","getGptSoVitsConfig","assign","normalizeGptSoVitsVoice","voice","rawCfg","speaker","ref_audio_path","ref_audio","prompt_text","prompt_lang","text_lang","gpt_weights_path","gptPath","gpt","sovits_weights_path","sovitsPath","sovits","model_switch_mode","set_model_endpoint","description","resourceId","toGptSoVitsVoiceConfig","globalDefaults","normalized","globalCfg","isGptSoVitsVoiceUsable","pickFirstUsableGptSoVitsVoice","voiceList","getGptSoVitsVoiceList","_lwbTtsCache","_lwbTtsCacheTime","async","getTTSVoiceListAsync","getGptSoVitsVoiceListAsync","now","Date","mySpeakers","response","fetch","cache","ok","json","volc","e","fetchLittleWhiteBoxTTSConfig","isFreeVoice","inferResourceId","getVoiceDesc","topAny","xbTts","xiaobaixTts","getConfig","config","xbVoiceData","XB_TTS_VOICE_DATA","slice","inferSource","scene","lower","female_1","female_2","female_3","female_4","female_5","female_6","female_7","male_1","male_2","male_3","male_4","configurable","getTTSEnabled","saved","localStorage","getItem","Live2DLoader","_READY_MARK","_RUNTIME_KEY","_JSDELIVR_HOSTS","isLoaded","loadPromise","load","_getRuntime","_doLoad","getRuntime","targetWindow","getPixi","pixi","runtime","live2dModel","_getPixiMajorVersion","PIXI","live2d","Live2DModel","_setRuntime","pixiVersion","VERSION","loadedAt","pixiMajor","detected","_loadScriptWithFallback","_hasValidCubism4Core","Live2DCubismCore","Live2D","Promise","setTimeout","version","majorStr","split","major","parseInt","_buildUrlCandidates","originalUrl","candidates","candidate","urlObj","URL","hostname","endsWith","h","u","pathname","replace","owner","repoWithRef","filePath","repo","suffix","search","hash","core","hasVersion","Version","hasMoc","Moc","hasUtils","Utils","_loadScriptBySrc","timeoutMs","resolve","reject","timer","doc","script","src","dataset","desktopPetSdk","cleanup","onload","onerror","clearTimeout","lastError","DEFAULT_CONFIG","longPressDelay","doubleClickWindow","moveThreshold","GestureRecognizer","element","onGesture","isDraggingCheck","state","startPos","longPressTimer","doubleClickTimer","longPressFired","moved","destroyed","boundPointerDown","boundPointerMove","boundPointerUp","boundContextMenu","constructor","maxTouchPoints","handlePointerDown","handlePointerMove","handlePointerUp","preventDefault","addEventListener","destroy","clearAllTimers","removeEventListener","_e","clientX","clientY","clearLongPressTimer","dx","dy","sqrt","clearDoubleClickTimer","Live2DStage","app","canvas","glContext","container","mountStack","mountMode","_pendingFloatingResize","loadingOverlay","loadingText","loadingBarFill","interactionLayer","gestureRecognizer","_dragClass","_minVisiblePx","_interactionPaddingPx","_alphaHitThreshold","_maxPixelScanSamples","_onPositionChange","_boundWindowResize","_interactionSyncTimer","_pixelReadBuffer","_lastClampLogAt","_clampPosition","width","height","minVisible","_top","viewportWidth","innerWidth","documentElement","clientWidth","viewportHeight","innerHeight","clientHeight","safeWidth","safeHeight","safeMinVisibleX","safeMinVisibleY","minX","minY","maxX","maxY","safeX","safeY","clampedX","clampedY","clamped","_shouldClampCurrentPosition","hasCustom","style","right","bottom","hasExplicitLeftTop","left","_getContainerRectSize","rect","getBoundingClientRect","_isRectFullyOutsideViewport","_getVisibleAreaRatio","rectWidth","rectHeight","visibleLeft","visibleTop","visibleRight","visibleBottom","visibleArea","totalArea","_clampPositionByAxis","size","viewportSize","safeSize","safeViewport","safeMinVisible","safeValue","_clampContainerToViewport","reason","shouldClamp","fullyOutside","visibleRatio","isResizeClamp","forceFullVisible","minVisibleX","minVisibleY","nextX","nextY","abs","from","to","_bindWindowResize","_unbindWindowResize","passive","_getPIXI","_measureOpaqueBoundsFromCanvas","containerWidth","containerHeight","gl","bufferWidth","drawingBufferWidth","bufferHeight","drawingBufferHeight","byteLength","Uint8Array","pixels","readPixels","RGBA","UNSIGNED_BYTE","scanStep","alphaThreshold","rowOffset","scaleX","scaleY","ceil","_syncInteractionLayerBounds","disableLayer","pointerEvents","cursor","parseFloat","applyBounds","padding","x1","y1","w","stage","children","alphaBounds","getBounds","bounds","fallbackWidth","round","fallbackHeight","_startInteractionSyncTimer","_stopInteractionSyncTimer","setInterval","clearInterval","_enablePointerDrag","$container","dragTarget","onPositionChange","pointerId","startClientX","startClientY","startLeft","startTop","dragging","getRectSize","removeClass","button","getRectLeftTop","setPointerCapture","dist","addClass","onPointerUp","topPx","releasePointerCapture","getSelection","removeAllRanges","_ensureLoadingOverlay","overlay","ownerDocument","contains","hideLoadingProgress","panel","text","textContent","track","fill","showLoadingProgress","percent","message","safePercent","create","stale","getElementById","position","body","className","dpr","devicePixelRatio","getContext","alpha","antialias","stencil","depth","preserveDrawingBuffer","premultipliedAlpha","attrs","getContextAttributes","Application","view","context","backgroundAlpha","autoStart","resolution","autoDensity","$","draggable","handle","start","ui","drag","stop","interactionTarget","delta","deltaY","newScale","scale","onScaleChange","event","onTap","onDoubleTap","onLongPress","hasClass","getStage","isPreviewMounted","pushMount","mountEl","isConnected","nextSibling","styleText","getComputedStyle","popMount","entry","pop","restore","resize","resizeFloating","renderer","resizePreview","EXPRESSION_LIVE2D_MAP","expressions","motions","uniquePush","uniquePushAllowEmpty","finalValue","uniqueMotionPush","normalizeFileStem","input","noQuery","filePart","decoded","decodeURIComponent","normalizeDefinitionName","fallback","directName","Name","Id","stem","File","file","Path","collectSettingsCandidates","motionManager","internalModel","rawSettings","modelJson","isExpressionFileLike","isMotionFileLike","isMotionDefinition","node","soundLike","Sound","sound","countMotionDefinitions","count","mergeGroupCount","keyRaw","groupName","parsedCount","safeCount","prev","pushFromContainer","names","fallbackPrefix","fallbackPrefixInner","pushFromList","entries","fallbackName","collectExpressionNamesFromUnknown","visited","visit","itemAny","fileLike","anyObj","directFile","rawKey","keyLower","keyIsExpression","nextContext","collectMotionGroupCountsFromUnknown","groups","parentKey","some","keyIsMotionContainer","nested","nestedRawKey","nestedValue","nestedRaw","nestedKey","nestedCount","pushMotionEntriesFromGroupContainer","groupRaw","groupTrimmed","collectMotionEntries","definitions","settingsCandidates","Motions","FileReferences","collectExpressionNames","expressionManager","Expressions","getExpressionCount","getExpressionName","getExpressionFile","collectMotionGroupNames","groupNames","pushFromObject","keys","motionGroups","anySettings","getMotionGroupCount","getMotionGroupName","getMotionGroupNames","matchLive2DExpression","targetExpression","override","overrideName","mapping","candidateRaw","exact","find","matchLive2DMotion","overrideGroup","exactByName","fuzzyByName","nameLower","fuzzy","TICKER_REGISTERED_FLAG","Live2DManager","_runtime","isReady","modelBaseWidth","modelBaseHeight","modelBaseBounds","_lastModelJson","_lastModelJsonSourceUrl","_autoMotionTimer","autoMotionLoopEnabled","_mouthParamCore","_mouthParamIds","_mouthParamIndexes","_mouthParamRangeMins","_mouthParamRangeMaxs","_mouthParamWarned","_mouthCurrentValue","_lipSyncActive","_inModelUpdate","_writeMaskCore","_writeMaskRestore","_updateHookModel","_updateHookRestore","_manualMouthParamEnabled","_manualMouthParamIds","_manualMouthParamIdSet","runtimePixi","_encodePathSegment","segment","safeChar","encoded","ch","_normalizeRemoteUrl","inputUrl","_normalizeResourceRef","inputRef","qIndex","indexOf","pathPart","queryPart","_getMirrorEikanyaModelUrl","modelUrl","_expandJsDelivrHosts","results","host","_convertJsDelivrGhToRawCandidates","_buildModelUrlCandidates","bases","addBase","mirrorUrl","base","variant","_createModelWithTimeout","dataUrl","timeoutPromise","_resolve","race","autoUpdate","autoInteract","_fetchWithTimeout","init","AbortController","controller","abort","signal","_toPositiveNumber","_toScale","_readModelBaseBounds","getLocalBounds","_resolveModelBaseBounds","measured","_applyStageTransform","stageWidth","stageHeight","safeStageWidth","safeStageHeight","safeModelWidth","safeModelHeight","fitScale","finalScale","visible","anchor","pivot","modelWidth","modelHeight","_normalizeLegacyCubism2Settings","textures","Textures","hintKeys","texture","textureId","skin","modelId","defaultTexture","defaultSkin","selected","hint","matched","normalizedTextures","textureCount","_clearAutoMotionLoop","_stopCurrentMotion","stopped","tryCall","method","mm","animator","internal","_refreshManualMouthParams","ids","low","_setLipSyncActive","active","coreModel","_ensureLipSyncHooks","_installCoreWriteMask","setAutoMotionLoopEnabled","_startAutoMotionLoop","_pickDefaultMotionGroup","preferred","token","initialGroups","getMotionGroups","motionGroup","allGroupNames","playOne","idx","random","playMotion","randGroup","randIndex","intervalMs","groupCount","_stripJsonComments","output","inString","quoteChar","escaping","inLineComment","inBlockComment","_tryParseModelJson","_buildModelJsonCandidates","addCandidate","_fetchModelJsonCandidate","useProxy","requestUrl","_getProxiedUrl","resp","sourceUrl","getCorsProxyUrl","proxied","enableCorsProxy","corsProxy","getProxyUrl","origin","location","retries","registerTicker","Ticker","loadModel","onProgress","progress","reportProgress","destroyModel","modelUrlCandidates","texturesReady","loadedFromUrl","candidateUrl","attemptModel","attemptTexturesReady","attemptLabel","attemptProgressStart","_buildRemoteModelDataUrl","fromError","proxyDataUrl","_waitForTextures","loadedCount","totalCount","textureRatio","proxyModel","retryError","attemptError","measuredBounds","getExpressions","forceProxyResources","candidateUrls","sourceModelUrl","directError","proxyError","modifiedModelJson","resolveUrl","p","Physics","Pose","UserData","motionList","motionDef","exprDef","Model","physics","pose","modelJsonStr","mountToStage","removeChildAt","transform","addChild","updateScale","_getModelBaseSize","cached","fallbackNames","mergeGroupMap","keyTrimmed","defs","getMotions","merged","pushAll","items","cachedAny","motionsContainer","playExpression","expression","runMotion","motionIndex","motion","firstError","startMotion","startRandomMotion","playRandomAnimation","setMouthOpen","_characterId","clampedValue","logPrefix","getParamRange","paramId","paramIndex","NaN","readNumber","getParameterMinimumValue","getParameterMaximumValue","getParamMin","getParamMax","mapToParamValue","getIndexById","getParameterIndex","getParamIndex","applyById","mappedValue","setParameterValueById","addParameterValueById","setParamFloat","addParamFloat","applyByIndex","getParameterId","setParameterValueByIndex","addParameterValueByIndex","setParameterValue","addParameterValue","paramNames","appliedAny","manualId","paramName","getParameterCount","numericFallback","pid","range","sort","b","picked","pidx","msg","presetCandidates","scannedIds","_isMouthParam","paramIdOrIndex","restoreEntries","methods","getParamRef","paramRef","apply","updater","rawUpdate","self","ret","_applyMouthValueToModel","targetValue","oldValue","applied","_getMouthParamSource","getLipSyncDebugInfo","lipSyncOverride","mouthParamsSource","mouthParamsCount","clear","retryCount","check","_textures","textureList","tex","baseTexture","valid","every","_ttsGetProxiedAudioUrlRef","LipSyncManager","audioContext","analyser","dataArray","animationFrameId","currentCharacterId","lastVolume","connectedAudioElements","WeakSet","_proxyAudio","_proxyAudioCleanup","fftSize","smoothingFactor","sensitivity","minThreshold","resume","then","AudioContextClass","AudioContext","webkitAudioContext","createAnalyser","smoothingTimeConstant","frequencyBinCount","_getProxiedAudioUrl","connectAudio","audioElement","catch","disconnect","targetAudio","isLocalhost","isDataUrl","isBlobUrl","isSameOrigin","proxiedUrl","Audio","crossOrigin","substring","currentTime","volume","paused","play","syncPlay","syncPause","pause","syncSeek","createMediaElementSource","connect","destination","getVolume","getByteFrequencyData","sum","average","startSync","characterId","stopSync","frameCount","toFixed","requestAnimationFrame","cancelAnimationFrame","getSettingsSnapshot","_showToastRef","showToast","t","toastr","info","clipText","isProxyNotFound","status","bodyText","hasLive2D","TTSManager","provider","autoPlay","isPlaying","isLoading","currentAudio","currentSegmentId","littleWhiteBox","_gptSoVitsResolvedProxyRoute","_gptSoVitsActiveWeights","_gptSoVitsWeightSwitchUnavailable","_gptSoVitsWeightSwitchWarned","_gptSoVitsProxyWarned","_gptSoVitsFetchController","_refreshProviderState","LittleWhiteBox","_onPlaybackEnded","hideLoadingIndicator","jq","jQuery","on","showLoadingIndicator","classList","_abortGptSoVitsFetch","player","_stopCurrent","_getCurrentAudioElement","audio","audioElements","allAudio","querySelectorAll","anyAudio","_getPreferredAudioElement","_isProxyUrl","safeUrl","_buildGptSoVitsProxyUrl","route","_rememberProxyRoute","directUrl","remembered","rememberedUrl","_buildGptSoVitsTtsUrl","resolvedVoice","endpointRaw","vcfg","searchParams","_requestGptSoVitsApi","queryParams","jsonBody","pathRaw","directUrlObj","forEach","attemptTargets","addTarget","errors","credentials","headers","_fetchGptSoVitsApi","_postGptSoVitsApi","_setGptSoVitsWeights","kind","weightsPath","normalizedKind","weights_path","_setGptSoVitsModelPair","endpointOverride","gpt_model_path","sovits_model_path","_ensureGptSoVitsWeights","desiredGpt","desiredSovits","switchMode","_speakWithGptSoVits","segmentId","audioUrl","onEnded","once","lipId","_startLipSyncOnPlay","_startLipSyncWhenModelReady","maxWait","startTime","tryWait","_waitForModelReadyBeforeTTS","hasStarted","tryBind","preferredAudio","_bindLipSyncToAudio","onPlaying","onTimeUpdate","onEnd","speak","ttsConfig","tts","boundVoice","getCharacterTTSVoice","voiceName","defaultVoice","resolveVoiceByName","speakerValue","contextTexts","callGenerate","err","ChatMonitor","messageCount","ignoreNextCount","_onTrigger","_stops","_lastUserSignalAt","_config","onTrigger","messageSentStop","_bindEvent","_messageId","_recordUserSignal","userRenderedStop","afterCommandsStop","_type","option","dryRun","quiet_prompt","generationStartedStop","generationEndedStop","_handleTriggerCount","_resolveEventName","eventKey","fromSillyTavern","SillyTavern","eventTypes","fromLegacy","tavern_events","handler","eventName","eventSource","off","eventOn","updateConfig","_shouldCountBySource","_checkAutoTrigger","roll","manualTrigger","resetState","markSelfGeneration","PROMPT_TEMPLATES","systemPrompt","responseFormat","resolvePromptTemplate","template","appendEmotionCotFormat","buildContextLines","chatContext","role","Commentator","isGenerating","_onComment","_streamStop","_latestStreamText","setCallback","cb","generate","emittedDone","chatMessages","_getChatContext","todaySpecial","_getTamakoTodaySpecialContent","system","user","buildPrompt","result","_generateCustom","_generateTavern","finalText","chat","userMessage","getChatResponseFormat","buildChatPrompt","maxTokens","_setupStreamListener","orderedPrompts","generateRaw","should_silence","should_stream","ordered_prompts","custom_api","_cleanupStreamListener","usePreset","buildAttemptBody","attempt","messages","stream","chat_completion_source","custom_prompt_post_processing","reverse_proxy","custom_url","custom_include_headers","requestWithAttempt","getRequestHeaders","errTxt","statusText","choices","details","attempts","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","fullText","maxCount","getChatMessages","hide_state","safeMaxCount","topDocument","currentSelector","plotContent","directText","_sanitizeTamakoText","innerText","beautifierFrame","payload","_readTamakoPayloadFromIframe","payloadText","_extractTamakoTextFromPayload","currentContent","iframe","captureTags","_getTamakoCaptureTags","tags","valuesFromTags","_extractTamakoTagText","extensionSettings","TamakoMarket","values","safeTag","escapedTag","regex","RegExp","match","exec","RE_THINK_CLOSED","RE_THINK_UNCLOSED","parseBracketContent","bracketContent","pipeParts","exprVoicePart","parseEmotionCotText","rawText","stripThinkBlocks","cleanText","normalizedTag","trimStart","close","open","after","isPendingPrefix","speakerMatch","stripFromText","prefixMatch","useUiStore","showSettings","openSettings","closeSettings","_hoisted_1","class","_hoisted_2","_hoisted_3","__name","isDone","emits","setup","__props","emit","__emit","displayText","bubbleStyle","LOADING_FRAMES","positionTimer","loadingTimer","loadingFrameIndex","getFiniteNumber","updateBubblePosition","vw","vh","getModelHeadAnchor","fallbackX","fallbackY","rawLeft","rawTop","safeLeft","safeTop","startPositionSync","stopPositionSync","stopLoadingAnimation","closeBubble","watch","immediate","onUnmounted","_ctx","_cache","onClick","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","placement","motionLoopEnabled","menuEl","inputEl","chatOpen","posX","posY","panelTransform","computed","panelStyle","clampIntoViewport","el","send","openChat","nextTick","focus","select","onInputKeydown","shiftKey","onGlobalKeydown","ref_key","$event","$emit","rows","placeholder","onKeydown","disabled","_","isModelFile","FILTERED_EXTENSIONS","shouldShow","ext","fetchDirectory","Accept","remaining","resetTime","resetDate","RateLimitError","isModel","localeCompare","super","toLocaleTimeString","searchQuery","expanded","loading","loadedOnce","childError","isSelected","filteredChildren","q","c","loadChildren","handleClick","_component_TreeNode","paddingLeft","title","child","onSelectModel","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","rootEntries","rootLoading","errorMsg","selectedPath","selectedName","filteredRootEntries","confirmLoad","cdnUrl","encodedPath","buildCdnUrl","loadRoot","TreeNode","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","sectionTabs","en","activeSection","store","recommendedModels","commentStyles","commentTriggerModeOptions","apiSources","showBrowser","customModelUrl","ttsEnabled","ttsVoiceList","refreshingTtsVoices","gptSoVitsVoicesJson","ttsTestText","ttsVoiceHint","emotionTags","live2dExpressions","live2dMotionGroups","live2dMotions","refreshingLive2dLists","live2dExpressionOptions","dedup","live2dExpressionOptionSet","live2dMotionSelectOptions","dedupKey","groupLabel","live2dMotionOptionSet","live2dListSummary","exprCount","motionCount","live2dPreviewMountEl","live2dPreviewInteractEl","previewMounted","previewTag","previewStatus","previewZoomFactor","previewPanOffsetX","previewPanOffsetY","previewBasePose","previewIsDragging","previewDragStart","previewDragOrigin","previewMountPromise","previewResizeObserver","clamp","getPreviewCanvasSize","applyPreviewViewport","maxOffsetX","maxOffsetY","render","resetPreviewViewport","getPreviewDragPoint","ev","originalEvent","touches","changedTouches","disconnectPreviewResizeObserver","ensurePreviewMounted","interactEl","__dpPreviewHandlers","onDown","point","onMove","onUp","onWheel","bindPreviewViewportEvents","ResizeObserver","observe","bindPreviewResizeObserver","baseScale","capturePreviewBasePose","refreshLive2DLists","finally","cleanupPreviewMount","handlers","unbindPreviewViewportEvents","restored","replayPreview","previewEmotion","section","onBeforeUnmount","modelList","fetchingModels","modelFetchError","testingConnection","connectionStatus","connectionError","showAdvanced","showEmotionAdvanced","showLipSyncAdvanced","lipSyncManualParamsText","overlayFallbackStyle","inset","minHeight","zIndex","display","alignItems","justifyContent","panelFallbackStyle","flexDirection","maxHeight","normalizeModelList","maybeId","maybeModel","maybeName","getModelListSafe","customApi","helperGetModelList","TavernHelper","getModelList","apiurl","Authorization","request","models","getModelListByHttp","fetchModels","testConnection","onBrowserLoad","loadCustomUrl","blobMatch","resetEmotionConfigs","onAliasesBlur","parseAliasesText","m","autoMatchLive2DOverrides","overwrite","warning","filled","exprOverride","motionEnabled","motionGroupOverride","matchedMotion","clearLive2DOverrides","cleared","hadExpr","hadGroup","expr","exprText","motionText","onToggleTtsEnabled","setItem","setTTSEnabled","refreshTtsVoices","saveGptSoVitsVoices","ignoredCount","missingRefCount","normalizeGptSoVitsVoicesForStore","firstUsable","testTts","ctx","getCurrentCharacterId","selectedUsable","targetName","stopTts","applyLipSyncManualParams","step","opt","onBlur","onInput","onChange","ModelBrowser","onCancel","onLoadModel","OPEN_SETTINGS_FN_KEY","uiStore","bubbleText","bubbleDone","globalOpenSettingsFn","modelLoadTaskId","modelLoadingHideTimer","statusCheckTimer","viewportResizeSyncTimer","boundWindowResizeHandler","boundVisualViewportResizeHandler","showMenu","menuAnchor","menuPlacement","showModelBrowser","toggleMotionLoop","cyclePersona","personas","openModelBrowser","onModelBrowserLoad","onModelChange","onManualChat","closePet","onBubbleHidden","getStageSize","safeScale","clearModelLoadingHideTimer","clearStatusCheckTimer","clearViewportResizeSyncTimer","scheduleViewportResizeSync","stageSize","recoverOnce","stageEl","visibility","opacity","scheduleStatusCheck","syncStageAfterViewportResize","renderModelLoadProgress","notifyInitError","loadModelWithProgress","taskId","loaded","rectSummary","hasLive2d","hasModel","stageChildren","stageVisible","prevOutline","outline","prevBackground","background","prevZIndex","initPet","getProxiedAudioUrl","setLipSyncRefs","appendInexistentScriptButtons","getButtonEvent","applyEmotionToLive2D","ttsOverrides","vibrate","openFunctionMenu","fn","registerGlobalOpenSettings","onMounted","viewport","visualViewport","bindViewportResizeRecovery","unbindViewportResizeRecovery","unregisterGlobalOpenSettings","ChatBubble","onHidden","SettingsPanel","onClose","FunctionMenu","onSendChat","onToggleMotionLoop","onSwitchModel","onSwitchPersona","onCloseModel","deteleport_style","BUILD_TAG","SETTINGS_LABEL","pinia","EXTENSIONS_MENU_CONTAINER_ID","EXTENSIONS_MENU_ITEM_ID","EXTENSIONS_MENU_CLICK_NAMESPACE","extensionsMenuRetryTimer","getParentDocument","bindExtensionsMenuDelegation","parentDoc","clickEvent","stopPropagation","$extensionsMenu","$extensionsMenuButton","is","trigger","summary","onExtensionsMenuItemClick","injectExtensionsMenuItem","$item","append","removeExtensionsMenuItem","attr","clone","appendTo","$app","createApp","PetContainer","use","errorHandler","_instance","warnHandler","trace","mount","chatId","getCurrentChatId","CHAT_CHANGED","newChatId"],"sourceRoot":""}